import{c as h,j as e,A,U as S,B as o,t as i,f as P,u as I,h as u}from"./index-D7he1i6_.js";import{A as T,b as $,a as M}from"./avatar-CAwhaa4I.js";import{B}from"./bell-C6o2Pif4.js";import{V as E,M as D,a as N}from"./volume-2-COawAZmK.js";import{F as U}from"./fingerprint-zBi4BOHK.js";import{C as z}from"./check-BpMlry6P.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],V=h("globe",L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],O=h("log-out",q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],H=h("palette",F);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],R=h("panels-top-left",K);function W({language:c,t:b}){const{accentColor:d,setAccentColor:p,wallpaper:l,setWallpaper:j}=I();return e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-[#00a884] text-sm font-bold uppercase tracking-wider",children:c==="ar"?"المظهر":"Appearance"}),e.jsxs("div",{className:"bg-[#202c33] rounded-xl border border-gray-800 divide-y divide-gray-800",children:[e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/10 text-indigo-400",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c==="ar"?"لون التطبيق":"App Theme"}),e.jsx("p",{className:"text-xs text-gray-500",children:u[d].name})]})]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:Object.keys(u).map(a=>e.jsx("button",{onClick:()=>p(a),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all ring-2 ring-offset-2 ring-offset-[#202c33] ${d===a?"ring-white scale-110":"ring-transparent opacity-70 hover:opacity-100"}`,style:{backgroundColor:u[a].hex},children:d===a&&e.jsx(z,{className:"w-5 h-5 text-white drop-shadow-md"})},a))})]}),e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10 text-amber-500",children:e.jsx(R,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c==="ar"?"خلفية الدردشة":"Chat Wallpaper"}),e.jsx("p",{className:"text-xs text-gray-500",children:c==="ar"?"تخصيص الخلفية":"Customize background"})]})]}),e.jsxs("select",{value:l,onChange:a=>j(a.target.value),className:"bg-gray-800 text-white text-xs rounded-lg px-3 py-2 outline-none border border-gray-700",children:[e.jsx("option",{value:"default",children:"Default"}),e.jsx("option",{value:"doodles",children:"Doodles"}),e.jsx("option",{value:"stars",children:"Stars Pattern"}),e.jsx("option",{value:"geometric",children:"Geometric"})]})]})]})]})}function ee({user:c,onBack:b,onGoToProfile:d,onLogout:p,notificationsEnabled:l,onEnableNotifications:j,micEnabled:a,onEnableMic:v,soundEnabled:x,onToggleSound:w,currentSoundId:g,notificationSounds:k,onSelectSound:C,onTestSound:_,language:s,onLanguageChange:y,t:m}){return e.jsxs("div",{className:"flex flex-col h-full bg-[#111b21] text-white",children:[e.jsxs("div",{className:"p-4 bg-[#202c33] flex items-center gap-4 border-b border-gray-800",children:[e.jsx("button",{onClick:b,className:"text-gray-400 hover:text-white",children:e.jsx(A,{className:`w - 6 h - 6 ${s==="ar"?"rotate-180":""} `})}),e.jsx("h2",{className:`text - lg font - bold ${s==="ar"?"font-arabic":""} `,children:m("settings")})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-[#00a884] text-sm font-bold uppercase tracking-wider",children:"الحساب"}),e.jsxs("div",{onClick:d,className:"flex items-center gap-4 bg-[#202c33] p-4 rounded-xl border border-gray-800 hover:bg-[#2a3942] transition-colors cursor-pointer group",children:[e.jsxs(T,{className:"w-16 h-16 border-2 border-[#00a884]/20 group-hover:border-[#00a884]/50 transition-colors",children:[e.jsx($,{src:c.avatar_url}),e.jsx(M,{className:"text-xl",children:c.name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-white font-bold text-lg truncate",children:c.name}),e.jsxs("p",{className:"text-gray-500 text-sm truncate",children:["@",c.username]})]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500/10 flex items-center justify-center text-indigo-400 group-hover:bg-indigo-500/20 group-hover:scale-110 transition-all",children:e.jsx(S,{className:"w-5 h-5"})})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-[#00a884] text-sm font-bold uppercase tracking-wider",children:"Permissions & Notifications"}),e.jsxs("div",{className:"bg-[#202c33] rounded-xl border border-gray-800 divide-y divide-gray-800",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p - 2 rounded - lg ${l?"bg-[#00a884]/10 text-[#00a884]":"bg-gray-800 text-gray-400"} `,children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Desktop Notifications"}),e.jsx("p",{className:"text-xs text-gray-500",children:l?"Currently enabled":"Currently disabled"})]})]}),e.jsx(o,{onClick:()=>{if(console.log("Enable notifications clicked"),window.location.protocol!=="https:"&&window.location.hostname!=="localhost"){i.error("Notifications require HTTPS or localhost.");return}j()},disabled:l,variant:l?"ghost":"outline",className:l?"text-gray-500 cursor-default":"border-[#00a884] text-[#00a884] hover:bg-[#00a884]/10",children:l?"Enabled":"Enable"})]}),e.jsxs("div",{className:"p-4 bg-[#2a3942]/30 rounded-lg border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/10 text-indigo-400",children:e.jsx(E,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s==="ar"?"اختبار الكاميرا":"Camera Test"}),e.jsx("p",{className:"text-xs text-gray-500",children:s==="ar"?"تأكد من عمل الكاميرا":"Test your camera"})]})]}),e.jsx(o,{onClick:async()=>{try{const r=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}}),t=document.getElementById("camera-preview"),n=document.getElementById("camera-placeholder");t&&(t.srcObject=r,t.play(),n&&(n.style.display="none"),i.success(s==="ar"?"✅ الكاميرا تعمل!":"✅ Camera working!"),setTimeout(()=>{r.getTracks().forEach(f=>f.stop()),t&&(t.srcObject=null),n&&(n.style.display="block"),t.style.display="none"},5e3))}catch(r){console.log("Camera test failed:",r),r.name==="NotAllowedError"?i.error(s==="ar"?"❌ الإذن مرفوض":"❌ Permission denied"):i.error(s==="ar"?"❌ الكاميرا غير متاحة":"❌ Camera not available")}},size:"sm",variant:"outline",className:"h-7 text-[10px] border-indigo-500 text-indigo-400 hover:bg-indigo-500/10",children:s==="ar"?"اختبار":"Test"})]}),e.jsxs("div",{className:"mt-3 rounded-lg overflow-hidden bg-slate-900/50 aspect-video flex items-center justify-center",children:[e.jsx("video",{id:"camera-preview",autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover -scale-x-100",style:{display:"none"},onPlay:r=>r.target.style.display="block"}),e.jsx("p",{className:"text-xs text-gray-500",id:"camera-placeholder",children:s==="ar"?"اضغط اختبار لرؤية الكاميرا":"Click Test to see camera"})]})]}),e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p - 2 rounded - lg ${a?"bg-[#00a884]/10 text-[#00a884]":"bg-gray-800 text-gray-400"} `,children:e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Microphone Access"}),e.jsx("p",{className:"text-xs text-gray-500",children:a?"Access granted":"Required for voice messages"})]})]}),e.jsx(o,{onClick:()=>{if(console.log("Enable mic clicked"),window.location.protocol!=="https:"&&window.location.hostname!=="localhost"){i.error("Microphone access requires HTTPS or localhost.");return}v()},disabled:a,variant:a?"ghost":"outline",className:a?"text-gray-500 cursor-default":"border-[#00a884] text-[#00a884] hover:bg-[#00a884]/10",children:a?"Enabled":"Enable"})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-[#00a884]/10 text-[#00a884]",children:e.jsx(N,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Notification Sound"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Play sound on new message"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{onClick:()=>w(!x),className:`w - 10 h - 5 rounded - full relative cursor - pointer shadow - inner transition - colors ${x?"bg-[#00a884]":"bg-gray-600"} `,children:e.jsx("div",{className:`absolute top - 0.5 w - 4 h - 4 bg - white rounded - full shadow transition - all ${x?"right-0.5":"left-0.5"} `})}),e.jsx(o,{onClick:_,size:"sm",variant:"outline",className:"h-7 text-[10px] border-[#00a884] text-[#00a884] hover:bg-[#00a884]/10",children:"Test"})]})]}),x&&e.jsxs("div",{className:"space-y-2 pt-2 border-t border-gray-800",children:[e.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"Select Sound:"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:k.map(r=>e.jsxs("div",{className:`flex items - center justify - between p - 2 rounded - lg cursor - pointer transition - all ${g===r.id?"bg-[#00a884]/10 border border-[#00a884]/30":"bg-[#2a3942]/50 border border-transparent hover:bg-[#2a3942]"} `,onClick:()=>C(r.id),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w - 3 h - 3 rounded - full ${g===r.id?"bg-[#00a884]":"bg-gray-600"} `}),e.jsx("span",{className:"text-sm",children:r.name})]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),new Audio(r.url).play().catch(f=>i.error("Preview failed"))},className:"p-1.5 hover:bg-[#00a884]/20 rounded-md text-[#00a884] transition-colors",title:"Preview Sound",children:e.jsx(N,{className:"w-4 h-4"})})]},r.id))})]})]})]}),e.jsx("p",{className:"text-[10px] text-gray-600 px-2",children:s==="ar"?'نصيحة: لمستخدمي iPhone، يجب "إضافة للشاشة الرئيسية" لتلقي التنبيهات.':'Tip: On iPhone, you must "Add to Home Screen" to receive notifications.'})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-[#00a884] text-sm font-bold uppercase tracking-wider",children:s==="ar"?"الخصوصية والأمان":"Privacy & Security"}),e.jsxs("div",{className:"bg-[#202c33] rounded-xl border border-gray-800 divide-y divide-gray-800",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-rose-500/10 text-rose-500",children:e.jsx(P,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s==="ar"?"قفل التطبيق":"App Lock"}),e.jsx("p",{className:"text-xs text-gray-500",children:s==="ar"?"حماية بكلمة مرور":"Protect with passcode"})]})]}),e.jsx(o,{onClick:()=>{if(localStorage.getItem("chat_app_pin"))localStorage.removeItem("chat_app_pin"),localStorage.removeItem("chat_app_biometric"),i.success(s==="ar"?"تم إلغاء القفل":"App lock disabled");else{const t=prompt(s==="ar"?"أدخل رمز جديد (6 أرقام):":"Enter new 6-digit PIN:");t&&t.length===6&&!isNaN(Number(t))?(localStorage.setItem("chat_app_pin",t),i.success(s==="ar"?"تم تفعيل القفل":"App lock enabled")):t&&i.error(s==="ar"?"الرمز يجب أن يكون 6 أرقام":"PIN must be 6 digits")}},variant:"outline",className:`text-xs ${localStorage.getItem("chat_app_pin")?"text-red-400 border-red-400/30":"text-[#00a884] border-[#00a884]/30"}`,children:localStorage.getItem("chat_app_pin")?s==="ar"?"تعطيل":"Disable":s==="ar"?"تفعيل":"Enable"})]}),localStorage.getItem("chat_app_pin")&&e.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/10 text-indigo-500",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s==="ar"?"بصمة الوجه/الإصبع":"Face ID / Touch ID"}),e.jsx("p",{className:"text-xs text-gray-500",children:s==="ar"?"فتح القفل بالمقاييس الحيوية":"Unlock with biometrics"})]})]}),e.jsx(o,{onClick:async()=>{if(localStorage.getItem("chat_app_biometric")==="true"){localStorage.setItem("chat_app_biometric","false"),i.success(s==="ar"?"تم تعطيل البصمة":"Biometrics disabled");return}try{if(!window.PublicKeyCredential)throw new Error("WebAuthn not supported");const t=new Uint8Array(32);window.crypto.getRandomValues(t),await navigator.credentials.create({publicKey:{challenge:t,rp:{name:"Chat App",id:window.location.hostname},user:{id:new Uint8Array(16),name:c.username||"user",displayName:c.name||"User"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"},timeout:6e4,attestation:"none"}})&&(localStorage.setItem("chat_app_biometric","true"),i.success(s==="ar"?"تم تفعيل البصمة بنجاح":"Biometrics enabled successfully"))}catch(t){console.error("Biometric setup failed:",t),t.name==="NotAllowedError"?i.error(s==="ar"?"تم رفض الإذن":"Permission denied"):i.error(s==="ar"?"فشل إعداد البصمة. تأكد من دعم جهازك.":"Biometric setup failed. Ensure device support.")}},variant:"outline",className:`text-xs ${localStorage.getItem("chat_app_biometric")==="true"?"text-red-400 border-red-400/30":"text-[#00a884] border-[#00a884]/30"}`,children:localStorage.getItem("chat_app_biometric")==="true"?s==="ar"?"تعطيل":"Disable":s==="ar"?"تفعيل":"Enable"})]})]})]}),e.jsx(W,{language:s,t:m}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-[#00a884] text-sm font-bold uppercase tracking-wider",children:m("language")}),e.jsxs("div",{className:"bg-[#202c33] rounded-xl border border-gray-800 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/10 text-indigo-400",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m("language")}),e.jsx("p",{className:"text-xs text-gray-500",children:s==="ar"?"اللغة الحالية: العربية":"Current: English"})]})]}),e.jsxs("div",{className:"flex bg-[#111b21] rounded-lg p-1 border border-gray-800",children:[e.jsx("button",{onClick:()=>y("ar"),className:`px-4 py-1.5 rounded-md text-sm font-bold transition-all ${s==="ar"?"bg-[#00a884] text-white":"text-gray-500 hover:text-white"}`,children:"العربية"}),e.jsx("button",{onClick:()=>y("en"),className:`px-4 py-1.5 rounded-md text-sm font-bold transition-all ${s==="en"?"bg-[#00a884] text-white":"text-gray-500 hover:text-white"}`,children:"English"})]})]})]}),e.jsx("section",{className:"space-y-4 pt-4",children:e.jsxs(o,{onClick:()=>{console.log("Logout clicked"),p()},variant:"ghost",className:"w-full text-red-500 hover:text-red-400 hover:bg-red-500/10 justify-start gap-3 p-4 h-auto",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold",children:"Logout"}),e.jsx("p",{className:"text-[10px] opacity-70",children:"Sign out of your account on this device"})]})]})})]})]})}export{ee as Settings};
