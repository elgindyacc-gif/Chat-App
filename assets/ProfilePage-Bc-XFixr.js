import{c as q,r as a,j as e,L as v,m as F,A as J,B as b,g as $,U as D,I as w,t as y,s as T}from"./index-D7he1i6_.js";import{A as K,b as O,a as Q}from"./avatar-CAwhaa4I.js";import{C as W}from"./camera-UNTNi5zO.js";import{C as U,M as X}from"./mail-WtZP63Xc.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],j=q("pen",Z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],k=q("save",P);function ae({user:s,onBack:C,onUpdate:S,isPublicView:i,language:t,t:l,onStartChat:E}){var G;const[n,I]=a.useState((s==null?void 0:s.name)||""),[o,A]=a.useState((s==null?void 0:s.birth_year)||""),[c,_]=a.useState((s==null?void 0:s.gender)||""),[d,Y]=a.useState((s==null?void 0:s.about)||(i?t==="ar"?"لا توجد نبذة":"No bio provided":t==="ar"?"مرحباً! أنا أستخدم تطبيق الدردشة.":"Hey there! I am using Chat App.")),[x,M]=a.useState(!1),[m,z]=a.useState(!1),[h,L]=a.useState(!1),[p,R]=a.useState(!1),[B,H]=a.useState(!1),u=a.useRef(null),N=a.useRef(null),g=a.useRef(null);if(a.useEffect(()=>{s&&(I(s.name||""),A(s.birth_year||""),_(s.gender||""),Y(s.about||(i?t==="ar"?"لا توجد نبذة":"No bio provided":t==="ar"?"مرحباً! أنا أستخدم تطبيق الدردشة.":"Hey there! I am using Chat App.")))},[s,i,t]),a.useEffect(()=>{m&&u.current&&u.current.focus()},[m]),a.useEffect(()=>{h&&N.current&&N.current.focus()},[h]),a.useEffect(()=>{p&&g.current&&g.current.focus()},[p]),!s)return e.jsxs("div",{className:"flex flex-col h-full bg-slate-950 items-center justify-center p-8 text-center space-y-4",children:[e.jsx(v,{className:"w-12 h-12 text-indigo-500 animate-spin"}),e.jsx("p",{className:"text-slate-400 font-medium",children:t==="ar"?"جاري تحميل الملف الشخصي...":"Loading profile..."}),e.jsx("button",{onClick:C,className:"text-indigo-400 hover:underline",children:t==="ar"?"رجوع":"Go Back"})]});const f=async()=>{if(!n.trim())return y.error(t==="ar"?"الاسم لا يمكن أن يكون فارغاً":"Name cannot be empty");M(!0);try{const{error:r}=await T.from("profiles").update({name:n.trim(),about:d.trim(),birth_year:o?parseInt(o.toString()):null,gender:c||null}).eq("id",s.id);if(r)throw r;y.success(l("profileUpdatedSuccessfully")),S&&S({...s,name:n.trim(),about:d.trim(),birth_year:o?parseInt(o.toString()):null,gender:c||null}),z(!1),L(!1),R(!1),H(!1)}catch(r){console.error("Error updating profile:",r),y.error(t==="ar"?"فشل تحديث الملف الشخصي":"Failed to update profile")}finally{M(!1)}};return e.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"flex flex-col h-full bg-slate-950/50 backdrop-blur-3xl w-full relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900/10 via-slate-950 to-violet-900/10 pointer-events-none"}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-indigo-500/5 rounded-full blur-[100px] animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-violet-500/5 rounded-full blur-[100px] animate-pulse"}),e.jsx("div",{className:"absolute inset-0 premium-doodle opacity-10 pointer-events-none"}),e.jsxs("div",{className:"relative z-10 px-4 py-4 flex items-center gap-4 bg-slate-950/80 backdrop-blur-md border-b border-white/5 sticky top-0",children:[e.jsx("button",{onClick:C,className:"p-2 -ml-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-colors group",children:e.jsx(J,{className:`w-6 h-6 group-hover:-translate-x-1 transition-transform ${t==="ar"?"rotate-180":""}`})}),e.jsx("h2",{className:`text-white text-xl font-bold ${t==="ar"?"font-arabic":""}`,children:l(i?"partnerProfile":"profile")})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar relative z-10 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center mb-8",children:[e.jsxs("div",{className:`relative group ${i?"":"cursor-pointer"}`,children:[e.jsxs(K,{className:"w-40 h-40 border-4 border-slate-900 shadow-2xl group-hover:border-indigo-500/50 transition-colors duration-500",children:[e.jsx(O,{src:s==null?void 0:s.avatar_url,className:"object-cover"}),e.jsx(Q,{className:"bg-slate-800 text-4xl font-bold text-indigo-400",children:(G=s==null?void 0:s.name)==null?void 0:G.charAt(0).toUpperCase()})]}),!i&&e.jsxs("div",{className:"absolute inset-0 bg-black/40 rounded-full flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 backdrop-blur-sm",children:[e.jsx(W,{className:"w-8 h-8 text-white mb-2"}),e.jsx("span",{className:"text-xs text-white font-medium",children:t==="ar"?"تغيير الصورة":"Change Photo"})]})]}),i&&E&&e.jsxs(b,{onClick:E,className:"bg-indigo-600 hover:bg-indigo-500 text-white rounded-full px-8 shadow-lg shadow-indigo-500/20 mt-6",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),t==="ar"?"إرسال رسالة":"Send Message"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-900/40 border border-white/5 rounded-2xl p-4 md:p-6 hover:bg-slate-900/60 transition-colors group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-400 text-xs font-bold uppercase tracking-wider",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:l("name")})]}),!m&&!i&&e.jsx("button",{onClick:()=>z(!0),className:"p-2 text-slate-500 hover:text-indigo-400 transition-colors",children:e.jsx(j,{className:"w-4 h-4"})})]}),m?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(w,{ref:u,value:n,onChange:r=>I(r.target.value),className:"bg-slate-950/50 border-white/10 text-lg font-medium text-white focus:ring-indigo-500/50 focus:border-indigo-500/50",placeholder:t==="ar"?"أدخل اسمك":"Enter your name"}),e.jsx(b,{size:"icon",onClick:f,disabled:x,className:"bg-indigo-600 hover:bg-indigo-500",children:x?e.jsx(v,{className:"w-4 h-4 animate-spin"}):e.jsx(k,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-white text-lg font-medium pl-1",children:n})]}),e.jsxs("div",{className:"bg-slate-900/40 border border-white/5 rounded-2xl p-4 md:p-6 hover:bg-slate-900/60 transition-colors group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs font-bold uppercase tracking-wider group-hover:text-indigo-400 transition-colors",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:l("about")})]}),!h&&!i&&e.jsx("button",{onClick:()=>L(!0),className:"p-2 text-slate-500 hover:text-indigo-400 transition-colors",children:e.jsx(j,{className:"w-4 h-4"})})]}),h?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(w,{ref:N,value:d,onChange:r=>Y(r.target.value),className:"bg-slate-950/50 border-white/10 text-base text-white focus:ring-indigo-500/50 focus:border-indigo-500/50",placeholder:t==="ar"?"أضف نبذة":"Add a bio"}),e.jsx(b,{size:"icon",onClick:f,disabled:x,className:"bg-indigo-600 hover:bg-indigo-500",children:x?e.jsx(v,{className:"w-4 h-4 animate-spin"}):e.jsx(k,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-slate-300 text-base pl-1",children:d})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/40 border border-white/5 rounded-2xl p-4 hover:bg-slate-900/60 transition-colors group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs font-bold uppercase tracking-wider group-hover:text-indigo-400 transition-colors",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:l("birth_year")})]}),!p&&!i&&e.jsx("button",{onClick:()=>R(!0),className:"p-1 text-slate-500 hover:text-indigo-400",children:e.jsx(j,{className:"w-3 h-3"})})]}),p?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{ref:g,type:"number",value:o,onChange:r=>A(r.target.value),className:"bg-slate-950/50 border-white/10 text-sm text-white h-8",placeholder:"YYYY"}),e.jsx(b,{size:"icon",onClick:f,className:"h-8 w-8 bg-indigo-600",children:e.jsx(k,{className:"w-3 h-3"})})]}):e.jsx("p",{className:"text-white text-base pl-1",children:o||(t==="ar"?"لم يحدد":"Not specified")})]}),e.jsxs("div",{className:"bg-slate-900/40 border border-white/5 rounded-2xl p-4 hover:bg-slate-900/60 transition-colors group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs font-bold uppercase tracking-wider group-hover:text-indigo-400 transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:l("gender")})]}),!B&&!i&&e.jsx("button",{onClick:()=>H(!0),className:"p-1 text-slate-500 hover:text-indigo-400",children:e.jsx(j,{className:"w-3 h-3"})})]}),B?e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:c,onChange:r=>{_(r.target.value),setTimeout(()=>f(),100)},className:"bg-slate-950 text-white text-sm border-white/10 rounded-md p-1 flex-1 outline-none ring-1 ring-white/10",children:[e.jsx("option",{value:"",children:t==="ar"?"اختار":"Select"}),e.jsx("option",{value:"male",children:l("male")}),e.jsx("option",{value:"female",children:l("female")})]})}):e.jsx("p",{className:"text-white text-base pl-1",children:c==="male"?l("male"):c==="female"?l("female"):t==="ar"?"لم يحدد":"Not specified"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/20 border border-white/5 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-xs font-bold uppercase tracking-wider mb-2",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:t==="ar"?"البريد الإلكتروني":"Email"})]}),e.jsx("p",{className:"text-slate-300 font-mono text-sm truncate",children:s.email||"Hidden"})]}),e.jsxs("div",{className:"bg-slate-900/20 border border-white/5 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-xs font-bold uppercase tracking-wider mb-2",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:t==="ar"?"انضم في":"Joined"})]}),e.jsx("p",{className:"text-slate-300 text-sm",children:new Date(s.created_at||Date.now()).toLocaleDateString()})]})]})]})]})})]})}export{ae as ProfilePage};
