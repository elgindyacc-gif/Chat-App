import{c as w,r as h,j as e,m as i,g as G,t as $,I as E,a as U,M as H,S as R}from"./index-D7he1i6_.js";import{A as g,b,a as j}from"./avatar-CAwhaa4I.js";import{c}from"./utils-Bz25wyST.js";import{StatusCircle as v}from"./StatusCircle-DWO7fT1w.js";import{U as N}from"./users-CWNW1A_V.js";import{S as B}from"./search-BeOaeq5H.js";import{B as Q}from"./bell-C6o2Pif4.js";import{C as F}from"./check-BpMlry6P.js";import{X as O}from"./x-JNGtBUds.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Y=w("copy",X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],K=w("settings",J);function V({chats:x,currentUser:n,onlineUsers:y,onSelectChat:C,onNewChat:k,onCreateGroup:M,onLogout:W,onAcceptRequest:I,onRejectRequest:S,pendingRequests:u,typingUsers:_,onSettings:L,onPinChat:T,statuses:A=[],onViewStatus:p,onAddStatus:P,language:a,t:d}){const[m,z]=h.useState(""),f=h.useMemo(()=>x.filter(t=>t.partnerName.toLowerCase().includes(m.toLowerCase())||t.lastMessage.toLowerCase().includes(m.toLowerCase())).sort((t,s)=>t.isPinned&&!s.isPinned?-1:!t.isPinned&&s.isPinned?1:new Date(s.lastMessageTime).getTime()-new Date(t.lastMessageTime).getTime()),[x,m]),D=t=>{if(!t)return"";const s=new Date(t),o=new Date().getTime()-s.getTime(),l=Math.floor(o/(1e3*60*60*24));return l===0?s.toLocaleTimeString(a==="ar"?"ar-EG":"en-US",{hour:"2-digit",minute:"2-digit"}):l===1?a==="ar"?"Ø£Ù…Ø³":"Yesterday":l<7?s.toLocaleDateString(a==="ar"?"ar-EG":"en-US",{weekday:"short"}):s.toLocaleDateString(a==="ar"?"ar-EG":"en-US",{month:"short",day:"numeric"})};return e.jsxs("div",{className:"flex flex-col h-full bg-slate-950/95 backdrop-blur-md border-r border-white/5 w-full relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-40 bg-gradient-to-b from-indigo-500/10 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 premium-doodle opacity-10 pointer-events-none"}),e.jsxs("div",{className:"p-4 relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs(i.h1,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:`text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400 flex items-center gap-2 ${a==="ar"?"font-arabic":""}`,children:[d("chats")," ",e.jsx("span",{className:"text-xs bg-indigo-500/20 text-indigo-300 px-2 py-0.5 rounded-full border border-indigo-500/30",children:x.length})]}),e.jsx("div",{className:"flex items-center gap-2",children:[{icon:N,onClick:M,title:d("createGroup")},{icon:G,onClick:k,title:d("newChat")},{icon:K,onClick:L,title:d("settings")}].map((t,s)=>e.jsx(i.button,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:s*.1},whileHover:{scale:1.1,backgroundColor:"rgba(255, 255, 255, 0.1)"},whileTap:{scale:.9},onClick:t.onClick,title:t.title,className:c("p-2 rounded-full transition-colors text-slate-400 hover:text-white"),children:e.jsx(t.icon,{className:"w-5 h-5"})},s))})]}),e.jsxs(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"flex items-center gap-4 mb-6 p-3 bg-white/5 rounded-2xl border border-white/5 hover:border-indigo-500/30 transition-colors group",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(g,{className:"w-12 h-12 border-2 border-indigo-500/20 group-hover:border-indigo-500 transition-colors",children:[e.jsx(b,{src:n.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(n.name)}&background=6366f1&color=fff`}),e.jsx(j,{className:"bg-indigo-600 text-white",children:n.name.charAt(0).toUpperCase()})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-emerald-500 border-2 border-slate-900 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-bold truncate text-base",children:n.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-indigo-400 text-xs font-medium truncate bg-indigo-500/10 px-2 py-0.5 rounded-md",children:["@",n.username]}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`@${n.username}`),$.success(a==="ar"?"ØªÙ… Ù†Ø³Ø® Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…!":"Username copied!")},className:"text-slate-500 hover:text-white transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(Y,{className:"w-3 h-3"})})]})]})]}),e.jsxs("div",{className:"flex gap-4 overflow-x-auto py-2 no-scrollbar mb-4 relative z-10",children:[e.jsxs(i.div,{whileHover:{scale:1.05},className:"flex flex-col items-center gap-1 min-w-[64px] group",onClick:P,children:[e.jsx(v,{user:{id:n.id,name:n.name,avatar_url:n.avatar_url},hasStatus:!1,isAllSeen:!1,statusCount:0,size:"md"}),e.jsx("span",{className:"text-[10px] text-slate-500 font-medium",children:a==="ar"?"Ø­Ø§Ù„ØªÙÙŠ":"My Status"})]}),Object.entries(A.reduce((t,s)=>{const r=s.user_id;return t[r]||(t[r]=[]),t[r].push(s),t},{})).map(([t,s])=>{var r,o,l;return e.jsxs(i.div,{whileHover:{scale:1.05},className:"flex flex-col items-center gap-1 min-w-[64px] cursor-pointer",onClick:()=>p==null?void 0:p(s,0),children:[e.jsx(v,{user:{id:t,name:((r=s[0].profiles)==null?void 0:r.name)||"User",avatar_url:(o=s[0].profiles)==null?void 0:o.avatar_url},hasStatus:!0,isAllSeen:!1,statusCount:s.length,size:"md"}),e.jsx("span",{className:"text-[10px] text-slate-300 font-medium truncate w-14 text-center",children:((l=s[0].profiles)==null?void 0:l.name)||"User"})]},t)})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(B,{className:"w-4 h-4 text-slate-500 group-focus-within:text-indigo-400 transition-colors"})}),e.jsx(E,{type:"text",placeholder:d("search"),value:m,onChange:t=>z(t.target.value),className:"pl-10 bg-slate-900/50 border-white/5 focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 rounded-xl text-white placeholder:text-slate-500 h-10 transition-all font-light"})]})]}),e.jsx(U,{children:u.length>0&&e.jsx(i.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4",children:e.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/20 to-violet-900/20 border border-indigo-500/20 rounded-xl p-3 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-400 text-xs font-bold uppercase tracking-wider mb-2",children:[e.jsx(Q,{className:"w-3 h-3 animate-bounce"}),e.jsx("span",{className:a==="ar"?"font-arabic":"",children:a==="ar"?"Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©":"New Requests"})]}),e.jsx("div",{className:"space-y-2",children:u.map(t=>{var s;return e.jsxs("div",{className:"flex items-center justify-between gap-2 bg-slate-900/50 p-2 rounded-lg",children:[e.jsx("span",{className:"text-white text-sm font-medium truncate",children:e.jsxs("span",{className:"text-indigo-400",children:["@",(s=t.profiles)==null?void 0:s.username]})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>I(t.id,t.sender_id),className:"p-1.5 bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500 hover:text-white rounded-md transition-colors",children:e.jsx(F,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>S(t.id),className:"p-1.5 bg-red-500/20 text-red-400 hover:bg-red-500 hover:text-white rounded-md transition-colors",children:e.jsx(O,{className:"w-3 h-3"})})]})]},t.id)})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-2 space-y-1",children:f.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-slate-500 text-center p-4",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-900 rounded-full flex items-center justify-center mb-4",children:e.jsx(H,{className:"w-8 h-8 opacity-20"})}),e.jsx("p",{className:`font-medium text-slate-400 ${a==="ar"?"font-arabic":""}`,children:d("no_chats")}),e.jsx("p",{className:"text-xs mt-1 text-slate-600",children:a==="ar"?"Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø³ØªÙƒØ´Ø§Ù Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ØµØ¯Ù‚Ø§Ø¡ Ø¬Ø¯Ø¯.":"Start exploring to find new friends."})]}):f.map((t,s)=>{var r,o;return e.jsxs(i.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:s*.05},onClick:()=>C(t.partnerId,t.partnerName),className:"group relative flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 cursor-pointer transition-all border border-transparent hover:border-white/5 active:scale-[0.98]",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(g,{className:"w-12 h-12 border border-white/10 group-hover:border-indigo-500/50 transition-colors",children:[e.jsx(b,{src:t.partnerAvatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.partnerName)}&background=random&color=fff`}),e.jsx(j,{className:"bg-slate-800 text-slate-300",children:t.partnerName.charAt(0).toUpperCase()})]}),!t.isGroup&&y.has(t.partnerId)&&e.jsx("span",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-emerald-500 border-2 border-slate-950 rounded-full ring-2 ring-slate-950 animate-pulse"}),t.isGroup&&e.jsx("span",{className:"absolute -bottom-1 -right-1 bg-slate-800 p-1 rounded-full border border-slate-700",children:e.jsx(N,{className:"w-3 h-3 text-indigo-400"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[e.jsx("h3",{className:c("font-semibold truncate transition-colors text-base",t.unreadCount>0?"text-white":"text-slate-300 group-hover:text-white"),children:t.partnerName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),T(t.id,!t.isPinned)},className:c("p-1 rounded-md transition-all",t.isPinned?"text-indigo-400 opacity-100":"text-slate-600 opacity-0 group-hover:opacity-100 hover:text-white hover:bg-white/10"),children:e.jsx(R,{className:c("w-3.5 h-3.5",t.isPinned&&"fill-indigo-400")})}),e.jsx("span",{className:c("text-[10px] flex-shrink-0 font-medium",t.unreadCount>0?"text-indigo-400":"text-slate-500"),children:D(t.lastMessageTime)})]})]}),e.jsxs("div",{className:"flex justify-between items-center h-5",children:[e.jsx("div",{className:"flex-1 min-w-0 pr-2",children:_[t.partnerId]?e.jsxs("p",{className:"text-indigo-400 text-xs font-bold flex items-center gap-1",children:[a==="ar"?"ÙŠÙƒØªØ¨ Ø§Ù„Ø¢Ù†":"typing",e.jsxs("span",{className:"flex gap-0.5 pt-1",children:[e.jsx(i.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:0},className:"w-1 h-1 bg-indigo-400 rounded-full"}),e.jsx(i.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:.2},className:"w-1 h-1 bg-indigo-400 rounded-full"}),e.jsx(i.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:.4},className:"w-1 h-1 bg-indigo-400 rounded-full"})]})]}):e.jsx("p",{className:c("text-sm truncate",t.unreadCount>0?"text-slate-100 font-medium":"text-slate-500 group-hover:text-slate-400"),children:(r=t.lastMessage)!=null&&r.includes("Voice Message")||(o=t.lastMessage)!=null&&o.includes("Ø±Ø³Ø§Ù„Ø© ØµÙˆØªÙŠØ©")?"ðŸŽ¤":t.lastMessage||e.jsx("span",{className:"italic text-slate-600",children:a==="ar"?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„":"No messages yet"})})}),t.unreadCount>0&&e.jsx(i.div,{initial:{scale:0},animate:{scale:1},className:"bg-indigo-500 text-white text-[10px] font-bold rounded-full min-w-[20px] h-[20px] flex items-center justify-center px-1.5 shadow-lg shadow-indigo-500/40",children:t.unreadCount})]})]})]},t.id)})})]})}const le=h.memo(V);export{le as ChatList};
