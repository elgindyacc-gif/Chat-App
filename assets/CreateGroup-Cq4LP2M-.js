import{c as j,r as n,j as e,m as x,A as I,S as F,I as m,B as S,L as _,t as c,s as y}from"./index-D7he1i6_.js";import{c as i}from"./utils-Bz25wyST.js";import{C as q}from"./camera-UNTNi5zO.js";import{U as G}from"./users-CWNW1A_V.js";import{C as L}from"./check-BpMlry6P.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],D=j("align-left",B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],H=j("hash",E);function P({onBack:p,currentUserId:u,language:t,t:d}){const[o,N]=n.useState(""),[l,w]=n.useState(""),[h,C]=n.useState(""),[b,f]=n.useState(!1),[r,a]=n.useState(null),k=async()=>{if(!o.trim()||!l.trim()){c.error(t==="ar"?"يرجى ملء الحقول المطلوبة":"Please fill in required fields",{description:t==="ar"?"اسم المجموعة والمعرّف الفريد مطلوبان.":"Group Name and Unique ID are required."});return}f(!0);try{const{data:s,error:v}=await y.from("groups").insert({name:o.trim(),group_id:l.trim().toLowerCase(),description:h.trim(),created_by:u}).select().single();if(v)throw v;const{error:g}=await y.from("group_members").insert({group_id:s.id,user_id:u,role:"admin"});if(g)throw g;c.success(t==="ar"?"تم إنشاء المجموعة بنجاح!":"Group Created Successfully!",{description:t==="ar"?`مرحباً بك في ${o.trim()}`:`Welcome to ${o.trim()}`}),p()}catch(s){console.error("Error creating group:",s),s.code==="23505"?c.error(t==="ar"?"معرّف المجموعة مأخوذ بالفعل":"Group ID already taken",{description:t==="ar"?"يرجى اختيار معرّف فريد آخر.":"Please choose a different unique ID."}):c.error(t==="ar"?"فشل إنشاء المجموعة":"Failed to create group",{description:s.message||(t==="ar"?"يرجى المحاولة مرة أخرى لاحقاً.":"Please try again later.")})}finally{f(!1)}};return e.jsxs(x.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"flex flex-col h-full bg-slate-950 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900/10 via-slate-950 to-violet-900/10 pointer-events-none"}),e.jsx("div",{className:"absolute -top-32 -right-32 w-64 h-64 bg-indigo-500/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-32 -left-32 w-64 h-64 bg-violet-500/10 rounded-full blur-3xl animate-pulse"}),e.jsxs("div",{className:"relative z-10 px-4 py-4 flex items-center gap-4 bg-slate-950/80 backdrop-blur-md border-b border-white/5 sticky top-0",children:[e.jsx("button",{onClick:p,className:"p-2 -ml-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-colors group",children:e.jsx(I,{className:`w-6 h-6 group-hover:-translate-x-1 transition-transform ${t==="ar"?"rotate-180":""}`})}),e.jsxs("div",{children:[e.jsxs("h2",{className:`text-white text-xl font-bold flex items-center gap-2 ${t==="ar"?"font-arabic":""}`,children:[d("createGroup"),e.jsx(F,{className:"w-4 h-4 text-indigo-400"})]}),e.jsx("p",{className:"text-slate-500 text-xs",children:t==="ar"?"اجمع الناس معاً":"Bring people together"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar relative z-10",children:e.jsxs("div",{className:"max-w-md mx-auto px-6 py-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs(x.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-32 h-32 bg-gradient-to-tr from-slate-800 to-slate-700 rounded-full flex items-center justify-center cursor-pointer relative group border-4 border-slate-950 shadow-2xl",children:[e.jsx(q,{className:"w-10 h-10 text-slate-400 group-hover:text-white transition-colors"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-white text-xs font-medium",children:t==="ar"?"تغيير الأيقونة":"Change Icon"})}),e.jsx("div",{className:"absolute -inset-1 rounded-full border border-indigo-500/30 opacity-0 group-hover:opacity-100 transition-opacity scale-110"})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:t==="ar"?"اضغط لتعيين أيقونة المجموعة":"Tap to set group icon"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:i("text-sm font-medium transition-colors ml-1",r==="name"?"text-indigo-400":"text-slate-400",t==="ar"?"font-arabic":""),children:[d("name")," ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:i("absolute inset-0 bg-gradient-to-r from-indigo-500/20 to-violet-500/20 rounded-xl blur transition-opacity duration-300",r==="name"?"opacity-100":"opacity-0")}),e.jsxs("div",{className:"relative bg-slate-900/80 border border-white/10 rounded-xl flex items-center px-4 transition-colors group-hover:border-white/20 focus-within:border-indigo-500/50",children:[e.jsx(G,{className:i("w-5 h-5 transition-colors",r==="name"?"text-indigo-400":"text-slate-500")}),e.jsx(m,{type:"text",placeholder:t==="ar"?"مثلاً: رحلة عطلة نهاية الأسبوع":"e.g. Weekend Trip Squad",value:o,onChange:s=>N(s.target.value),onFocus:()=>a("name"),onBlur:()=>a(null),className:"bg-transparent border-none text-white placeholder:text-slate-600 h-14 focus-visible:ring-0 focus-visible:ring-offset-0"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:i("text-sm font-medium transition-colors ml-1",r==="id"?"text-indigo-400":"text-slate-400",t==="ar"?"font-arabic":""),children:[t==="ar"?"المعرّف الفريد":"Unique ID"," ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:i("absolute inset-0 bg-gradient-to-r from-indigo-500/20 to-violet-500/20 rounded-xl blur transition-opacity duration-300",r==="id"?"opacity-100":"opacity-0")}),e.jsxs("div",{className:"relative bg-slate-900/80 border border-white/10 rounded-xl flex items-center px-4 transition-colors group-hover:border-white/20 focus-within:border-indigo-500/50",children:[e.jsx(H,{className:i("w-5 h-5 transition-colors",r==="id"?"text-indigo-400":"text-slate-500")}),e.jsx(m,{type:"text",placeholder:t==="ar"?"معرّف-مجموعة-فريد":"unique-group-handle",value:l,onChange:s=>w(s.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")),onFocus:()=>a("id"),onBlur:()=>a(null),className:"bg-transparent border-none text-white placeholder:text-slate-600 h-14 focus-visible:ring-0 focus-visible:ring-offset-0"})]})]}),e.jsxs("p",{className:"text-xs text-slate-500 ml-1",children:[t==="ar"?"يمكن للمستخدمين الانضمام عبر":"Users can join via"," ",e.jsxs("span",{className:"font-mono text-indigo-400 bg-indigo-500/10 px-1 rounded",children:["#",l||(t==="ar"?"المعرّف":"handle")]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:i("text-sm font-medium transition-colors ml-1",r==="desc"?"text-indigo-400":"text-slate-400",t==="ar"?"font-arabic":""),children:d("about")}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:i("absolute inset-0 bg-gradient-to-r from-indigo-500/20 to-violet-500/20 rounded-xl blur transition-opacity duration-300",r==="desc"?"opacity-100":"opacity-0")}),e.jsxs("div",{className:"relative bg-slate-900/80 border border-white/10 rounded-xl flex items-center px-4 transition-colors group-hover:border-white/20 focus-within:border-indigo-500/50",children:[e.jsx(D,{className:i("w-5 h-5 transition-colors",r==="desc"?"text-indigo-400":"text-slate-500")}),e.jsx(m,{type:"text",placeholder:t==="ar"?"عن ماذا تدور هذه المجموعة؟":"What's this group about?",value:h,onChange:s=>C(s.target.value),onFocus:()=>a("desc"),onBlur:()=>a(null),className:"bg-transparent border-none text-white placeholder:text-slate-600 h-14 focus-visible:ring-0 focus-visible:ring-offset-0"})]})]})]})]}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(S,{onClick:k,disabled:b||!o.trim()||!l.trim(),className:"w-full bg-gradient-to-r from-indigo-600 to-violet-600 hover:from-indigo-500 hover:to-violet-500 text-white h-14 text-lg font-semibold rounded-xl shadow-lg shadow-indigo-500/25 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:b?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-5 h-5 mr-2 animate-spin"}),t==="ar"?"جاري إنشاء المجموعة...":"Creating Group..."]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-5 h-5 mr-2"}),t==="ar"?"إنشاء المجموعة":"Create Group"]})})})]})})]})}export{P as CreateGroup};
