(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();function Ay(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dl={exports:{}},Ys={},$l={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh;function Oy(){if(zh)return Ee;zh=1;var n=Symbol.for("react.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function b(S){return S===null||typeof S!="object"?null:(S=_&&S[_]||S["@@iterator"],typeof S=="function"?S:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,E={};function R(S,P,ae){this.props=S,this.context=P,this.refs=E,this.updater=ae||C}R.prototype.isReactComponent={},R.prototype.setState=function(S,P){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,P,"setState")},R.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function D(){}D.prototype=R.prototype;function L(S,P,ae){this.props=S,this.context=P,this.refs=E,this.updater=ae||C}var $=L.prototype=new D;$.constructor=L,N($,R.prototype),$.isPureReactComponent=!0;var q=Array.isArray,de=Object.prototype.hasOwnProperty,Z={current:null},ge={key:!0,ref:!0,__self:!0,__source:!0};function Q(S,P,ae){var ee,z={},G=null,K=null;if(P!=null)for(ee in P.ref!==void 0&&(K=P.ref),P.key!==void 0&&(G=""+P.key),P)de.call(P,ee)&&!ge.hasOwnProperty(ee)&&(z[ee]=P[ee]);var ue=arguments.length-2;if(ue===1)z.children=ae;else if(1<ue){for(var xe=Array(ue),V=0;V<ue;V++)xe[V]=arguments[V+2];z.children=xe}if(S&&S.defaultProps)for(ee in ue=S.defaultProps,ue)z[ee]===void 0&&(z[ee]=ue[ee]);return{$$typeof:n,type:S,key:G,ref:K,props:z,_owner:Z.current}}function Ne(S,P){return{$$typeof:n,type:S.type,key:P,ref:S.ref,props:S.props,_owner:S._owner}}function et(S){return typeof S=="object"&&S!==null&&S.$$typeof===n}function gt(S){var P={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(ae){return P[ae]})}var Pe=/\/+/g;function Ae(S,P){return typeof S=="object"&&S!==null&&S.key!=null?gt(""+S.key):P.toString(36)}function Qe(S,P,ae,ee,z){var G=typeof S;(G==="undefined"||G==="boolean")&&(S=null);var K=!1;if(S===null)K=!0;else switch(G){case"string":case"number":K=!0;break;case"object":switch(S.$$typeof){case n:case t:K=!0}}if(K)return K=S,z=z(K),S=ee===""?"."+Ae(K,0):ee,q(z)?(ae="",S!=null&&(ae=S.replace(Pe,"$&/")+"/"),Qe(z,P,ae,"",function(V){return V})):z!=null&&(et(z)&&(z=Ne(z,ae+(!z.key||K&&K.key===z.key?"":(""+z.key).replace(Pe,"$&/")+"/")+S)),P.push(z)),1;if(K=0,ee=ee===""?".":ee+":",q(S))for(var ue=0;ue<S.length;ue++){G=S[ue];var xe=ee+Ae(G,ue);K+=Qe(G,P,ae,xe,z)}else if(xe=b(S),typeof xe=="function")for(S=xe.call(S),ue=0;!(G=S.next()).done;)G=G.value,xe=ee+Ae(G,ue++),K+=Qe(G,P,ae,xe,z);else if(G==="object")throw P=String(S),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return K}function Ve(S,P,ae){if(S==null)return S;var ee=[],z=0;return Qe(S,ee,"","",function(G){return P.call(ae,G,z++)}),ee}function Re(S){if(S._status===-1){var P=S._result;P=P(),P.then(function(ae){(S._status===0||S._status===-1)&&(S._status=1,S._result=ae)},function(ae){(S._status===0||S._status===-1)&&(S._status=2,S._result=ae)}),S._status===-1&&(S._status=0,S._result=P)}if(S._status===1)return S._result.default;throw S._result}var Ce={current:null},O={transition:null},oe={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:O,ReactCurrentOwner:Z};function J(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:Ve,forEach:function(S,P,ae){Ve(S,function(){P.apply(this,arguments)},ae)},count:function(S){var P=0;return Ve(S,function(){P++}),P},toArray:function(S){return Ve(S,function(P){return P})||[]},only:function(S){if(!et(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},Ee.Component=R,Ee.Fragment=s,Ee.Profiler=a,Ee.PureComponent=L,Ee.StrictMode=o,Ee.Suspense=p,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Ee.act=J,Ee.cloneElement=function(S,P,ae){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var ee=N({},S.props),z=S.key,G=S.ref,K=S._owner;if(P!=null){if(P.ref!==void 0&&(G=P.ref,K=Z.current),P.key!==void 0&&(z=""+P.key),S.type&&S.type.defaultProps)var ue=S.type.defaultProps;for(xe in P)de.call(P,xe)&&!ge.hasOwnProperty(xe)&&(ee[xe]=P[xe]===void 0&&ue!==void 0?ue[xe]:P[xe])}var xe=arguments.length-2;if(xe===1)ee.children=ae;else if(1<xe){ue=Array(xe);for(var V=0;V<xe;V++)ue[V]=arguments[V+2];ee.children=ue}return{$$typeof:n,type:S.type,key:z,ref:G,props:ee,_owner:K}},Ee.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:c,_context:S},S.Consumer=S},Ee.createElement=Q,Ee.createFactory=function(S){var P=Q.bind(null,S);return P.type=S,P},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(S){return{$$typeof:f,render:S}},Ee.isValidElement=et,Ee.lazy=function(S){return{$$typeof:w,_payload:{_status:-1,_result:S},_init:Re}},Ee.memo=function(S,P){return{$$typeof:g,type:S,compare:P===void 0?null:P}},Ee.startTransition=function(S){var P=O.transition;O.transition={};try{S()}finally{O.transition=P}},Ee.unstable_act=J,Ee.useCallback=function(S,P){return Ce.current.useCallback(S,P)},Ee.useContext=function(S){return Ce.current.useContext(S)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(S){return Ce.current.useDeferredValue(S)},Ee.useEffect=function(S,P){return Ce.current.useEffect(S,P)},Ee.useId=function(){return Ce.current.useId()},Ee.useImperativeHandle=function(S,P,ae){return Ce.current.useImperativeHandle(S,P,ae)},Ee.useInsertionEffect=function(S,P){return Ce.current.useInsertionEffect(S,P)},Ee.useLayoutEffect=function(S,P){return Ce.current.useLayoutEffect(S,P)},Ee.useMemo=function(S,P){return Ce.current.useMemo(S,P)},Ee.useReducer=function(S,P,ae){return Ce.current.useReducer(S,P,ae)},Ee.useRef=function(S){return Ce.current.useRef(S)},Ee.useState=function(S){return Ce.current.useState(S)},Ee.useSyncExternalStore=function(S,P,ae){return Ce.current.useSyncExternalStore(S,P,ae)},Ee.useTransition=function(){return Ce.current.useTransition()},Ee.version="18.3.1",Ee}var Bh;function Ac(){return Bh||(Bh=1,$l.exports=Oy()),$l.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function Py(){if(Fh)return Ys;Fh=1;var n=Ac(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(f,p,g){var w,_={},b=null,C=null;g!==void 0&&(b=""+g),p.key!==void 0&&(b=""+p.key),p.ref!==void 0&&(C=p.ref);for(w in p)o.call(p,w)&&!c.hasOwnProperty(w)&&(_[w]=p[w]);if(f&&f.defaultProps)for(w in p=f.defaultProps,p)_[w]===void 0&&(_[w]=p[w]);return{$$typeof:t,type:f,key:b,ref:C,props:_,_owner:a.current}}return Ys.Fragment=s,Ys.jsx=d,Ys.jsxs=d,Ys}var Vh;function Dy(){return Vh||(Vh=1,Dl.exports=Py()),Dl.exports}var m=Dy(),So={},Ll={exports:{}},jt={},Ml={exports:{}},Ul={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wh;function $y(){return Wh||(Wh=1,(function(n){function t(O,oe){var J=O.length;O.push(oe);e:for(;0<J;){var S=J-1>>>1,P=O[S];if(0<a(P,oe))O[S]=oe,O[J]=P,J=S;else break e}}function s(O){return O.length===0?null:O[0]}function o(O){if(O.length===0)return null;var oe=O[0],J=O.pop();if(J!==oe){O[0]=J;e:for(var S=0,P=O.length,ae=P>>>1;S<ae;){var ee=2*(S+1)-1,z=O[ee],G=ee+1,K=O[G];if(0>a(z,J))G<P&&0>a(K,z)?(O[S]=K,O[G]=J,S=G):(O[S]=z,O[ee]=J,S=ee);else if(G<P&&0>a(K,J))O[S]=K,O[G]=J,S=G;else break e}}return oe}function a(O,oe){var J=O.sortIndex-oe.sortIndex;return J!==0?J:O.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();n.unstable_now=function(){return d.now()-f}}var p=[],g=[],w=1,_=null,b=3,C=!1,N=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(O){for(var oe=s(g);oe!==null;){if(oe.callback===null)o(g);else if(oe.startTime<=O)o(g),oe.sortIndex=oe.expirationTime,t(p,oe);else break;oe=s(g)}}function q(O){if(E=!1,$(O),!N)if(s(p)!==null)N=!0,Re(de);else{var oe=s(g);oe!==null&&Ce(q,oe.startTime-O)}}function de(O,oe){N=!1,E&&(E=!1,D(Q),Q=-1),C=!0;var J=b;try{for($(oe),_=s(p);_!==null&&(!(_.expirationTime>oe)||O&&!gt());){var S=_.callback;if(typeof S=="function"){_.callback=null,b=_.priorityLevel;var P=S(_.expirationTime<=oe);oe=n.unstable_now(),typeof P=="function"?_.callback=P:_===s(p)&&o(p),$(oe)}else o(p);_=s(p)}if(_!==null)var ae=!0;else{var ee=s(g);ee!==null&&Ce(q,ee.startTime-oe),ae=!1}return ae}finally{_=null,b=J,C=!1}}var Z=!1,ge=null,Q=-1,Ne=5,et=-1;function gt(){return!(n.unstable_now()-et<Ne)}function Pe(){if(ge!==null){var O=n.unstable_now();et=O;var oe=!0;try{oe=ge(!0,O)}finally{oe?Ae():(Z=!1,ge=null)}}else Z=!1}var Ae;if(typeof L=="function")Ae=function(){L(Pe)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,Ve=Qe.port2;Qe.port1.onmessage=Pe,Ae=function(){Ve.postMessage(null)}}else Ae=function(){R(Pe,0)};function Re(O){ge=O,Z||(Z=!0,Ae())}function Ce(O,oe){Q=R(function(){O(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){N||C||(N=!0,Re(de))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return s(p)},n.unstable_next=function(O){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var J=b;b=oe;try{return O()}finally{b=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,oe){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var J=b;b=O;try{return oe()}finally{b=J}},n.unstable_scheduleCallback=function(O,oe,J){var S=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?S+J:S):J=S,O){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=J+P,O={id:w++,callback:oe,priorityLevel:O,startTime:J,expirationTime:P,sortIndex:-1},J>S?(O.sortIndex=J,t(g,O),s(p)===null&&O===s(g)&&(E?(D(Q),Q=-1):E=!0,Ce(q,J-S))):(O.sortIndex=P,t(p,O),N||C||(N=!0,Re(de))),O},n.unstable_shouldYield=gt,n.unstable_wrapCallback=function(O){var oe=b;return function(){var J=b;b=oe;try{return O.apply(this,arguments)}finally{b=J}}}})(Ul)),Ul}var qh;function Ly(){return qh||(qh=1,Ml.exports=$y()),Ml.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh;function My(){if(Hh)return jt;Hh=1;var n=Ac(),t=Ly();function s(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,r){d(e,r),d(e+"Capture",r)}function d(e,r){for(a[e]=r,e=0;e<r.length;e++)o.add(r[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function b(e){return p.call(_,e)?!0:p.call(w,e)?!1:g.test(e)?_[e]=!0:(w[e]=!0,!1)}function C(e,r,i,l){if(i!==null&&i.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function N(e,r,i,l){if(r===null||typeof r>"u"||C(e,r,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function E(e,r,i,l,u,h,y){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=l,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=e,this.type=r,this.sanitizeURL=h,this.removeEmptyString=y}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){R[e]=new E(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];R[r]=new E(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){R[e]=new E(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){R[e]=new E(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){R[e]=new E(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){R[e]=new E(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){R[e]=new E(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){R[e]=new E(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){R[e]=new E(e,5,!1,e.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function L(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(D,L);R[r]=new E(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(D,L);R[r]=new E(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(D,L);R[r]=new E(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){R[e]=new E(e,1,!1,e.toLowerCase(),null,!1,!1)}),R.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){R[e]=new E(e,1,!1,e.toLowerCase(),null,!0,!0)});function $(e,r,i,l){var u=R.hasOwnProperty(r)?R[r]:null;(u!==null?u.type!==0:l||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(N(r,i,u,l)&&(i=null),l||u===null?b(r)&&(i===null?e.removeAttribute(r):e.setAttribute(r,""+i)):u.mustUseProperty?e[u.propertyName]=i===null?u.type===3?!1:"":i:(r=u.attributeName,l=u.attributeNamespace,i===null?e.removeAttribute(r):(u=u.type,i=u===3||u===4&&i===!0?"":""+i,l?e.setAttributeNS(l,r,i):e.setAttribute(r,i))))}var q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),Z=Symbol.for("react.portal"),ge=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),Ne=Symbol.for("react.profiler"),et=Symbol.for("react.provider"),gt=Symbol.for("react.context"),Pe=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),O=Symbol.iterator;function oe(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var J=Object.assign,S;function P(e){if(S===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);S=r&&r[1]||""}return`
`+S+e}var ae=!1;function ee(e,r){if(!e||ae)return"";ae=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(I){var l=I}Reflect.construct(e,[],r)}else{try{r.call()}catch(I){l=I}e.call(r.prototype)}else{try{throw Error()}catch(I){l=I}e()}}catch(I){if(I&&l&&typeof I.stack=="string"){for(var u=I.stack.split(`
`),h=l.stack.split(`
`),y=u.length-1,v=h.length-1;1<=y&&0<=v&&u[y]!==h[v];)v--;for(;1<=y&&0<=v;y--,v--)if(u[y]!==h[v]){if(y!==1||v!==1)do if(y--,v--,0>v||u[y]!==h[v]){var x=`
`+u[y].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=y&&0<=v);break}}}finally{ae=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?P(e):""}function z(e){switch(e.tag){case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return e=ee(e.type,!1),e;case 11:return e=ee(e.type.render,!1),e;case 1:return e=ee(e.type,!0),e;default:return""}}function G(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ge:return"Fragment";case Z:return"Portal";case Ne:return"Profiler";case Q:return"StrictMode";case Ae:return"Suspense";case Qe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gt:return(e.displayName||"Context")+".Consumer";case et:return(e._context.displayName||"Context")+".Provider";case Pe:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ve:return r=e.displayName||null,r!==null?r:G(e.type)||"Memo";case Re:r=e._payload,e=e._init;try{return G(e(r))}catch{}}return null}function K(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(r);case 8:return r===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function ue(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xe(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function V(e){var r=xe(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),l=""+e[r];if(!e.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,h=i.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return u.call(this)},set:function(y){l=""+y,h.call(this,y)}}),Object.defineProperty(e,r,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function H(e){e._valueTracker||(e._valueTracker=V(e))}function M(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var i=r.getValue(),l="";return e&&(l=xe(e)?e.checked?"true":"false":e.value),e=l,e!==i?(r.setValue(e),!0):!1}function Y(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fe(e,r){var i=r.checked;return J({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function he(e,r){var i=r.defaultValue==null?"":r.defaultValue,l=r.checked!=null?r.checked:r.defaultChecked;i=ue(r.value!=null?r.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ke(e,r){r=r.checked,r!=null&&$(e,"checked",r,!1)}function Te(e,r){ke(e,r);var i=ue(r.value),l=r.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?Ke(e,r.type,i):r.hasOwnProperty("defaultValue")&&Ke(e,r.type,ue(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function Se(e,r,i){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var l=r.type;if(!(l!=="submit"&&l!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,i||r===e.value||(e.value=r),e.defaultValue=r}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Ke(e,r,i){(r!=="number"||Y(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var dt=Array.isArray;function nt(e,r,i,l){if(e=e.options,r){r={};for(var u=0;u<i.length;u++)r["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=r.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&l&&(e[i].defaultSelected=!0)}else{for(i=""+ue(i),r=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}r!==null||e[u].disabled||(r=e[u])}r!==null&&(r.selected=!0)}}function Be(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(s(91));return J({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nr(e,r){var i=r.value;if(i==null){if(i=r.children,r=r.defaultValue,i!=null){if(r!=null)throw Error(s(92));if(dt(i)){if(1<i.length)throw Error(s(93));i=i[0]}r=i}r==null&&(r=""),i=r}e._wrapperState={initialValue:ue(i)}}function Mt(e,r){var i=ue(r.value),l=ue(r.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),r.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function Ut(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Sn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ho(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Sn(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mi,eu=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,i,l,u){MSApp.execUnsafeLocalFunction(function(){return e(r,i,l,u)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(mi=mi||document.createElement("div"),mi.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=mi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function hs(e,r){if(r){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=r;return}}e.textContent=r}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$m=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(e){$m.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),fs[r]=fs[e]})});function tu(e,r,i){return r==null||typeof r=="boolean"||r===""?"":i||typeof r!="number"||r===0||fs.hasOwnProperty(e)&&fs[e]?(""+r).trim():r+"px"}function ru(e,r){e=e.style;for(var i in r)if(r.hasOwnProperty(i)){var l=i.indexOf("--")===0,u=tu(i,r[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,u):e[i]=u}}var Lm=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ko(e,r){if(r){if(Lm[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(s(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(s(61))}if(r.style!=null&&typeof r.style!="object")throw Error(s(62))}}function Go(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=null;function Yo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qo=null,En=null,Cn=null;function nu(e){if(e=Ds(e)){if(typeof Qo!="function")throw Error(s(280));var r=e.stateNode;r&&(r=Mi(r),Qo(e.stateNode,e.type,r))}}function su(e){En?Cn?Cn.push(e):Cn=[e]:En=e}function iu(){if(En){var e=En,r=Cn;if(Cn=En=null,nu(e),r)for(e=0;e<r.length;e++)nu(r[e])}}function ou(e,r){return e(r)}function au(){}var Xo=!1;function lu(e,r,i){if(Xo)return e(r,i);Xo=!0;try{return ou(e,r,i)}finally{Xo=!1,(En!==null||Cn!==null)&&(au(),iu())}}function ps(e,r){var i=e.stateNode;if(i===null)return null;var l=Mi(i);if(l===null)return null;i=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,r,typeof i));return i}var Zo=!1;if(f)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){Zo=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{Zo=!1}function Mm(e,r,i,l,u,h,y,v,x){var I=Array.prototype.slice.call(arguments,3);try{r.apply(i,I)}catch(B){this.onError(B)}}var gs=!1,gi=null,yi=!1,ea=null,Um={onError:function(e){gs=!0,gi=e}};function zm(e,r,i,l,u,h,y,v,x){gs=!1,gi=null,Mm.apply(Um,arguments)}function Bm(e,r,i,l,u,h,y,v,x){if(zm.apply(this,arguments),gs){if(gs){var I=gi;gs=!1,gi=null}else throw Error(s(198));yi||(yi=!0,ea=I)}}function Yr(e){var r=e,i=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(i=r.return),e=r.return;while(e)}return r.tag===3?i:null}function cu(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function uu(e){if(Yr(e)!==e)throw Error(s(188))}function Fm(e){var r=e.alternate;if(!r){if(r=Yr(e),r===null)throw Error(s(188));return r!==e?null:e}for(var i=e,l=r;;){var u=i.return;if(u===null)break;var h=u.alternate;if(h===null){if(l=u.return,l!==null){i=l;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===i)return uu(u),e;if(h===l)return uu(u),r;h=h.sibling}throw Error(s(188))}if(i.return!==l.return)i=u,l=h;else{for(var y=!1,v=u.child;v;){if(v===i){y=!0,i=u,l=h;break}if(v===l){y=!0,l=u,i=h;break}v=v.sibling}if(!y){for(v=h.child;v;){if(v===i){y=!0,i=h,l=u;break}if(v===l){y=!0,l=h,i=u;break}v=v.sibling}if(!y)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:r}function du(e){return e=Fm(e),e!==null?hu(e):null}function hu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=hu(e);if(r!==null)return r;e=e.sibling}return null}var fu=t.unstable_scheduleCallback,pu=t.unstable_cancelCallback,Vm=t.unstable_shouldYield,Wm=t.unstable_requestPaint,Xe=t.unstable_now,qm=t.unstable_getCurrentPriorityLevel,ta=t.unstable_ImmediatePriority,mu=t.unstable_UserBlockingPriority,vi=t.unstable_NormalPriority,Hm=t.unstable_LowPriority,gu=t.unstable_IdlePriority,wi=null,sr=null;function Km(e){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(wi,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Ym,Gm=Math.log,Jm=Math.LN2;function Ym(e){return e>>>=0,e===0?32:31-(Gm(e)/Jm|0)|0}var _i=64,bi=4194304;function ys(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xi(e,r){var i=e.pendingLanes;if(i===0)return 0;var l=0,u=e.suspendedLanes,h=e.pingedLanes,y=i&268435455;if(y!==0){var v=y&~u;v!==0?l=ys(v):(h&=y,h!==0&&(l=ys(h)))}else y=i&~u,y!==0?l=ys(y):h!==0&&(l=ys(h));if(l===0)return 0;if(r!==0&&r!==l&&(r&u)===0&&(u=l&-l,h=r&-r,u>=h||u===16&&(h&4194240)!==0))return r;if((l&4)!==0&&(l|=i&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=l;0<r;)i=31-Kt(r),u=1<<i,l|=e[i],r&=~u;return l}function Qm(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xm(e,r){for(var i=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes;0<h;){var y=31-Kt(h),v=1<<y,x=u[y];x===-1?((v&i)===0||(v&l)!==0)&&(u[y]=Qm(v,r)):x<=r&&(e.expiredLanes|=v),h&=~v}}function ra(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yu(){var e=_i;return _i<<=1,(_i&4194240)===0&&(_i=64),e}function na(e){for(var r=[],i=0;31>i;i++)r.push(e);return r}function vs(e,r,i){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Kt(r),e[r]=i}function Zm(e,r){var i=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var u=31-Kt(i),h=1<<u;r[u]=0,l[u]=-1,e[u]=-1,i&=~h}}function sa(e,r){var i=e.entangledLanes|=r;for(e=e.entanglements;i;){var l=31-Kt(i),u=1<<l;u&r|e[l]&r&&(e[l]|=r),i&=~u}}var Oe=0;function vu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var wu,ia,_u,bu,xu,oa=!1,ki=[],kr=null,Sr=null,Er=null,ws=new Map,_s=new Map,Cr=[],eg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ku(e,r){switch(e){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":ws.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(r.pointerId)}}function bs(e,r,i,l,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:r,domEventName:i,eventSystemFlags:l,nativeEvent:h,targetContainers:[u]},r!==null&&(r=Ds(r),r!==null&&ia(r)),e):(e.eventSystemFlags|=l,r=e.targetContainers,u!==null&&r.indexOf(u)===-1&&r.push(u),e)}function tg(e,r,i,l,u){switch(r){case"focusin":return kr=bs(kr,e,r,i,l,u),!0;case"dragenter":return Sr=bs(Sr,e,r,i,l,u),!0;case"mouseover":return Er=bs(Er,e,r,i,l,u),!0;case"pointerover":var h=u.pointerId;return ws.set(h,bs(ws.get(h)||null,e,r,i,l,u)),!0;case"gotpointercapture":return h=u.pointerId,_s.set(h,bs(_s.get(h)||null,e,r,i,l,u)),!0}return!1}function Su(e){var r=Qr(e.target);if(r!==null){var i=Yr(r);if(i!==null){if(r=i.tag,r===13){if(r=cu(i),r!==null){e.blockedOn=r,xu(e.priority,function(){_u(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Si(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var i=la(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);Jo=l,i.target.dispatchEvent(l),Jo=null}else return r=Ds(i),r!==null&&ia(r),e.blockedOn=i,!1;r.shift()}return!0}function Eu(e,r,i){Si(e)&&i.delete(r)}function rg(){oa=!1,kr!==null&&Si(kr)&&(kr=null),Sr!==null&&Si(Sr)&&(Sr=null),Er!==null&&Si(Er)&&(Er=null),ws.forEach(Eu),_s.forEach(Eu)}function xs(e,r){e.blockedOn===r&&(e.blockedOn=null,oa||(oa=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,rg)))}function ks(e){function r(u){return xs(u,e)}if(0<ki.length){xs(ki[0],e);for(var i=1;i<ki.length;i++){var l=ki[i];l.blockedOn===e&&(l.blockedOn=null)}}for(kr!==null&&xs(kr,e),Sr!==null&&xs(Sr,e),Er!==null&&xs(Er,e),ws.forEach(r),_s.forEach(r),i=0;i<Cr.length;i++)l=Cr[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<Cr.length&&(i=Cr[0],i.blockedOn===null);)Su(i),i.blockedOn===null&&Cr.shift()}var Tn=q.ReactCurrentBatchConfig,Ei=!0;function ng(e,r,i,l){var u=Oe,h=Tn.transition;Tn.transition=null;try{Oe=1,aa(e,r,i,l)}finally{Oe=u,Tn.transition=h}}function sg(e,r,i,l){var u=Oe,h=Tn.transition;Tn.transition=null;try{Oe=4,aa(e,r,i,l)}finally{Oe=u,Tn.transition=h}}function aa(e,r,i,l){if(Ei){var u=la(e,r,i,l);if(u===null)Ea(e,r,l,Ci,i),ku(e,l);else if(tg(u,e,r,i,l))l.stopPropagation();else if(ku(e,l),r&4&&-1<eg.indexOf(e)){for(;u!==null;){var h=Ds(u);if(h!==null&&wu(h),h=la(e,r,i,l),h===null&&Ea(e,r,l,Ci,i),h===u)break;u=h}u!==null&&l.stopPropagation()}else Ea(e,r,l,null,i)}}var Ci=null;function la(e,r,i,l){if(Ci=null,e=Yo(l),e=Qr(e),e!==null)if(r=Yr(e),r===null)e=null;else if(i=r.tag,i===13){if(e=cu(r),e!==null)return e;e=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return Ci=e,null}function Cu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qm()){case ta:return 1;case mu:return 4;case vi:case Hm:return 16;case gu:return 536870912;default:return 16}default:return 16}}var Tr=null,ca=null,Ti=null;function Tu(){if(Ti)return Ti;var e,r=ca,i=r.length,l,u="value"in Tr?Tr.value:Tr.textContent,h=u.length;for(e=0;e<i&&r[e]===u[e];e++);var y=i-e;for(l=1;l<=y&&r[i-l]===u[h-l];l++);return Ti=u.slice(e,1<l?1-l:void 0)}function Ni(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function ji(){return!0}function Nu(){return!1}function Rt(e){function r(i,l,u,h,y){this._reactName=i,this._targetInst=u,this.type=l,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(i=e[v],this[v]=i?i(h):h[v]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ji:Nu,this.isPropagationStopped=Nu,this}return J(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),r}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Rt(Nn),Ss=J({},Nn,{view:0,detail:0}),ig=Rt(Ss),da,ha,Es,Ri=J({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Es&&(Es&&e.type==="mousemove"?(da=e.screenX-Es.screenX,ha=e.screenY-Es.screenY):ha=da=0,Es=e),da)},movementY:function(e){return"movementY"in e?e.movementY:ha}}),ju=Rt(Ri),og=J({},Ri,{dataTransfer:0}),ag=Rt(og),lg=J({},Ss,{relatedTarget:0}),fa=Rt(lg),cg=J({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),ug=Rt(cg),dg=J({},Nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hg=Rt(dg),fg=J({},Nn,{data:0}),Ru=Rt(fg),pg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yg(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=gg[e])?!!r[e]:!1}function pa(){return yg}var vg=J({},Ss,{key:function(e){if(e.key){var r=pg[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pa,charCode:function(e){return e.type==="keypress"?Ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wg=Rt(vg),_g=J({},Ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iu=Rt(_g),bg=J({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pa}),xg=Rt(bg),kg=J({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sg=Rt(kg),Eg=J({},Ri,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Cg=Rt(Eg),Tg=[9,13,27,32],ma=f&&"CompositionEvent"in window,Cs=null;f&&"documentMode"in document&&(Cs=document.documentMode);var Ng=f&&"TextEvent"in window&&!Cs,Au=f&&(!ma||Cs&&8<Cs&&11>=Cs),Ou=" ",Pu=!1;function Du(e,r){switch(e){case"keyup":return Tg.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $u(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jn=!1;function jg(e,r){switch(e){case"compositionend":return $u(r);case"keypress":return r.which!==32?null:(Pu=!0,Ou);case"textInput":return e=r.data,e===Ou&&Pu?null:e;default:return null}}function Rg(e,r){if(jn)return e==="compositionend"||!ma&&Du(e,r)?(e=Tu(),Ti=ca=Tr=null,jn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Au&&r.locale!=="ko"?null:r.data;default:return null}}var Ig={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lu(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Ig[e.type]:r==="textarea"}function Mu(e,r,i,l){su(l),r=Di(r,"onChange"),0<r.length&&(i=new ua("onChange","change",null,i,l),e.push({event:i,listeners:r}))}var Ts=null,Ns=null;function Ag(e){rd(e,0)}function Ii(e){var r=Pn(e);if(M(r))return e}function Og(e,r){if(e==="change")return r}var Uu=!1;if(f){var ga;if(f){var ya="oninput"in document;if(!ya){var zu=document.createElement("div");zu.setAttribute("oninput","return;"),ya=typeof zu.oninput=="function"}ga=ya}else ga=!1;Uu=ga&&(!document.documentMode||9<document.documentMode)}function Bu(){Ts&&(Ts.detachEvent("onpropertychange",Fu),Ns=Ts=null)}function Fu(e){if(e.propertyName==="value"&&Ii(Ns)){var r=[];Mu(r,Ns,e,Yo(e)),lu(Ag,r)}}function Pg(e,r,i){e==="focusin"?(Bu(),Ts=r,Ns=i,Ts.attachEvent("onpropertychange",Fu)):e==="focusout"&&Bu()}function Dg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ii(Ns)}function $g(e,r){if(e==="click")return Ii(r)}function Lg(e,r){if(e==="input"||e==="change")return Ii(r)}function Mg(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Gt=typeof Object.is=="function"?Object.is:Mg;function js(e,r){if(Gt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var i=Object.keys(e),l=Object.keys(r);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var u=i[l];if(!p.call(r,u)||!Gt(e[u],r[u]))return!1}return!0}function Vu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wu(e,r){var i=Vu(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=r&&l>=r)return{node:i,offset:r-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Vu(i)}}function qu(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?qu(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Hu(){for(var e=window,r=Y();r instanceof e.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)e=r.contentWindow;else break;r=Y(e.document)}return r}function va(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function Ug(e){var r=Hu(),i=e.focusedElem,l=e.selectionRange;if(r!==i&&i&&i.ownerDocument&&qu(i.ownerDocument.documentElement,i)){if(l!==null&&va(i)){if(r=l.start,e=l.end,e===void 0&&(e=r),"selectionStart"in i)i.selectionStart=r,i.selectionEnd=Math.min(e,i.value.length);else if(e=(r=i.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var u=i.textContent.length,h=Math.min(l.start,u);l=l.end===void 0?h:Math.min(l.end,u),!e.extend&&h>l&&(u=l,l=h,h=u),u=Wu(i,h);var y=Wu(i,l);u&&y&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(r=r.createRange(),r.setStart(u.node,u.offset),e.removeAllRanges(),h>l?(e.addRange(r),e.extend(y.node,y.offset)):(r.setEnd(y.node,y.offset),e.addRange(r)))}}for(r=[],e=i;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<r.length;i++)e=r[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zg=f&&"documentMode"in document&&11>=document.documentMode,Rn=null,wa=null,Rs=null,_a=!1;function Ku(e,r,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;_a||Rn==null||Rn!==Y(l)||(l=Rn,"selectionStart"in l&&va(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Rs&&js(Rs,l)||(Rs=l,l=Di(wa,"onSelect"),0<l.length&&(r=new ua("onSelect","select",null,r,i),e.push({event:r,listeners:l}),r.target=Rn)))}function Ai(e,r){var i={};return i[e.toLowerCase()]=r.toLowerCase(),i["Webkit"+e]="webkit"+r,i["Moz"+e]="moz"+r,i}var In={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionend:Ai("Transition","TransitionEnd")},ba={},Gu={};f&&(Gu=document.createElement("div").style,"AnimationEvent"in window||(delete In.animationend.animation,delete In.animationiteration.animation,delete In.animationstart.animation),"TransitionEvent"in window||delete In.transitionend.transition);function Oi(e){if(ba[e])return ba[e];if(!In[e])return e;var r=In[e],i;for(i in r)if(r.hasOwnProperty(i)&&i in Gu)return ba[e]=r[i];return e}var Ju=Oi("animationend"),Yu=Oi("animationiteration"),Qu=Oi("animationstart"),Xu=Oi("transitionend"),Zu=new Map,ed="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,r){Zu.set(e,r),c(r,[e])}for(var xa=0;xa<ed.length;xa++){var ka=ed[xa],Bg=ka.toLowerCase(),Fg=ka[0].toUpperCase()+ka.slice(1);Nr(Bg,"on"+Fg)}Nr(Ju,"onAnimationEnd"),Nr(Yu,"onAnimationIteration"),Nr(Qu,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Xu,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Is));function td(e,r,i){var l=e.type||"unknown-event";e.currentTarget=i,Bm(l,r,void 0,e),e.currentTarget=null}function rd(e,r){r=(r&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],u=l.event;l=l.listeners;e:{var h=void 0;if(r)for(var y=l.length-1;0<=y;y--){var v=l[y],x=v.instance,I=v.currentTarget;if(v=v.listener,x!==h&&u.isPropagationStopped())break e;td(u,v,I),h=x}else for(y=0;y<l.length;y++){if(v=l[y],x=v.instance,I=v.currentTarget,v=v.listener,x!==h&&u.isPropagationStopped())break e;td(u,v,I),h=x}}}if(yi)throw e=ea,yi=!1,ea=null,e}function Me(e,r){var i=r[Ia];i===void 0&&(i=r[Ia]=new Set);var l=e+"__bubble";i.has(l)||(nd(r,e,2,!1),i.add(l))}function Sa(e,r,i){var l=0;r&&(l|=4),nd(i,e,l,r)}var Pi="_reactListening"+Math.random().toString(36).slice(2);function As(e){if(!e[Pi]){e[Pi]=!0,o.forEach(function(i){i!=="selectionchange"&&(Vg.has(i)||Sa(i,!1,e),Sa(i,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Pi]||(r[Pi]=!0,Sa("selectionchange",!1,r))}}function nd(e,r,i,l){switch(Cu(r)){case 1:var u=ng;break;case 4:u=sg;break;default:u=aa}i=u.bind(null,r,i,e),u=void 0,!Zo||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(r,i,{capture:!0,passive:u}):e.addEventListener(r,i,!0):u!==void 0?e.addEventListener(r,i,{passive:u}):e.addEventListener(r,i,!1)}function Ea(e,r,i,l,u){var h=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var v=l.stateNode.containerInfo;if(v===u||v.nodeType===8&&v.parentNode===u)break;if(y===4)for(y=l.return;y!==null;){var x=y.tag;if((x===3||x===4)&&(x=y.stateNode.containerInfo,x===u||x.nodeType===8&&x.parentNode===u))return;y=y.return}for(;v!==null;){if(y=Qr(v),y===null)return;if(x=y.tag,x===5||x===6){l=h=y;continue e}v=v.parentNode}}l=l.return}lu(function(){var I=h,B=Yo(i),F=[];e:{var U=Zu.get(e);if(U!==void 0){var X=ua,re=e;switch(e){case"keypress":if(Ni(i)===0)break e;case"keydown":case"keyup":X=wg;break;case"focusin":re="focus",X=fa;break;case"focusout":re="blur",X=fa;break;case"beforeblur":case"afterblur":X=fa;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=ag;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=xg;break;case Ju:case Yu:case Qu:X=ug;break;case Xu:X=Sg;break;case"scroll":X=ig;break;case"wheel":X=Cg;break;case"copy":case"cut":case"paste":X=hg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Iu}var ie=(r&4)!==0,Ze=!ie&&e==="scroll",T=ie?U!==null?U+"Capture":null:U;ie=[];for(var k=I,j;k!==null;){j=k;var W=j.stateNode;if(j.tag===5&&W!==null&&(j=W,T!==null&&(W=ps(k,T),W!=null&&ie.push(Os(k,W,j)))),Ze)break;k=k.return}0<ie.length&&(U=new X(U,re,null,i,B),F.push({event:U,listeners:ie}))}}if((r&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",U&&i!==Jo&&(re=i.relatedTarget||i.fromElement)&&(Qr(re)||re[cr]))break e;if((X||U)&&(U=B.window===B?B:(U=B.ownerDocument)?U.defaultView||U.parentWindow:window,X?(re=i.relatedTarget||i.toElement,X=I,re=re?Qr(re):null,re!==null&&(Ze=Yr(re),re!==Ze||re.tag!==5&&re.tag!==6)&&(re=null)):(X=null,re=I),X!==re)){if(ie=ju,W="onMouseLeave",T="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(ie=Iu,W="onPointerLeave",T="onPointerEnter",k="pointer"),Ze=X==null?U:Pn(X),j=re==null?U:Pn(re),U=new ie(W,k+"leave",X,i,B),U.target=Ze,U.relatedTarget=j,W=null,Qr(B)===I&&(ie=new ie(T,k+"enter",re,i,B),ie.target=j,ie.relatedTarget=Ze,W=ie),Ze=W,X&&re)t:{for(ie=X,T=re,k=0,j=ie;j;j=An(j))k++;for(j=0,W=T;W;W=An(W))j++;for(;0<k-j;)ie=An(ie),k--;for(;0<j-k;)T=An(T),j--;for(;k--;){if(ie===T||T!==null&&ie===T.alternate)break t;ie=An(ie),T=An(T)}ie=null}else ie=null;X!==null&&sd(F,U,X,ie,!1),re!==null&&Ze!==null&&sd(F,Ze,re,ie,!0)}}e:{if(U=I?Pn(I):window,X=U.nodeName&&U.nodeName.toLowerCase(),X==="select"||X==="input"&&U.type==="file")var le=Og;else if(Lu(U))if(Uu)le=Lg;else{le=Dg;var pe=Pg}else(X=U.nodeName)&&X.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(le=$g);if(le&&(le=le(e,I))){Mu(F,le,i,B);break e}pe&&pe(e,U,I),e==="focusout"&&(pe=U._wrapperState)&&pe.controlled&&U.type==="number"&&Ke(U,"number",U.value)}switch(pe=I?Pn(I):window,e){case"focusin":(Lu(pe)||pe.contentEditable==="true")&&(Rn=pe,wa=I,Rs=null);break;case"focusout":Rs=wa=Rn=null;break;case"mousedown":_a=!0;break;case"contextmenu":case"mouseup":case"dragend":_a=!1,Ku(F,i,B);break;case"selectionchange":if(zg)break;case"keydown":case"keyup":Ku(F,i,B)}var me;if(ma)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else jn?Du(e,i)&&(we="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(we="onCompositionStart");we&&(Au&&i.locale!=="ko"&&(jn||we!=="onCompositionStart"?we==="onCompositionEnd"&&jn&&(me=Tu()):(Tr=B,ca="value"in Tr?Tr.value:Tr.textContent,jn=!0)),pe=Di(I,we),0<pe.length&&(we=new Ru(we,e,null,i,B),F.push({event:we,listeners:pe}),me?we.data=me:(me=$u(i),me!==null&&(we.data=me)))),(me=Ng?jg(e,i):Rg(e,i))&&(I=Di(I,"onBeforeInput"),0<I.length&&(B=new Ru("onBeforeInput","beforeinput",null,i,B),F.push({event:B,listeners:I}),B.data=me))}rd(F,r)})}function Os(e,r,i){return{instance:e,listener:r,currentTarget:i}}function Di(e,r){for(var i=r+"Capture",l=[];e!==null;){var u=e,h=u.stateNode;u.tag===5&&h!==null&&(u=h,h=ps(e,i),h!=null&&l.unshift(Os(e,h,u)),h=ps(e,r),h!=null&&l.push(Os(e,h,u))),e=e.return}return l}function An(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sd(e,r,i,l,u){for(var h=r._reactName,y=[];i!==null&&i!==l;){var v=i,x=v.alternate,I=v.stateNode;if(x!==null&&x===l)break;v.tag===5&&I!==null&&(v=I,u?(x=ps(i,h),x!=null&&y.unshift(Os(i,x,v))):u||(x=ps(i,h),x!=null&&y.push(Os(i,x,v)))),i=i.return}y.length!==0&&e.push({event:r,listeners:y})}var Wg=/\r\n?/g,qg=/\u0000|\uFFFD/g;function id(e){return(typeof e=="string"?e:""+e).replace(Wg,`
`).replace(qg,"")}function $i(e,r,i){if(r=id(r),id(e)!==r&&i)throw Error(s(425))}function Li(){}var Ca=null,Ta=null;function Na(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ja=typeof setTimeout=="function"?setTimeout:void 0,Hg=typeof clearTimeout=="function"?clearTimeout:void 0,od=typeof Promise=="function"?Promise:void 0,Kg=typeof queueMicrotask=="function"?queueMicrotask:typeof od<"u"?function(e){return od.resolve(null).then(e).catch(Gg)}:ja;function Gg(e){setTimeout(function(){throw e})}function Ra(e,r){var i=r,l=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(l===0){e.removeChild(u),ks(r);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=u}while(i);ks(r)}function jr(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function ad(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return e;r--}else i==="/$"&&r++}e=e.previousSibling}return null}var On=Math.random().toString(36).slice(2),ir="__reactFiber$"+On,Ps="__reactProps$"+On,cr="__reactContainer$"+On,Ia="__reactEvents$"+On,Jg="__reactListeners$"+On,Yg="__reactHandles$"+On;function Qr(e){var r=e[ir];if(r)return r;for(var i=e.parentNode;i;){if(r=i[cr]||i[ir]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(e=ad(e);e!==null;){if(i=e[ir])return i;e=ad(e)}return r}e=i,i=e.parentNode}return null}function Ds(e){return e=e[ir]||e[cr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Mi(e){return e[Ps]||null}var Aa=[],Dn=-1;function Rr(e){return{current:e}}function Ue(e){0>Dn||(e.current=Aa[Dn],Aa[Dn]=null,Dn--)}function $e(e,r){Dn++,Aa[Dn]=e.current,e.current=r}var Ir={},yt=Rr(Ir),St=Rr(!1),Xr=Ir;function $n(e,r){var i=e.type.contextTypes;if(!i)return Ir;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===r)return l.__reactInternalMemoizedMaskedChildContext;var u={},h;for(h in i)u[h]=r[h];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=u),u}function Et(e){return e=e.childContextTypes,e!=null}function Ui(){Ue(St),Ue(yt)}function ld(e,r,i){if(yt.current!==Ir)throw Error(s(168));$e(yt,r),$e(St,i)}function cd(e,r,i){var l=e.stateNode;if(r=r.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var u in l)if(!(u in r))throw Error(s(108,K(e)||"Unknown",u));return J({},i,l)}function zi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ir,Xr=yt.current,$e(yt,e),$e(St,St.current),!0}function ud(e,r,i){var l=e.stateNode;if(!l)throw Error(s(169));i?(e=cd(e,r,Xr),l.__reactInternalMemoizedMergedChildContext=e,Ue(St),Ue(yt),$e(yt,e)):Ue(St),$e(St,i)}var ur=null,Bi=!1,Oa=!1;function dd(e){ur===null?ur=[e]:ur.push(e)}function Qg(e){Bi=!0,dd(e)}function Ar(){if(!Oa&&ur!==null){Oa=!0;var e=0,r=Oe;try{var i=ur;for(Oe=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}ur=null,Bi=!1}catch(u){throw ur!==null&&(ur=ur.slice(e+1)),fu(ta,Ar),u}finally{Oe=r,Oa=!1}}return null}var Ln=[],Mn=0,Fi=null,Vi=0,zt=[],Bt=0,Zr=null,dr=1,hr="";function en(e,r){Ln[Mn++]=Vi,Ln[Mn++]=Fi,Fi=e,Vi=r}function hd(e,r,i){zt[Bt++]=dr,zt[Bt++]=hr,zt[Bt++]=Zr,Zr=e;var l=dr;e=hr;var u=32-Kt(l)-1;l&=~(1<<u),i+=1;var h=32-Kt(r)+u;if(30<h){var y=u-u%5;h=(l&(1<<y)-1).toString(32),l>>=y,u-=y,dr=1<<32-Kt(r)+u|i<<u|l,hr=h+e}else dr=1<<h|i<<u|l,hr=e}function Pa(e){e.return!==null&&(en(e,1),hd(e,1,0))}function Da(e){for(;e===Fi;)Fi=Ln[--Mn],Ln[Mn]=null,Vi=Ln[--Mn],Ln[Mn]=null;for(;e===Zr;)Zr=zt[--Bt],zt[Bt]=null,hr=zt[--Bt],zt[Bt]=null,dr=zt[--Bt],zt[Bt]=null}var It=null,At=null,Fe=!1,Jt=null;function fd(e,r){var i=qt(5,null,null,0);i.elementType="DELETED",i.stateNode=r,i.return=e,r=e.deletions,r===null?(e.deletions=[i],e.flags|=16):r.push(i)}function pd(e,r){switch(e.tag){case 5:var i=e.type;return r=r.nodeType!==1||i.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,It=e,At=jr(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,It=e,At=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(i=Zr!==null?{id:dr,overflow:hr}:null,e.memoizedState={dehydrated:r,treeContext:i,retryLane:1073741824},i=qt(18,null,null,0),i.stateNode=r,i.return=e,e.child=i,It=e,At=null,!0):!1;default:return!1}}function $a(e){return(e.mode&1)!==0&&(e.flags&128)===0}function La(e){if(Fe){var r=At;if(r){var i=r;if(!pd(e,r)){if($a(e))throw Error(s(418));r=jr(i.nextSibling);var l=It;r&&pd(e,r)?fd(l,i):(e.flags=e.flags&-4097|2,Fe=!1,It=e)}}else{if($a(e))throw Error(s(418));e.flags=e.flags&-4097|2,Fe=!1,It=e}}}function md(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function Wi(e){if(e!==It)return!1;if(!Fe)return md(e),Fe=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!Na(e.type,e.memoizedProps)),r&&(r=At)){if($a(e))throw gd(),Error(s(418));for(;r;)fd(e,r),r=jr(r.nextSibling)}if(md(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(r===0){At=jr(e.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++}e=e.nextSibling}At=null}}else At=It?jr(e.stateNode.nextSibling):null;return!0}function gd(){for(var e=At;e;)e=jr(e.nextSibling)}function Un(){At=It=null,Fe=!1}function Ma(e){Jt===null?Jt=[e]:Jt.push(e)}var Xg=q.ReactCurrentBatchConfig;function $s(e,r,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(s(309));var l=i.stateNode}if(!l)throw Error(s(147,e));var u=l,h=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===h?r.ref:(r=function(y){var v=u.refs;y===null?delete v[h]:v[h]=y},r._stringRef=h,r)}if(typeof e!="string")throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function qi(e,r){throw e=Object.prototype.toString.call(r),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function yd(e){var r=e._init;return r(e._payload)}function vd(e){function r(T,k){if(e){var j=T.deletions;j===null?(T.deletions=[k],T.flags|=16):j.push(k)}}function i(T,k){if(!e)return null;for(;k!==null;)r(T,k),k=k.sibling;return null}function l(T,k){for(T=new Map;k!==null;)k.key!==null?T.set(k.key,k):T.set(k.index,k),k=k.sibling;return T}function u(T,k){return T=zr(T,k),T.index=0,T.sibling=null,T}function h(T,k,j){return T.index=j,e?(j=T.alternate,j!==null?(j=j.index,j<k?(T.flags|=2,k):j):(T.flags|=2,k)):(T.flags|=1048576,k)}function y(T){return e&&T.alternate===null&&(T.flags|=2),T}function v(T,k,j,W){return k===null||k.tag!==6?(k=jl(j,T.mode,W),k.return=T,k):(k=u(k,j),k.return=T,k)}function x(T,k,j,W){var le=j.type;return le===ge?B(T,k,j.props.children,W,j.key):k!==null&&(k.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Re&&yd(le)===k.type)?(W=u(k,j.props),W.ref=$s(T,k,j),W.return=T,W):(W=go(j.type,j.key,j.props,null,T.mode,W),W.ref=$s(T,k,j),W.return=T,W)}function I(T,k,j,W){return k===null||k.tag!==4||k.stateNode.containerInfo!==j.containerInfo||k.stateNode.implementation!==j.implementation?(k=Rl(j,T.mode,W),k.return=T,k):(k=u(k,j.children||[]),k.return=T,k)}function B(T,k,j,W,le){return k===null||k.tag!==7?(k=cn(j,T.mode,W,le),k.return=T,k):(k=u(k,j),k.return=T,k)}function F(T,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return k=jl(""+k,T.mode,j),k.return=T,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case de:return j=go(k.type,k.key,k.props,null,T.mode,j),j.ref=$s(T,null,k),j.return=T,j;case Z:return k=Rl(k,T.mode,j),k.return=T,k;case Re:var W=k._init;return F(T,W(k._payload),j)}if(dt(k)||oe(k))return k=cn(k,T.mode,j,null),k.return=T,k;qi(T,k)}return null}function U(T,k,j,W){var le=k!==null?k.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return le!==null?null:v(T,k,""+j,W);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case de:return j.key===le?x(T,k,j,W):null;case Z:return j.key===le?I(T,k,j,W):null;case Re:return le=j._init,U(T,k,le(j._payload),W)}if(dt(j)||oe(j))return le!==null?null:B(T,k,j,W,null);qi(T,j)}return null}function X(T,k,j,W,le){if(typeof W=="string"&&W!==""||typeof W=="number")return T=T.get(j)||null,v(k,T,""+W,le);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case de:return T=T.get(W.key===null?j:W.key)||null,x(k,T,W,le);case Z:return T=T.get(W.key===null?j:W.key)||null,I(k,T,W,le);case Re:var pe=W._init;return X(T,k,j,pe(W._payload),le)}if(dt(W)||oe(W))return T=T.get(j)||null,B(k,T,W,le,null);qi(k,W)}return null}function re(T,k,j,W){for(var le=null,pe=null,me=k,we=k=0,ut=null;me!==null&&we<j.length;we++){me.index>we?(ut=me,me=null):ut=me.sibling;var Ie=U(T,me,j[we],W);if(Ie===null){me===null&&(me=ut);break}e&&me&&Ie.alternate===null&&r(T,me),k=h(Ie,k,we),pe===null?le=Ie:pe.sibling=Ie,pe=Ie,me=ut}if(we===j.length)return i(T,me),Fe&&en(T,we),le;if(me===null){for(;we<j.length;we++)me=F(T,j[we],W),me!==null&&(k=h(me,k,we),pe===null?le=me:pe.sibling=me,pe=me);return Fe&&en(T,we),le}for(me=l(T,me);we<j.length;we++)ut=X(me,T,we,j[we],W),ut!==null&&(e&&ut.alternate!==null&&me.delete(ut.key===null?we:ut.key),k=h(ut,k,we),pe===null?le=ut:pe.sibling=ut,pe=ut);return e&&me.forEach(function(Br){return r(T,Br)}),Fe&&en(T,we),le}function ie(T,k,j,W){var le=oe(j);if(typeof le!="function")throw Error(s(150));if(j=le.call(j),j==null)throw Error(s(151));for(var pe=le=null,me=k,we=k=0,ut=null,Ie=j.next();me!==null&&!Ie.done;we++,Ie=j.next()){me.index>we?(ut=me,me=null):ut=me.sibling;var Br=U(T,me,Ie.value,W);if(Br===null){me===null&&(me=ut);break}e&&me&&Br.alternate===null&&r(T,me),k=h(Br,k,we),pe===null?le=Br:pe.sibling=Br,pe=Br,me=ut}if(Ie.done)return i(T,me),Fe&&en(T,we),le;if(me===null){for(;!Ie.done;we++,Ie=j.next())Ie=F(T,Ie.value,W),Ie!==null&&(k=h(Ie,k,we),pe===null?le=Ie:pe.sibling=Ie,pe=Ie);return Fe&&en(T,we),le}for(me=l(T,me);!Ie.done;we++,Ie=j.next())Ie=X(me,T,we,Ie.value,W),Ie!==null&&(e&&Ie.alternate!==null&&me.delete(Ie.key===null?we:Ie.key),k=h(Ie,k,we),pe===null?le=Ie:pe.sibling=Ie,pe=Ie);return e&&me.forEach(function(Iy){return r(T,Iy)}),Fe&&en(T,we),le}function Ze(T,k,j,W){if(typeof j=="object"&&j!==null&&j.type===ge&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case de:e:{for(var le=j.key,pe=k;pe!==null;){if(pe.key===le){if(le=j.type,le===ge){if(pe.tag===7){i(T,pe.sibling),k=u(pe,j.props.children),k.return=T,T=k;break e}}else if(pe.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Re&&yd(le)===pe.type){i(T,pe.sibling),k=u(pe,j.props),k.ref=$s(T,pe,j),k.return=T,T=k;break e}i(T,pe);break}else r(T,pe);pe=pe.sibling}j.type===ge?(k=cn(j.props.children,T.mode,W,j.key),k.return=T,T=k):(W=go(j.type,j.key,j.props,null,T.mode,W),W.ref=$s(T,k,j),W.return=T,T=W)}return y(T);case Z:e:{for(pe=j.key;k!==null;){if(k.key===pe)if(k.tag===4&&k.stateNode.containerInfo===j.containerInfo&&k.stateNode.implementation===j.implementation){i(T,k.sibling),k=u(k,j.children||[]),k.return=T,T=k;break e}else{i(T,k);break}else r(T,k);k=k.sibling}k=Rl(j,T.mode,W),k.return=T,T=k}return y(T);case Re:return pe=j._init,Ze(T,k,pe(j._payload),W)}if(dt(j))return re(T,k,j,W);if(oe(j))return ie(T,k,j,W);qi(T,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,k!==null&&k.tag===6?(i(T,k.sibling),k=u(k,j),k.return=T,T=k):(i(T,k),k=jl(j,T.mode,W),k.return=T,T=k),y(T)):i(T,k)}return Ze}var zn=vd(!0),wd=vd(!1),Hi=Rr(null),Ki=null,Bn=null,Ua=null;function za(){Ua=Bn=Ki=null}function Ba(e){var r=Hi.current;Ue(Hi),e._currentValue=r}function Fa(e,r,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),e===i)break;e=e.return}}function Fn(e,r){Ki=e,Ua=Bn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(Ct=!0),e.firstContext=null)}function Ft(e){var r=e._currentValue;if(Ua!==e)if(e={context:e,memoizedValue:r,next:null},Bn===null){if(Ki===null)throw Error(s(308));Bn=e,Ki.dependencies={lanes:0,firstContext:e}}else Bn=Bn.next=e;return r}var tn=null;function Va(e){tn===null?tn=[e]:tn.push(e)}function _d(e,r,i,l){var u=r.interleaved;return u===null?(i.next=i,Va(r)):(i.next=u.next,u.next=i),r.interleaved=i,fr(e,l)}function fr(e,r){e.lanes|=r;var i=e.alternate;for(i!==null&&(i.lanes|=r),i=e,e=e.return;e!==null;)e.childLanes|=r,i=e.alternate,i!==null&&(i.childLanes|=r),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Or=!1;function Wa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bd(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pr(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Pr(e,r,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(je&2)!==0){var u=l.pending;return u===null?r.next=r:(r.next=u.next,u.next=r),l.pending=r,fr(e,i)}return u=l.interleaved,u===null?(r.next=r,Va(l)):(r.next=u.next,u.next=r),l.interleaved=r,fr(e,i)}function Gi(e,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194240)!==0)){var l=r.lanes;l&=e.pendingLanes,i|=l,r.lanes=i,sa(e,i)}}function xd(e,r){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var u=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};h===null?u=h=y:h=h.next=y,i=i.next}while(i!==null);h===null?u=h=r:h=h.next=r}else u=h=r;i={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=r:e.next=r,i.lastBaseUpdate=r}function Ji(e,r,i,l){var u=e.updateQueue;Or=!1;var h=u.firstBaseUpdate,y=u.lastBaseUpdate,v=u.shared.pending;if(v!==null){u.shared.pending=null;var x=v,I=x.next;x.next=null,y===null?h=I:y.next=I,y=x;var B=e.alternate;B!==null&&(B=B.updateQueue,v=B.lastBaseUpdate,v!==y&&(v===null?B.firstBaseUpdate=I:v.next=I,B.lastBaseUpdate=x))}if(h!==null){var F=u.baseState;y=0,B=I=x=null,v=h;do{var U=v.lane,X=v.eventTime;if((l&U)===U){B!==null&&(B=B.next={eventTime:X,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var re=e,ie=v;switch(U=r,X=i,ie.tag){case 1:if(re=ie.payload,typeof re=="function"){F=re.call(X,F,U);break e}F=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ie.payload,U=typeof re=="function"?re.call(X,F,U):re,U==null)break e;F=J({},F,U);break e;case 2:Or=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,U=u.effects,U===null?u.effects=[v]:U.push(v))}else X={eventTime:X,lane:U,tag:v.tag,payload:v.payload,callback:v.callback,next:null},B===null?(I=B=X,x=F):B=B.next=X,y|=U;if(v=v.next,v===null){if(v=u.shared.pending,v===null)break;U=v,v=U.next,U.next=null,u.lastBaseUpdate=U,u.shared.pending=null}}while(!0);if(B===null&&(x=F),u.baseState=x,u.firstBaseUpdate=I,u.lastBaseUpdate=B,r=u.shared.interleaved,r!==null){u=r;do y|=u.lane,u=u.next;while(u!==r)}else h===null&&(u.shared.lanes=0);sn|=y,e.lanes=y,e.memoizedState=F}}function kd(e,r,i){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var l=e[r],u=l.callback;if(u!==null){if(l.callback=null,l=i,typeof u!="function")throw Error(s(191,u));u.call(l)}}}var Ls={},or=Rr(Ls),Ms=Rr(Ls),Us=Rr(Ls);function rn(e){if(e===Ls)throw Error(s(174));return e}function qa(e,r){switch($e(Us,r),$e(Ms,e),$e(or,Ls),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Ho(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Ho(r,e)}Ue(or),$e(or,r)}function Vn(){Ue(or),Ue(Ms),Ue(Us)}function Sd(e){rn(Us.current);var r=rn(or.current),i=Ho(r,e.type);r!==i&&($e(Ms,e),$e(or,i))}function Ha(e){Ms.current===e&&(Ue(or),Ue(Ms))}var We=Rr(0);function Yi(e){for(var r=e;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ka=[];function Ga(){for(var e=0;e<Ka.length;e++)Ka[e]._workInProgressVersionPrimary=null;Ka.length=0}var Qi=q.ReactCurrentDispatcher,Ja=q.ReactCurrentBatchConfig,nn=0,qe=null,st=null,lt=null,Xi=!1,zs=!1,Bs=0,Zg=0;function vt(){throw Error(s(321))}function Ya(e,r){if(r===null)return!1;for(var i=0;i<r.length&&i<e.length;i++)if(!Gt(e[i],r[i]))return!1;return!0}function Qa(e,r,i,l,u,h){if(nn=h,qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Qi.current=e===null||e.memoizedState===null?ny:sy,e=i(l,u),zs){h=0;do{if(zs=!1,Bs=0,25<=h)throw Error(s(301));h+=1,lt=st=null,r.updateQueue=null,Qi.current=iy,e=i(l,u)}while(zs)}if(Qi.current=to,r=st!==null&&st.next!==null,nn=0,lt=st=qe=null,Xi=!1,r)throw Error(s(300));return e}function Xa(){var e=Bs!==0;return Bs=0,e}function ar(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?qe.memoizedState=lt=e:lt=lt.next=e,lt}function Vt(){if(st===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var r=lt===null?qe.memoizedState:lt.next;if(r!==null)lt=r,st=e;else{if(e===null)throw Error(s(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},lt===null?qe.memoizedState=lt=e:lt=lt.next=e}return lt}function Fs(e,r){return typeof r=="function"?r(e):r}function Za(e){var r=Vt(),i=r.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=st,u=l.baseQueue,h=i.pending;if(h!==null){if(u!==null){var y=u.next;u.next=h.next,h.next=y}l.baseQueue=u=h,i.pending=null}if(u!==null){h=u.next,l=l.baseState;var v=y=null,x=null,I=h;do{var B=I.lane;if((nn&B)===B)x!==null&&(x=x.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),l=I.hasEagerState?I.eagerState:e(l,I.action);else{var F={lane:B,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};x===null?(v=x=F,y=l):x=x.next=F,qe.lanes|=B,sn|=B}I=I.next}while(I!==null&&I!==h);x===null?y=l:x.next=v,Gt(l,r.memoizedState)||(Ct=!0),r.memoizedState=l,r.baseState=y,r.baseQueue=x,i.lastRenderedState=l}if(e=i.interleaved,e!==null){u=e;do h=u.lane,qe.lanes|=h,sn|=h,u=u.next;while(u!==e)}else u===null&&(i.lanes=0);return[r.memoizedState,i.dispatch]}function el(e){var r=Vt(),i=r.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,u=i.pending,h=r.memoizedState;if(u!==null){i.pending=null;var y=u=u.next;do h=e(h,y.action),y=y.next;while(y!==u);Gt(h,r.memoizedState)||(Ct=!0),r.memoizedState=h,r.baseQueue===null&&(r.baseState=h),i.lastRenderedState=h}return[h,l]}function Ed(){}function Cd(e,r){var i=qe,l=Vt(),u=r(),h=!Gt(l.memoizedState,u);if(h&&(l.memoizedState=u,Ct=!0),l=l.queue,tl(jd.bind(null,i,l,e),[e]),l.getSnapshot!==r||h||lt!==null&&lt.memoizedState.tag&1){if(i.flags|=2048,Vs(9,Nd.bind(null,i,l,u,r),void 0,null),ct===null)throw Error(s(349));(nn&30)!==0||Td(i,r,u)}return u}function Td(e,r,i){e.flags|=16384,e={getSnapshot:r,value:i},r=qe.updateQueue,r===null?(r={lastEffect:null,stores:null},qe.updateQueue=r,r.stores=[e]):(i=r.stores,i===null?r.stores=[e]:i.push(e))}function Nd(e,r,i,l){r.value=i,r.getSnapshot=l,Rd(r)&&Id(e)}function jd(e,r,i){return i(function(){Rd(r)&&Id(e)})}function Rd(e){var r=e.getSnapshot;e=e.value;try{var i=r();return!Gt(e,i)}catch{return!0}}function Id(e){var r=fr(e,1);r!==null&&Zt(r,e,1,-1)}function Ad(e){var r=ar();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:e},r.queue=e,e=e.dispatch=ry.bind(null,qe,e),[r.memoizedState,e]}function Vs(e,r,i,l){return e={tag:e,create:r,destroy:i,deps:l,next:null},r=qe.updateQueue,r===null?(r={lastEffect:null,stores:null},qe.updateQueue=r,r.lastEffect=e.next=e):(i=r.lastEffect,i===null?r.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,r.lastEffect=e)),e}function Od(){return Vt().memoizedState}function Zi(e,r,i,l){var u=ar();qe.flags|=e,u.memoizedState=Vs(1|r,i,void 0,l===void 0?null:l)}function eo(e,r,i,l){var u=Vt();l=l===void 0?null:l;var h=void 0;if(st!==null){var y=st.memoizedState;if(h=y.destroy,l!==null&&Ya(l,y.deps)){u.memoizedState=Vs(r,i,h,l);return}}qe.flags|=e,u.memoizedState=Vs(1|r,i,h,l)}function Pd(e,r){return Zi(8390656,8,e,r)}function tl(e,r){return eo(2048,8,e,r)}function Dd(e,r){return eo(4,2,e,r)}function $d(e,r){return eo(4,4,e,r)}function Ld(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Md(e,r,i){return i=i!=null?i.concat([e]):null,eo(4,4,Ld.bind(null,r,e),i)}function rl(){}function Ud(e,r){var i=Vt();r=r===void 0?null:r;var l=i.memoizedState;return l!==null&&r!==null&&Ya(r,l[1])?l[0]:(i.memoizedState=[e,r],e)}function zd(e,r){var i=Vt();r=r===void 0?null:r;var l=i.memoizedState;return l!==null&&r!==null&&Ya(r,l[1])?l[0]:(e=e(),i.memoizedState=[e,r],e)}function Bd(e,r,i){return(nn&21)===0?(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=i):(Gt(i,r)||(i=yu(),qe.lanes|=i,sn|=i,e.baseState=!0),r)}function ey(e,r){var i=Oe;Oe=i!==0&&4>i?i:4,e(!0);var l=Ja.transition;Ja.transition={};try{e(!1),r()}finally{Oe=i,Ja.transition=l}}function Fd(){return Vt().memoizedState}function ty(e,r,i){var l=Mr(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},Vd(e))Wd(r,i);else if(i=_d(e,r,i,l),i!==null){var u=xt();Zt(i,e,l,u),qd(i,r,l)}}function ry(e,r,i){var l=Mr(e),u={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(Vd(e))Wd(r,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=r.lastRenderedReducer,h!==null))try{var y=r.lastRenderedState,v=h(y,i);if(u.hasEagerState=!0,u.eagerState=v,Gt(v,y)){var x=r.interleaved;x===null?(u.next=u,Va(r)):(u.next=x.next,x.next=u),r.interleaved=u;return}}catch{}finally{}i=_d(e,r,u,l),i!==null&&(u=xt(),Zt(i,e,l,u),qd(i,r,l))}}function Vd(e){var r=e.alternate;return e===qe||r!==null&&r===qe}function Wd(e,r){zs=Xi=!0;var i=e.pending;i===null?r.next=r:(r.next=i.next,i.next=r),e.pending=r}function qd(e,r,i){if((i&4194240)!==0){var l=r.lanes;l&=e.pendingLanes,i|=l,r.lanes=i,sa(e,i)}}var to={readContext:Ft,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},ny={readContext:Ft,useCallback:function(e,r){return ar().memoizedState=[e,r===void 0?null:r],e},useContext:Ft,useEffect:Pd,useImperativeHandle:function(e,r,i){return i=i!=null?i.concat([e]):null,Zi(4194308,4,Ld.bind(null,r,e),i)},useLayoutEffect:function(e,r){return Zi(4194308,4,e,r)},useInsertionEffect:function(e,r){return Zi(4,2,e,r)},useMemo:function(e,r){var i=ar();return r=r===void 0?null:r,e=e(),i.memoizedState=[e,r],e},useReducer:function(e,r,i){var l=ar();return r=i!==void 0?i(r):r,l.memoizedState=l.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=ty.bind(null,qe,e),[l.memoizedState,e]},useRef:function(e){var r=ar();return e={current:e},r.memoizedState=e},useState:Ad,useDebugValue:rl,useDeferredValue:function(e){return ar().memoizedState=e},useTransition:function(){var e=Ad(!1),r=e[0];return e=ey.bind(null,e[1]),ar().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,i){var l=qe,u=ar();if(Fe){if(i===void 0)throw Error(s(407));i=i()}else{if(i=r(),ct===null)throw Error(s(349));(nn&30)!==0||Td(l,r,i)}u.memoizedState=i;var h={value:i,getSnapshot:r};return u.queue=h,Pd(jd.bind(null,l,h,e),[e]),l.flags|=2048,Vs(9,Nd.bind(null,l,h,i,r),void 0,null),i},useId:function(){var e=ar(),r=ct.identifierPrefix;if(Fe){var i=hr,l=dr;i=(l&~(1<<32-Kt(l)-1)).toString(32)+i,r=":"+r+"R"+i,i=Bs++,0<i&&(r+="H"+i.toString(32)),r+=":"}else i=Zg++,r=":"+r+"r"+i.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},sy={readContext:Ft,useCallback:Ud,useContext:Ft,useEffect:tl,useImperativeHandle:Md,useInsertionEffect:Dd,useLayoutEffect:$d,useMemo:zd,useReducer:Za,useRef:Od,useState:function(){return Za(Fs)},useDebugValue:rl,useDeferredValue:function(e){var r=Vt();return Bd(r,st.memoizedState,e)},useTransition:function(){var e=Za(Fs)[0],r=Vt().memoizedState;return[e,r]},useMutableSource:Ed,useSyncExternalStore:Cd,useId:Fd,unstable_isNewReconciler:!1},iy={readContext:Ft,useCallback:Ud,useContext:Ft,useEffect:tl,useImperativeHandle:Md,useInsertionEffect:Dd,useLayoutEffect:$d,useMemo:zd,useReducer:el,useRef:Od,useState:function(){return el(Fs)},useDebugValue:rl,useDeferredValue:function(e){var r=Vt();return st===null?r.memoizedState=e:Bd(r,st.memoizedState,e)},useTransition:function(){var e=el(Fs)[0],r=Vt().memoizedState;return[e,r]},useMutableSource:Ed,useSyncExternalStore:Cd,useId:Fd,unstable_isNewReconciler:!1};function Yt(e,r){if(e&&e.defaultProps){r=J({},r),e=e.defaultProps;for(var i in e)r[i]===void 0&&(r[i]=e[i]);return r}return r}function nl(e,r,i,l){r=e.memoizedState,i=i(l,r),i=i==null?r:J({},r,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var ro={isMounted:function(e){return(e=e._reactInternals)?Yr(e)===e:!1},enqueueSetState:function(e,r,i){e=e._reactInternals;var l=xt(),u=Mr(e),h=pr(l,u);h.payload=r,i!=null&&(h.callback=i),r=Pr(e,h,u),r!==null&&(Zt(r,e,u,l),Gi(r,e,u))},enqueueReplaceState:function(e,r,i){e=e._reactInternals;var l=xt(),u=Mr(e),h=pr(l,u);h.tag=1,h.payload=r,i!=null&&(h.callback=i),r=Pr(e,h,u),r!==null&&(Zt(r,e,u,l),Gi(r,e,u))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var i=xt(),l=Mr(e),u=pr(i,l);u.tag=2,r!=null&&(u.callback=r),r=Pr(e,u,l),r!==null&&(Zt(r,e,l,i),Gi(r,e,l))}};function Hd(e,r,i,l,u,h,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,y):r.prototype&&r.prototype.isPureReactComponent?!js(i,l)||!js(u,h):!0}function Kd(e,r,i){var l=!1,u=Ir,h=r.contextType;return typeof h=="object"&&h!==null?h=Ft(h):(u=Et(r)?Xr:yt.current,l=r.contextTypes,h=(l=l!=null)?$n(e,u):Ir),r=new r(i,h),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ro,e.stateNode=r,r._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=h),r}function Gd(e,r,i,l){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,l),r.state!==e&&ro.enqueueReplaceState(r,r.state,null)}function sl(e,r,i,l){var u=e.stateNode;u.props=i,u.state=e.memoizedState,u.refs={},Wa(e);var h=r.contextType;typeof h=="object"&&h!==null?u.context=Ft(h):(h=Et(r)?Xr:yt.current,u.context=$n(e,h)),u.state=e.memoizedState,h=r.getDerivedStateFromProps,typeof h=="function"&&(nl(e,r,h,i),u.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(r=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),r!==u.state&&ro.enqueueReplaceState(u,u.state,null),Ji(e,i,u,l),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Wn(e,r){try{var i="",l=r;do i+=z(l),l=l.return;while(l);var u=i}catch(h){u=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:r,stack:u,digest:null}}function il(e,r,i){return{value:e,source:null,stack:i??null,digest:r??null}}function ol(e,r){try{console.error(r.value)}catch(i){setTimeout(function(){throw i})}}var oy=typeof WeakMap=="function"?WeakMap:Map;function Jd(e,r,i){i=pr(-1,i),i.tag=3,i.payload={element:null};var l=r.value;return i.callback=function(){co||(co=!0,bl=l),ol(e,r)},i}function Yd(e,r,i){i=pr(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var u=r.value;i.payload=function(){return l(u)},i.callback=function(){ol(e,r)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(i.callback=function(){ol(e,r),typeof l!="function"&&($r===null?$r=new Set([this]):$r.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})}),i}function Qd(e,r,i){var l=e.pingCache;if(l===null){l=e.pingCache=new oy;var u=new Set;l.set(r,u)}else u=l.get(r),u===void 0&&(u=new Set,l.set(r,u));u.has(i)||(u.add(i),e=_y.bind(null,e,r,i),r.then(e,e))}function Xd(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function Zd(e,r,i,l,u){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(r=pr(-1,1),r.tag=2,Pr(i,r,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var ay=q.ReactCurrentOwner,Ct=!1;function bt(e,r,i,l){r.child=e===null?wd(r,null,i,l):zn(r,e.child,i,l)}function eh(e,r,i,l,u){i=i.render;var h=r.ref;return Fn(r,u),l=Qa(e,r,i,l,h,u),i=Xa(),e!==null&&!Ct?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~u,mr(e,r,u)):(Fe&&i&&Pa(r),r.flags|=1,bt(e,r,l,u),r.child)}function th(e,r,i,l,u){if(e===null){var h=i.type;return typeof h=="function"&&!Nl(h)&&h.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(r.tag=15,r.type=h,rh(e,r,h,l,u)):(e=go(i.type,null,l,r,r.mode,u),e.ref=r.ref,e.return=r,r.child=e)}if(h=e.child,(e.lanes&u)===0){var y=h.memoizedProps;if(i=i.compare,i=i!==null?i:js,i(y,l)&&e.ref===r.ref)return mr(e,r,u)}return r.flags|=1,e=zr(h,l),e.ref=r.ref,e.return=r,r.child=e}function rh(e,r,i,l,u){if(e!==null){var h=e.memoizedProps;if(js(h,l)&&e.ref===r.ref)if(Ct=!1,r.pendingProps=l=h,(e.lanes&u)!==0)(e.flags&131072)!==0&&(Ct=!0);else return r.lanes=e.lanes,mr(e,r,u)}return al(e,r,i,l,u)}function nh(e,r,i){var l=r.pendingProps,u=l.children,h=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Hn,Ot),Ot|=i;else{if((i&1073741824)===0)return e=h!==null?h.baseLanes|i:i,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,$e(Hn,Ot),Ot|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=h!==null?h.baseLanes:i,$e(Hn,Ot),Ot|=l}else h!==null?(l=h.baseLanes|i,r.memoizedState=null):l=i,$e(Hn,Ot),Ot|=l;return bt(e,r,u,i),r.child}function sh(e,r){var i=r.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(r.flags|=512,r.flags|=2097152)}function al(e,r,i,l,u){var h=Et(i)?Xr:yt.current;return h=$n(r,h),Fn(r,u),i=Qa(e,r,i,l,h,u),l=Xa(),e!==null&&!Ct?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~u,mr(e,r,u)):(Fe&&l&&Pa(r),r.flags|=1,bt(e,r,i,u),r.child)}function ih(e,r,i,l,u){if(Et(i)){var h=!0;zi(r)}else h=!1;if(Fn(r,u),r.stateNode===null)so(e,r),Kd(r,i,l),sl(r,i,l,u),l=!0;else if(e===null){var y=r.stateNode,v=r.memoizedProps;y.props=v;var x=y.context,I=i.contextType;typeof I=="object"&&I!==null?I=Ft(I):(I=Et(i)?Xr:yt.current,I=$n(r,I));var B=i.getDerivedStateFromProps,F=typeof B=="function"||typeof y.getSnapshotBeforeUpdate=="function";F||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(v!==l||x!==I)&&Gd(r,y,l,I),Or=!1;var U=r.memoizedState;y.state=U,Ji(r,l,y,u),x=r.memoizedState,v!==l||U!==x||St.current||Or?(typeof B=="function"&&(nl(r,i,B,l),x=r.memoizedState),(v=Or||Hd(r,i,v,l,U,x,I))?(F||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=x),y.props=l,y.state=x,y.context=I,l=v):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{y=r.stateNode,bd(e,r),v=r.memoizedProps,I=r.type===r.elementType?v:Yt(r.type,v),y.props=I,F=r.pendingProps,U=y.context,x=i.contextType,typeof x=="object"&&x!==null?x=Ft(x):(x=Et(i)?Xr:yt.current,x=$n(r,x));var X=i.getDerivedStateFromProps;(B=typeof X=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(v!==F||U!==x)&&Gd(r,y,l,x),Or=!1,U=r.memoizedState,y.state=U,Ji(r,l,y,u);var re=r.memoizedState;v!==F||U!==re||St.current||Or?(typeof X=="function"&&(nl(r,i,X,l),re=r.memoizedState),(I=Or||Hd(r,i,I,l,U,re,x)||!1)?(B||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,re,x),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,re,x)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=re),y.props=l,y.state=re,y.context=x,l=I):(typeof y.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(r.flags|=1024),l=!1)}return ll(e,r,i,l,h,u)}function ll(e,r,i,l,u,h){sh(e,r);var y=(r.flags&128)!==0;if(!l&&!y)return u&&ud(r,i,!1),mr(e,r,h);l=r.stateNode,ay.current=r;var v=y&&typeof i.getDerivedStateFromError!="function"?null:l.render();return r.flags|=1,e!==null&&y?(r.child=zn(r,e.child,null,h),r.child=zn(r,null,v,h)):bt(e,r,v,h),r.memoizedState=l.state,u&&ud(r,i,!0),r.child}function oh(e){var r=e.stateNode;r.pendingContext?ld(e,r.pendingContext,r.pendingContext!==r.context):r.context&&ld(e,r.context,!1),qa(e,r.containerInfo)}function ah(e,r,i,l,u){return Un(),Ma(u),r.flags|=256,bt(e,r,i,l),r.child}var cl={dehydrated:null,treeContext:null,retryLane:0};function ul(e){return{baseLanes:e,cachePool:null,transitions:null}}function lh(e,r,i){var l=r.pendingProps,u=We.current,h=!1,y=(r.flags&128)!==0,v;if((v=y)||(v=e!==null&&e.memoizedState===null?!1:(u&2)!==0),v?(h=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),$e(We,u&1),e===null)return La(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(y=l.children,e=l.fallback,h?(l=r.mode,h=r.child,y={mode:"hidden",children:y},(l&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=y):h=yo(y,l,0,null),e=cn(e,l,i,null),h.return=r,e.return=r,h.sibling=e,r.child=h,r.child.memoizedState=ul(i),r.memoizedState=cl,e):dl(r,y));if(u=e.memoizedState,u!==null&&(v=u.dehydrated,v!==null))return ly(e,r,y,l,v,u,i);if(h){h=l.fallback,y=r.mode,u=e.child,v=u.sibling;var x={mode:"hidden",children:l.children};return(y&1)===0&&r.child!==u?(l=r.child,l.childLanes=0,l.pendingProps=x,r.deletions=null):(l=zr(u,x),l.subtreeFlags=u.subtreeFlags&14680064),v!==null?h=zr(v,h):(h=cn(h,y,i,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,y=e.child.memoizedState,y=y===null?ul(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},h.memoizedState=y,h.childLanes=e.childLanes&~i,r.memoizedState=cl,l}return h=e.child,e=h.sibling,l=zr(h,{mode:"visible",children:l.children}),(r.mode&1)===0&&(l.lanes=i),l.return=r,l.sibling=null,e!==null&&(i=r.deletions,i===null?(r.deletions=[e],r.flags|=16):i.push(e)),r.child=l,r.memoizedState=null,l}function dl(e,r){return r=yo({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function no(e,r,i,l){return l!==null&&Ma(l),zn(r,e.child,null,i),e=dl(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function ly(e,r,i,l,u,h,y){if(i)return r.flags&256?(r.flags&=-257,l=il(Error(s(422))),no(e,r,y,l)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(h=l.fallback,u=r.mode,l=yo({mode:"visible",children:l.children},u,0,null),h=cn(h,u,y,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,(r.mode&1)!==0&&zn(r,e.child,null,y),r.child.memoizedState=ul(y),r.memoizedState=cl,h);if((r.mode&1)===0)return no(e,r,y,null);if(u.data==="$!"){if(l=u.nextSibling&&u.nextSibling.dataset,l)var v=l.dgst;return l=v,h=Error(s(419)),l=il(h,l,void 0),no(e,r,y,l)}if(v=(y&e.childLanes)!==0,Ct||v){if(l=ct,l!==null){switch(y&-y){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(l.suspendedLanes|y))!==0?0:u,u!==0&&u!==h.retryLane&&(h.retryLane=u,fr(e,u),Zt(l,e,u,-1))}return Tl(),l=il(Error(s(421))),no(e,r,y,l)}return u.data==="$?"?(r.flags|=128,r.child=e.child,r=by.bind(null,e),u._reactRetry=r,null):(e=h.treeContext,At=jr(u.nextSibling),It=r,Fe=!0,Jt=null,e!==null&&(zt[Bt++]=dr,zt[Bt++]=hr,zt[Bt++]=Zr,dr=e.id,hr=e.overflow,Zr=r),r=dl(r,l.children),r.flags|=4096,r)}function ch(e,r,i){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r),Fa(e.return,r,i)}function hl(e,r,i,l,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:u}:(h.isBackwards=r,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=i,h.tailMode=u)}function uh(e,r,i){var l=r.pendingProps,u=l.revealOrder,h=l.tail;if(bt(e,r,l.children,i),l=We.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ch(e,i,r);else if(e.tag===19)ch(e,i,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if($e(We,l),(r.mode&1)===0)r.memoizedState=null;else switch(u){case"forwards":for(i=r.child,u=null;i!==null;)e=i.alternate,e!==null&&Yi(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=r.child,r.child=null):(u=i.sibling,i.sibling=null),hl(r,!1,u,i,h);break;case"backwards":for(i=null,u=r.child,r.child=null;u!==null;){if(e=u.alternate,e!==null&&Yi(e)===null){r.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}hl(r,!0,i,null,h);break;case"together":hl(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function so(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function mr(e,r,i){if(e!==null&&(r.dependencies=e.dependencies),sn|=r.lanes,(i&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(s(153));if(r.child!==null){for(e=r.child,i=zr(e,e.pendingProps),r.child=i,i.return=r;e.sibling!==null;)e=e.sibling,i=i.sibling=zr(e,e.pendingProps),i.return=r;i.sibling=null}return r.child}function cy(e,r,i){switch(r.tag){case 3:oh(r),Un();break;case 5:Sd(r);break;case 1:Et(r.type)&&zi(r);break;case 4:qa(r,r.stateNode.containerInfo);break;case 10:var l=r.type._context,u=r.memoizedProps.value;$e(Hi,l._currentValue),l._currentValue=u;break;case 13:if(l=r.memoizedState,l!==null)return l.dehydrated!==null?($e(We,We.current&1),r.flags|=128,null):(i&r.child.childLanes)!==0?lh(e,r,i):($e(We,We.current&1),e=mr(e,r,i),e!==null?e.sibling:null);$e(We,We.current&1);break;case 19:if(l=(i&r.childLanes)!==0,(e.flags&128)!==0){if(l)return uh(e,r,i);r.flags|=128}if(u=r.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),$e(We,We.current),l)break;return null;case 22:case 23:return r.lanes=0,nh(e,r,i)}return mr(e,r,i)}var dh,fl,hh,fh;dh=function(e,r){for(var i=r.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},fl=function(){},hh=function(e,r,i,l){var u=e.memoizedProps;if(u!==l){e=r.stateNode,rn(or.current);var h=null;switch(i){case"input":u=fe(e,u),l=fe(e,l),h=[];break;case"select":u=J({},u,{value:void 0}),l=J({},l,{value:void 0}),h=[];break;case"textarea":u=Be(e,u),l=Be(e,l),h=[];break;default:typeof u.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Li)}Ko(i,l);var y;i=null;for(I in u)if(!l.hasOwnProperty(I)&&u.hasOwnProperty(I)&&u[I]!=null)if(I==="style"){var v=u[I];for(y in v)v.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(a.hasOwnProperty(I)?h||(h=[]):(h=h||[]).push(I,null));for(I in l){var x=l[I];if(v=u!=null?u[I]:void 0,l.hasOwnProperty(I)&&x!==v&&(x!=null||v!=null))if(I==="style")if(v){for(y in v)!v.hasOwnProperty(y)||x&&x.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in x)x.hasOwnProperty(y)&&v[y]!==x[y]&&(i||(i={}),i[y]=x[y])}else i||(h||(h=[]),h.push(I,i)),i=x;else I==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,v=v?v.__html:void 0,x!=null&&v!==x&&(h=h||[]).push(I,x)):I==="children"?typeof x!="string"&&typeof x!="number"||(h=h||[]).push(I,""+x):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(a.hasOwnProperty(I)?(x!=null&&I==="onScroll"&&Me("scroll",e),h||v===x||(h=[])):(h=h||[]).push(I,x))}i&&(h=h||[]).push("style",i);var I=h;(r.updateQueue=I)&&(r.flags|=4)}},fh=function(e,r,i,l){i!==l&&(r.flags|=4)};function Ws(e,r){if(!Fe)switch(e.tailMode){case"hidden":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function wt(e){var r=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(r)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags&14680064,l|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=i,r}function uy(e,r,i){var l=r.pendingProps;switch(Da(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(r),null;case 1:return Et(r.type)&&Ui(),wt(r),null;case 3:return l=r.stateNode,Vn(),Ue(St),Ue(yt),Ga(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Wi(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Jt!==null&&(Sl(Jt),Jt=null))),fl(e,r),wt(r),null;case 5:Ha(r);var u=rn(Us.current);if(i=r.type,e!==null&&r.stateNode!=null)hh(e,r,i,l,u),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!l){if(r.stateNode===null)throw Error(s(166));return wt(r),null}if(e=rn(or.current),Wi(r)){l=r.stateNode,i=r.type;var h=r.memoizedProps;switch(l[ir]=r,l[Ps]=h,e=(r.mode&1)!==0,i){case"dialog":Me("cancel",l),Me("close",l);break;case"iframe":case"object":case"embed":Me("load",l);break;case"video":case"audio":for(u=0;u<Is.length;u++)Me(Is[u],l);break;case"source":Me("error",l);break;case"img":case"image":case"link":Me("error",l),Me("load",l);break;case"details":Me("toggle",l);break;case"input":he(l,h),Me("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!h.multiple},Me("invalid",l);break;case"textarea":nr(l,h),Me("invalid",l)}Ko(i,h),u=null;for(var y in h)if(h.hasOwnProperty(y)){var v=h[y];y==="children"?typeof v=="string"?l.textContent!==v&&(h.suppressHydrationWarning!==!0&&$i(l.textContent,v,e),u=["children",v]):typeof v=="number"&&l.textContent!==""+v&&(h.suppressHydrationWarning!==!0&&$i(l.textContent,v,e),u=["children",""+v]):a.hasOwnProperty(y)&&v!=null&&y==="onScroll"&&Me("scroll",l)}switch(i){case"input":H(l),Se(l,h,!0);break;case"textarea":H(l),Ut(l);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(l.onclick=Li)}l=u,r.updateQueue=l,l!==null&&(r.flags|=4)}else{y=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Sn(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=y.createElement(i,{is:l.is}):(e=y.createElement(i),i==="select"&&(y=e,l.multiple?y.multiple=!0:l.size&&(y.size=l.size))):e=y.createElementNS(e,i),e[ir]=r,e[Ps]=l,dh(e,r,!1,!1),r.stateNode=e;e:{switch(y=Go(i,l),i){case"dialog":Me("cancel",e),Me("close",e),u=l;break;case"iframe":case"object":case"embed":Me("load",e),u=l;break;case"video":case"audio":for(u=0;u<Is.length;u++)Me(Is[u],e);u=l;break;case"source":Me("error",e),u=l;break;case"img":case"image":case"link":Me("error",e),Me("load",e),u=l;break;case"details":Me("toggle",e),u=l;break;case"input":he(e,l),u=fe(e,l),Me("invalid",e);break;case"option":u=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},u=J({},l,{value:void 0}),Me("invalid",e);break;case"textarea":nr(e,l),u=Be(e,l),Me("invalid",e);break;default:u=l}Ko(i,u),v=u;for(h in v)if(v.hasOwnProperty(h)){var x=v[h];h==="style"?ru(e,x):h==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&eu(e,x)):h==="children"?typeof x=="string"?(i!=="textarea"||x!=="")&&hs(e,x):typeof x=="number"&&hs(e,""+x):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(a.hasOwnProperty(h)?x!=null&&h==="onScroll"&&Me("scroll",e):x!=null&&$(e,h,x,y))}switch(i){case"input":H(e),Se(e,l,!1);break;case"textarea":H(e),Ut(e);break;case"option":l.value!=null&&e.setAttribute("value",""+ue(l.value));break;case"select":e.multiple=!!l.multiple,h=l.value,h!=null?nt(e,!!l.multiple,h,!1):l.defaultValue!=null&&nt(e,!!l.multiple,l.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Li)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return wt(r),null;case 6:if(e&&r.stateNode!=null)fh(e,r,e.memoizedProps,l);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(i=rn(Us.current),rn(or.current),Wi(r)){if(l=r.stateNode,i=r.memoizedProps,l[ir]=r,(h=l.nodeValue!==i)&&(e=It,e!==null))switch(e.tag){case 3:$i(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$i(l.nodeValue,i,(e.mode&1)!==0)}h&&(r.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[ir]=r,r.stateNode=l}return wt(r),null;case 13:if(Ue(We),l=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fe&&At!==null&&(r.mode&1)!==0&&(r.flags&128)===0)gd(),Un(),r.flags|=98560,h=!1;else if(h=Wi(r),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[ir]=r}else Un(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;wt(r),h=!1}else Jt!==null&&(Sl(Jt),Jt=null),h=!0;if(!h)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=i,r):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(We.current&1)!==0?it===0&&(it=3):Tl())),r.updateQueue!==null&&(r.flags|=4),wt(r),null);case 4:return Vn(),fl(e,r),e===null&&As(r.stateNode.containerInfo),wt(r),null;case 10:return Ba(r.type._context),wt(r),null;case 17:return Et(r.type)&&Ui(),wt(r),null;case 19:if(Ue(We),h=r.memoizedState,h===null)return wt(r),null;if(l=(r.flags&128)!==0,y=h.rendering,y===null)if(l)Ws(h,!1);else{if(it!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(y=Yi(e),y!==null){for(r.flags|=128,Ws(h,!1),l=y.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),r.subtreeFlags=0,l=i,i=r.child;i!==null;)h=i,e=l,h.flags&=14680066,y=h.alternate,y===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=y.childLanes,h.lanes=y.lanes,h.child=y.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=y.memoizedProps,h.memoizedState=y.memoizedState,h.updateQueue=y.updateQueue,h.type=y.type,e=y.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return $e(We,We.current&1|2),r.child}e=e.sibling}h.tail!==null&&Xe()>Kn&&(r.flags|=128,l=!0,Ws(h,!1),r.lanes=4194304)}else{if(!l)if(e=Yi(y),e!==null){if(r.flags|=128,l=!0,i=e.updateQueue,i!==null&&(r.updateQueue=i,r.flags|=4),Ws(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!Fe)return wt(r),null}else 2*Xe()-h.renderingStartTime>Kn&&i!==1073741824&&(r.flags|=128,l=!0,Ws(h,!1),r.lanes=4194304);h.isBackwards?(y.sibling=r.child,r.child=y):(i=h.last,i!==null?i.sibling=y:r.child=y,h.last=y)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=Xe(),r.sibling=null,i=We.current,$e(We,l?i&1|2:i&1),r):(wt(r),null);case 22:case 23:return Cl(),l=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(r.flags|=8192),l&&(r.mode&1)!==0?(Ot&1073741824)!==0&&(wt(r),r.subtreeFlags&6&&(r.flags|=8192)):wt(r),null;case 24:return null;case 25:return null}throw Error(s(156,r.tag))}function dy(e,r){switch(Da(r),r.tag){case 1:return Et(r.type)&&Ui(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Vn(),Ue(St),Ue(yt),Ga(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return Ha(r),null;case 13:if(Ue(We),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Un()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return Ue(We),null;case 4:return Vn(),null;case 10:return Ba(r.type._context),null;case 22:case 23:return Cl(),null;case 24:return null;default:return null}}var io=!1,_t=!1,hy=typeof WeakSet=="function"?WeakSet:Set,te=null;function qn(e,r){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){Ge(e,r,l)}else i.current=null}function pl(e,r,i){try{i()}catch(l){Ge(e,r,l)}}var ph=!1;function fy(e,r){if(Ca=Ei,e=Hu(),va(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var u=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var y=0,v=-1,x=-1,I=0,B=0,F=e,U=null;t:for(;;){for(var X;F!==i||u!==0&&F.nodeType!==3||(v=y+u),F!==h||l!==0&&F.nodeType!==3||(x=y+l),F.nodeType===3&&(y+=F.nodeValue.length),(X=F.firstChild)!==null;)U=F,F=X;for(;;){if(F===e)break t;if(U===i&&++I===u&&(v=y),U===h&&++B===l&&(x=y),(X=F.nextSibling)!==null)break;F=U,U=F.parentNode}F=X}i=v===-1||x===-1?null:{start:v,end:x}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ta={focusedElem:e,selectionRange:i},Ei=!1,te=r;te!==null;)if(r=te,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,te=e;else for(;te!==null;){r=te;try{var re=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(re!==null){var ie=re.memoizedProps,Ze=re.memoizedState,T=r.stateNode,k=T.getSnapshotBeforeUpdate(r.elementType===r.type?ie:Yt(r.type,ie),Ze);T.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var j=r.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(W){Ge(r,r.return,W)}if(e=r.sibling,e!==null){e.return=r.return,te=e;break}te=r.return}return re=ph,ph=!1,re}function qs(e,r,i){var l=r.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&e)===e){var h=u.destroy;u.destroy=void 0,h!==void 0&&pl(r,i,h)}u=u.next}while(u!==l)}}function oo(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==r)}}function ml(e){var r=e.ref;if(r!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof r=="function"?r(e):r.current=e}}function mh(e){var r=e.alternate;r!==null&&(e.alternate=null,mh(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[ir],delete r[Ps],delete r[Ia],delete r[Jg],delete r[Yg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gh(e){return e.tag===5||e.tag===3||e.tag===4}function yh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gl(e,r,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?i.nodeType===8?i.parentNode.insertBefore(e,r):i.insertBefore(e,r):(i.nodeType===8?(r=i.parentNode,r.insertBefore(e,i)):(r=i,r.appendChild(e)),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Li));else if(l!==4&&(e=e.child,e!==null))for(gl(e,r,i),e=e.sibling;e!==null;)gl(e,r,i),e=e.sibling}function yl(e,r,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?i.insertBefore(e,r):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(yl(e,r,i),e=e.sibling;e!==null;)yl(e,r,i),e=e.sibling}var ht=null,Qt=!1;function Dr(e,r,i){for(i=i.child;i!==null;)vh(e,r,i),i=i.sibling}function vh(e,r,i){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(wi,i)}catch{}switch(i.tag){case 5:_t||qn(i,r);case 6:var l=ht,u=Qt;ht=null,Dr(e,r,i),ht=l,Qt=u,ht!==null&&(Qt?(e=ht,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):ht.removeChild(i.stateNode));break;case 18:ht!==null&&(Qt?(e=ht,i=i.stateNode,e.nodeType===8?Ra(e.parentNode,i):e.nodeType===1&&Ra(e,i),ks(e)):Ra(ht,i.stateNode));break;case 4:l=ht,u=Qt,ht=i.stateNode.containerInfo,Qt=!0,Dr(e,r,i),ht=l,Qt=u;break;case 0:case 11:case 14:case 15:if(!_t&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){u=l=l.next;do{var h=u,y=h.destroy;h=h.tag,y!==void 0&&((h&2)!==0||(h&4)!==0)&&pl(i,r,y),u=u.next}while(u!==l)}Dr(e,r,i);break;case 1:if(!_t&&(qn(i,r),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(v){Ge(i,r,v)}Dr(e,r,i);break;case 21:Dr(e,r,i);break;case 22:i.mode&1?(_t=(l=_t)||i.memoizedState!==null,Dr(e,r,i),_t=l):Dr(e,r,i);break;default:Dr(e,r,i)}}function wh(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new hy),r.forEach(function(l){var u=xy.bind(null,e,l);i.has(l)||(i.add(l),l.then(u,u))})}}function Xt(e,r){var i=r.deletions;if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];try{var h=e,y=r,v=y;e:for(;v!==null;){switch(v.tag){case 5:ht=v.stateNode,Qt=!1;break e;case 3:ht=v.stateNode.containerInfo,Qt=!0;break e;case 4:ht=v.stateNode.containerInfo,Qt=!0;break e}v=v.return}if(ht===null)throw Error(s(160));vh(h,y,u),ht=null,Qt=!1;var x=u.alternate;x!==null&&(x.return=null),u.return=null}catch(I){Ge(u,r,I)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)_h(r,e),r=r.sibling}function _h(e,r){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(r,e),lr(e),l&4){try{qs(3,e,e.return),oo(3,e)}catch(ie){Ge(e,e.return,ie)}try{qs(5,e,e.return)}catch(ie){Ge(e,e.return,ie)}}break;case 1:Xt(r,e),lr(e),l&512&&i!==null&&qn(i,i.return);break;case 5:if(Xt(r,e),lr(e),l&512&&i!==null&&qn(i,i.return),e.flags&32){var u=e.stateNode;try{hs(u,"")}catch(ie){Ge(e,e.return,ie)}}if(l&4&&(u=e.stateNode,u!=null)){var h=e.memoizedProps,y=i!==null?i.memoizedProps:h,v=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{v==="input"&&h.type==="radio"&&h.name!=null&&ke(u,h),Go(v,y);var I=Go(v,h);for(y=0;y<x.length;y+=2){var B=x[y],F=x[y+1];B==="style"?ru(u,F):B==="dangerouslySetInnerHTML"?eu(u,F):B==="children"?hs(u,F):$(u,B,F,I)}switch(v){case"input":Te(u,h);break;case"textarea":Mt(u,h);break;case"select":var U=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!h.multiple;var X=h.value;X!=null?nt(u,!!h.multiple,X,!1):U!==!!h.multiple&&(h.defaultValue!=null?nt(u,!!h.multiple,h.defaultValue,!0):nt(u,!!h.multiple,h.multiple?[]:"",!1))}u[Ps]=h}catch(ie){Ge(e,e.return,ie)}}break;case 6:if(Xt(r,e),lr(e),l&4){if(e.stateNode===null)throw Error(s(162));u=e.stateNode,h=e.memoizedProps;try{u.nodeValue=h}catch(ie){Ge(e,e.return,ie)}}break;case 3:if(Xt(r,e),lr(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{ks(r.containerInfo)}catch(ie){Ge(e,e.return,ie)}break;case 4:Xt(r,e),lr(e);break;case 13:Xt(r,e),lr(e),u=e.child,u.flags&8192&&(h=u.memoizedState!==null,u.stateNode.isHidden=h,!h||u.alternate!==null&&u.alternate.memoizedState!==null||(_l=Xe())),l&4&&wh(e);break;case 22:if(B=i!==null&&i.memoizedState!==null,e.mode&1?(_t=(I=_t)||B,Xt(r,e),_t=I):Xt(r,e),lr(e),l&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!B&&(e.mode&1)!==0)for(te=e,B=e.child;B!==null;){for(F=te=B;te!==null;){switch(U=te,X=U.child,U.tag){case 0:case 11:case 14:case 15:qs(4,U,U.return);break;case 1:qn(U,U.return);var re=U.stateNode;if(typeof re.componentWillUnmount=="function"){l=U,i=U.return;try{r=l,re.props=r.memoizedProps,re.state=r.memoizedState,re.componentWillUnmount()}catch(ie){Ge(l,i,ie)}}break;case 5:qn(U,U.return);break;case 22:if(U.memoizedState!==null){kh(F);continue}}X!==null?(X.return=U,te=X):kh(F)}B=B.sibling}e:for(B=null,F=e;;){if(F.tag===5){if(B===null){B=F;try{u=F.stateNode,I?(h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(v=F.stateNode,x=F.memoizedProps.style,y=x!=null&&x.hasOwnProperty("display")?x.display:null,v.style.display=tu("display",y))}catch(ie){Ge(e,e.return,ie)}}}else if(F.tag===6){if(B===null)try{F.stateNode.nodeValue=I?"":F.memoizedProps}catch(ie){Ge(e,e.return,ie)}}else if((F.tag!==22&&F.tag!==23||F.memoizedState===null||F===e)&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===e)break e;for(;F.sibling===null;){if(F.return===null||F.return===e)break e;B===F&&(B=null),F=F.return}B===F&&(B=null),F.sibling.return=F.return,F=F.sibling}}break;case 19:Xt(r,e),lr(e),l&4&&wh(e);break;case 21:break;default:Xt(r,e),lr(e)}}function lr(e){var r=e.flags;if(r&2){try{e:{for(var i=e.return;i!==null;){if(gh(i)){var l=i;break e}i=i.return}throw Error(s(160))}switch(l.tag){case 5:var u=l.stateNode;l.flags&32&&(hs(u,""),l.flags&=-33);var h=yh(e);yl(e,h,u);break;case 3:case 4:var y=l.stateNode.containerInfo,v=yh(e);gl(e,v,y);break;default:throw Error(s(161))}}catch(x){Ge(e,e.return,x)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function py(e,r,i){te=e,bh(e)}function bh(e,r,i){for(var l=(e.mode&1)!==0;te!==null;){var u=te,h=u.child;if(u.tag===22&&l){var y=u.memoizedState!==null||io;if(!y){var v=u.alternate,x=v!==null&&v.memoizedState!==null||_t;v=io;var I=_t;if(io=y,(_t=x)&&!I)for(te=u;te!==null;)y=te,x=y.child,y.tag===22&&y.memoizedState!==null?Sh(u):x!==null?(x.return=y,te=x):Sh(u);for(;h!==null;)te=h,bh(h),h=h.sibling;te=u,io=v,_t=I}xh(e)}else(u.subtreeFlags&8772)!==0&&h!==null?(h.return=u,te=h):xh(e)}}function xh(e){for(;te!==null;){var r=te;if((r.flags&8772)!==0){var i=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:_t||oo(5,r);break;case 1:var l=r.stateNode;if(r.flags&4&&!_t)if(i===null)l.componentDidMount();else{var u=r.elementType===r.type?i.memoizedProps:Yt(r.type,i.memoizedProps);l.componentDidUpdate(u,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var h=r.updateQueue;h!==null&&kd(r,h,l);break;case 3:var y=r.updateQueue;if(y!==null){if(i=null,r.child!==null)switch(r.child.tag){case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}kd(r,y,i)}break;case 5:var v=r.stateNode;if(i===null&&r.flags&4){i=v;var x=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&i.focus();break;case"img":x.src&&(i.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var I=r.alternate;if(I!==null){var B=I.memoizedState;if(B!==null){var F=B.dehydrated;F!==null&&ks(F)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}_t||r.flags&512&&ml(r)}catch(U){Ge(r,r.return,U)}}if(r===e){te=null;break}if(i=r.sibling,i!==null){i.return=r.return,te=i;break}te=r.return}}function kh(e){for(;te!==null;){var r=te;if(r===e){te=null;break}var i=r.sibling;if(i!==null){i.return=r.return,te=i;break}te=r.return}}function Sh(e){for(;te!==null;){var r=te;try{switch(r.tag){case 0:case 11:case 15:var i=r.return;try{oo(4,r)}catch(x){Ge(r,i,x)}break;case 1:var l=r.stateNode;if(typeof l.componentDidMount=="function"){var u=r.return;try{l.componentDidMount()}catch(x){Ge(r,u,x)}}var h=r.return;try{ml(r)}catch(x){Ge(r,h,x)}break;case 5:var y=r.return;try{ml(r)}catch(x){Ge(r,y,x)}}}catch(x){Ge(r,r.return,x)}if(r===e){te=null;break}var v=r.sibling;if(v!==null){v.return=r.return,te=v;break}te=r.return}}var my=Math.ceil,ao=q.ReactCurrentDispatcher,vl=q.ReactCurrentOwner,Wt=q.ReactCurrentBatchConfig,je=0,ct=null,tt=null,ft=0,Ot=0,Hn=Rr(0),it=0,Hs=null,sn=0,lo=0,wl=0,Ks=null,Tt=null,_l=0,Kn=1/0,gr=null,co=!1,bl=null,$r=null,uo=!1,Lr=null,ho=0,Gs=0,xl=null,fo=-1,po=0;function xt(){return(je&6)!==0?Xe():fo!==-1?fo:fo=Xe()}function Mr(e){return(e.mode&1)===0?1:(je&2)!==0&&ft!==0?ft&-ft:Xg.transition!==null?(po===0&&(po=yu()),po):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:Cu(e.type)),e)}function Zt(e,r,i,l){if(50<Gs)throw Gs=0,xl=null,Error(s(185));vs(e,i,l),((je&2)===0||e!==ct)&&(e===ct&&((je&2)===0&&(lo|=i),it===4&&Ur(e,ft)),Nt(e,l),i===1&&je===0&&(r.mode&1)===0&&(Kn=Xe()+500,Bi&&Ar()))}function Nt(e,r){var i=e.callbackNode;Xm(e,r);var l=xi(e,e===ct?ft:0);if(l===0)i!==null&&pu(i),e.callbackNode=null,e.callbackPriority=0;else if(r=l&-l,e.callbackPriority!==r){if(i!=null&&pu(i),r===1)e.tag===0?Qg(Ch.bind(null,e)):dd(Ch.bind(null,e)),Kg(function(){(je&6)===0&&Ar()}),i=null;else{switch(vu(l)){case 1:i=ta;break;case 4:i=mu;break;case 16:i=vi;break;case 536870912:i=gu;break;default:i=vi}i=Ph(i,Eh.bind(null,e))}e.callbackPriority=r,e.callbackNode=i}}function Eh(e,r){if(fo=-1,po=0,(je&6)!==0)throw Error(s(327));var i=e.callbackNode;if(Gn()&&e.callbackNode!==i)return null;var l=xi(e,e===ct?ft:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||r)r=mo(e,l);else{r=l;var u=je;je|=2;var h=Nh();(ct!==e||ft!==r)&&(gr=null,Kn=Xe()+500,an(e,r));do try{vy();break}catch(v){Th(e,v)}while(!0);za(),ao.current=h,je=u,tt!==null?r=0:(ct=null,ft=0,r=it)}if(r!==0){if(r===2&&(u=ra(e),u!==0&&(l=u,r=kl(e,u))),r===1)throw i=Hs,an(e,0),Ur(e,l),Nt(e,Xe()),i;if(r===6)Ur(e,l);else{if(u=e.current.alternate,(l&30)===0&&!gy(u)&&(r=mo(e,l),r===2&&(h=ra(e),h!==0&&(l=h,r=kl(e,h))),r===1))throw i=Hs,an(e,0),Ur(e,l),Nt(e,Xe()),i;switch(e.finishedWork=u,e.finishedLanes=l,r){case 0:case 1:throw Error(s(345));case 2:ln(e,Tt,gr);break;case 3:if(Ur(e,l),(l&130023424)===l&&(r=_l+500-Xe(),10<r)){if(xi(e,0)!==0)break;if(u=e.suspendedLanes,(u&l)!==l){xt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=ja(ln.bind(null,e,Tt,gr),r);break}ln(e,Tt,gr);break;case 4:if(Ur(e,l),(l&4194240)===l)break;for(r=e.eventTimes,u=-1;0<l;){var y=31-Kt(l);h=1<<y,y=r[y],y>u&&(u=y),l&=~h}if(l=u,l=Xe()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*my(l/1960))-l,10<l){e.timeoutHandle=ja(ln.bind(null,e,Tt,gr),l);break}ln(e,Tt,gr);break;case 5:ln(e,Tt,gr);break;default:throw Error(s(329))}}}return Nt(e,Xe()),e.callbackNode===i?Eh.bind(null,e):null}function kl(e,r){var i=Ks;return e.current.memoizedState.isDehydrated&&(an(e,r).flags|=256),e=mo(e,r),e!==2&&(r=Tt,Tt=i,r!==null&&Sl(r)),e}function Sl(e){Tt===null?Tt=e:Tt.push.apply(Tt,e)}function gy(e){for(var r=e;;){if(r.flags&16384){var i=r.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var u=i[l],h=u.getSnapshot;u=u.value;try{if(!Gt(h(),u))return!1}catch{return!1}}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ur(e,r){for(r&=~wl,r&=~lo,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var i=31-Kt(r),l=1<<i;e[i]=-1,r&=~l}}function Ch(e){if((je&6)!==0)throw Error(s(327));Gn();var r=xi(e,0);if((r&1)===0)return Nt(e,Xe()),null;var i=mo(e,r);if(e.tag!==0&&i===2){var l=ra(e);l!==0&&(r=l,i=kl(e,l))}if(i===1)throw i=Hs,an(e,0),Ur(e,r),Nt(e,Xe()),i;if(i===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,ln(e,Tt,gr),Nt(e,Xe()),null}function El(e,r){var i=je;je|=1;try{return e(r)}finally{je=i,je===0&&(Kn=Xe()+500,Bi&&Ar())}}function on(e){Lr!==null&&Lr.tag===0&&(je&6)===0&&Gn();var r=je;je|=1;var i=Wt.transition,l=Oe;try{if(Wt.transition=null,Oe=1,e)return e()}finally{Oe=l,Wt.transition=i,je=r,(je&6)===0&&Ar()}}function Cl(){Ot=Hn.current,Ue(Hn)}function an(e,r){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Hg(i)),tt!==null)for(i=tt.return;i!==null;){var l=i;switch(Da(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Ui();break;case 3:Vn(),Ue(St),Ue(yt),Ga();break;case 5:Ha(l);break;case 4:Vn();break;case 13:Ue(We);break;case 19:Ue(We);break;case 10:Ba(l.type._context);break;case 22:case 23:Cl()}i=i.return}if(ct=e,tt=e=zr(e.current,null),ft=Ot=r,it=0,Hs=null,wl=lo=sn=0,Tt=Ks=null,tn!==null){for(r=0;r<tn.length;r++)if(i=tn[r],l=i.interleaved,l!==null){i.interleaved=null;var u=l.next,h=i.pending;if(h!==null){var y=h.next;h.next=u,l.next=y}i.pending=l}tn=null}return e}function Th(e,r){do{var i=tt;try{if(za(),Qi.current=to,Xi){for(var l=qe.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Xi=!1}if(nn=0,lt=st=qe=null,zs=!1,Bs=0,vl.current=null,i===null||i.return===null){it=1,Hs=r,tt=null;break}e:{var h=e,y=i.return,v=i,x=r;if(r=ft,v.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var I=x,B=v,F=B.tag;if((B.mode&1)===0&&(F===0||F===11||F===15)){var U=B.alternate;U?(B.updateQueue=U.updateQueue,B.memoizedState=U.memoizedState,B.lanes=U.lanes):(B.updateQueue=null,B.memoizedState=null)}var X=Xd(y);if(X!==null){X.flags&=-257,Zd(X,y,v,h,r),X.mode&1&&Qd(h,I,r),r=X,x=I;var re=r.updateQueue;if(re===null){var ie=new Set;ie.add(x),r.updateQueue=ie}else re.add(x);break e}else{if((r&1)===0){Qd(h,I,r),Tl();break e}x=Error(s(426))}}else if(Fe&&v.mode&1){var Ze=Xd(y);if(Ze!==null){(Ze.flags&65536)===0&&(Ze.flags|=256),Zd(Ze,y,v,h,r),Ma(Wn(x,v));break e}}h=x=Wn(x,v),it!==4&&(it=2),Ks===null?Ks=[h]:Ks.push(h),h=y;do{switch(h.tag){case 3:h.flags|=65536,r&=-r,h.lanes|=r;var T=Jd(h,x,r);xd(h,T);break e;case 1:v=x;var k=h.type,j=h.stateNode;if((h.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&($r===null||!$r.has(j)))){h.flags|=65536,r&=-r,h.lanes|=r;var W=Yd(h,v,r);xd(h,W);break e}}h=h.return}while(h!==null)}Rh(i)}catch(le){r=le,tt===i&&i!==null&&(tt=i=i.return);continue}break}while(!0)}function Nh(){var e=ao.current;return ao.current=to,e===null?to:e}function Tl(){(it===0||it===3||it===2)&&(it=4),ct===null||(sn&268435455)===0&&(lo&268435455)===0||Ur(ct,ft)}function mo(e,r){var i=je;je|=2;var l=Nh();(ct!==e||ft!==r)&&(gr=null,an(e,r));do try{yy();break}catch(u){Th(e,u)}while(!0);if(za(),je=i,ao.current=l,tt!==null)throw Error(s(261));return ct=null,ft=0,it}function yy(){for(;tt!==null;)jh(tt)}function vy(){for(;tt!==null&&!Vm();)jh(tt)}function jh(e){var r=Oh(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,r===null?Rh(e):tt=r,vl.current=null}function Rh(e){var r=e;do{var i=r.alternate;if(e=r.return,(r.flags&32768)===0){if(i=uy(i,r,Ot),i!==null){tt=i;return}}else{if(i=dy(i,r),i!==null){i.flags&=32767,tt=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,tt=null;return}}if(r=r.sibling,r!==null){tt=r;return}tt=r=e}while(r!==null);it===0&&(it=5)}function ln(e,r,i){var l=Oe,u=Wt.transition;try{Wt.transition=null,Oe=1,wy(e,r,i,l)}finally{Wt.transition=u,Oe=l}return null}function wy(e,r,i,l){do Gn();while(Lr!==null);if((je&6)!==0)throw Error(s(327));i=e.finishedWork;var u=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var h=i.lanes|i.childLanes;if(Zm(e,h),e===ct&&(tt=ct=null,ft=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||uo||(uo=!0,Ph(vi,function(){return Gn(),null})),h=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||h){h=Wt.transition,Wt.transition=null;var y=Oe;Oe=1;var v=je;je|=4,vl.current=null,fy(e,i),_h(i,e),Ug(Ta),Ei=!!Ca,Ta=Ca=null,e.current=i,py(i),Wm(),je=v,Oe=y,Wt.transition=h}else e.current=i;if(uo&&(uo=!1,Lr=e,ho=u),h=e.pendingLanes,h===0&&($r=null),Km(i.stateNode),Nt(e,Xe()),r!==null)for(l=e.onRecoverableError,i=0;i<r.length;i++)u=r[i],l(u.value,{componentStack:u.stack,digest:u.digest});if(co)throw co=!1,e=bl,bl=null,e;return(ho&1)!==0&&e.tag!==0&&Gn(),h=e.pendingLanes,(h&1)!==0?e===xl?Gs++:(Gs=0,xl=e):Gs=0,Ar(),null}function Gn(){if(Lr!==null){var e=vu(ho),r=Wt.transition,i=Oe;try{if(Wt.transition=null,Oe=16>e?16:e,Lr===null)var l=!1;else{if(e=Lr,Lr=null,ho=0,(je&6)!==0)throw Error(s(331));var u=je;for(je|=4,te=e.current;te!==null;){var h=te,y=h.child;if((te.flags&16)!==0){var v=h.deletions;if(v!==null){for(var x=0;x<v.length;x++){var I=v[x];for(te=I;te!==null;){var B=te;switch(B.tag){case 0:case 11:case 15:qs(8,B,h)}var F=B.child;if(F!==null)F.return=B,te=F;else for(;te!==null;){B=te;var U=B.sibling,X=B.return;if(mh(B),B===I){te=null;break}if(U!==null){U.return=X,te=U;break}te=X}}}var re=h.alternate;if(re!==null){var ie=re.child;if(ie!==null){re.child=null;do{var Ze=ie.sibling;ie.sibling=null,ie=Ze}while(ie!==null)}}te=h}}if((h.subtreeFlags&2064)!==0&&y!==null)y.return=h,te=y;else e:for(;te!==null;){if(h=te,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:qs(9,h,h.return)}var T=h.sibling;if(T!==null){T.return=h.return,te=T;break e}te=h.return}}var k=e.current;for(te=k;te!==null;){y=te;var j=y.child;if((y.subtreeFlags&2064)!==0&&j!==null)j.return=y,te=j;else e:for(y=k;te!==null;){if(v=te,(v.flags&2048)!==0)try{switch(v.tag){case 0:case 11:case 15:oo(9,v)}}catch(le){Ge(v,v.return,le)}if(v===y){te=null;break e}var W=v.sibling;if(W!==null){W.return=v.return,te=W;break e}te=v.return}}if(je=u,Ar(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(wi,e)}catch{}l=!0}return l}finally{Oe=i,Wt.transition=r}}return!1}function Ih(e,r,i){r=Wn(i,r),r=Jd(e,r,1),e=Pr(e,r,1),r=xt(),e!==null&&(vs(e,1,r),Nt(e,r))}function Ge(e,r,i){if(e.tag===3)Ih(e,e,i);else for(;r!==null;){if(r.tag===3){Ih(r,e,i);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&($r===null||!$r.has(l))){e=Wn(i,e),e=Yd(r,e,1),r=Pr(r,e,1),e=xt(),r!==null&&(vs(r,1,e),Nt(r,e));break}}r=r.return}}function _y(e,r,i){var l=e.pingCache;l!==null&&l.delete(r),r=xt(),e.pingedLanes|=e.suspendedLanes&i,ct===e&&(ft&i)===i&&(it===4||it===3&&(ft&130023424)===ft&&500>Xe()-_l?an(e,0):wl|=i),Nt(e,r)}function Ah(e,r){r===0&&((e.mode&1)===0?r=1:(r=bi,bi<<=1,(bi&130023424)===0&&(bi=4194304)));var i=xt();e=fr(e,r),e!==null&&(vs(e,r,i),Nt(e,i))}function by(e){var r=e.memoizedState,i=0;r!==null&&(i=r.retryLane),Ah(e,i)}function xy(e,r){var i=0;switch(e.tag){case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(s(314))}l!==null&&l.delete(r),Ah(e,i)}var Oh;Oh=function(e,r,i){if(e!==null)if(e.memoizedProps!==r.pendingProps||St.current)Ct=!0;else{if((e.lanes&i)===0&&(r.flags&128)===0)return Ct=!1,cy(e,r,i);Ct=(e.flags&131072)!==0}else Ct=!1,Fe&&(r.flags&1048576)!==0&&hd(r,Vi,r.index);switch(r.lanes=0,r.tag){case 2:var l=r.type;so(e,r),e=r.pendingProps;var u=$n(r,yt.current);Fn(r,i),u=Qa(null,r,l,e,u,i);var h=Xa();return r.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Et(l)?(h=!0,zi(r)):h=!1,r.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Wa(r),u.updater=ro,r.stateNode=u,u._reactInternals=r,sl(r,l,e,i),r=ll(null,r,l,!0,h,i)):(r.tag=0,Fe&&h&&Pa(r),bt(null,r,u,i),r=r.child),r;case 16:l=r.elementType;e:{switch(so(e,r),e=r.pendingProps,u=l._init,l=u(l._payload),r.type=l,u=r.tag=Sy(l),e=Yt(l,e),u){case 0:r=al(null,r,l,e,i);break e;case 1:r=ih(null,r,l,e,i);break e;case 11:r=eh(null,r,l,e,i);break e;case 14:r=th(null,r,l,Yt(l.type,e),i);break e}throw Error(s(306,l,""))}return r;case 0:return l=r.type,u=r.pendingProps,u=r.elementType===l?u:Yt(l,u),al(e,r,l,u,i);case 1:return l=r.type,u=r.pendingProps,u=r.elementType===l?u:Yt(l,u),ih(e,r,l,u,i);case 3:e:{if(oh(r),e===null)throw Error(s(387));l=r.pendingProps,h=r.memoizedState,u=h.element,bd(e,r),Ji(r,l,null,i);var y=r.memoizedState;if(l=y.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},r.updateQueue.baseState=h,r.memoizedState=h,r.flags&256){u=Wn(Error(s(423)),r),r=ah(e,r,l,i,u);break e}else if(l!==u){u=Wn(Error(s(424)),r),r=ah(e,r,l,i,u);break e}else for(At=jr(r.stateNode.containerInfo.firstChild),It=r,Fe=!0,Jt=null,i=wd(r,null,l,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Un(),l===u){r=mr(e,r,i);break e}bt(e,r,l,i)}r=r.child}return r;case 5:return Sd(r),e===null&&La(r),l=r.type,u=r.pendingProps,h=e!==null?e.memoizedProps:null,y=u.children,Na(l,u)?y=null:h!==null&&Na(l,h)&&(r.flags|=32),sh(e,r),bt(e,r,y,i),r.child;case 6:return e===null&&La(r),null;case 13:return lh(e,r,i);case 4:return qa(r,r.stateNode.containerInfo),l=r.pendingProps,e===null?r.child=zn(r,null,l,i):bt(e,r,l,i),r.child;case 11:return l=r.type,u=r.pendingProps,u=r.elementType===l?u:Yt(l,u),eh(e,r,l,u,i);case 7:return bt(e,r,r.pendingProps,i),r.child;case 8:return bt(e,r,r.pendingProps.children,i),r.child;case 12:return bt(e,r,r.pendingProps.children,i),r.child;case 10:e:{if(l=r.type._context,u=r.pendingProps,h=r.memoizedProps,y=u.value,$e(Hi,l._currentValue),l._currentValue=y,h!==null)if(Gt(h.value,y)){if(h.children===u.children&&!St.current){r=mr(e,r,i);break e}}else for(h=r.child,h!==null&&(h.return=r);h!==null;){var v=h.dependencies;if(v!==null){y=h.child;for(var x=v.firstContext;x!==null;){if(x.context===l){if(h.tag===1){x=pr(-1,i&-i),x.tag=2;var I=h.updateQueue;if(I!==null){I=I.shared;var B=I.pending;B===null?x.next=x:(x.next=B.next,B.next=x),I.pending=x}}h.lanes|=i,x=h.alternate,x!==null&&(x.lanes|=i),Fa(h.return,i,r),v.lanes|=i;break}x=x.next}}else if(h.tag===10)y=h.type===r.type?null:h.child;else if(h.tag===18){if(y=h.return,y===null)throw Error(s(341));y.lanes|=i,v=y.alternate,v!==null&&(v.lanes|=i),Fa(y,i,r),y=h.sibling}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===r){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}bt(e,r,u.children,i),r=r.child}return r;case 9:return u=r.type,l=r.pendingProps.children,Fn(r,i),u=Ft(u),l=l(u),r.flags|=1,bt(e,r,l,i),r.child;case 14:return l=r.type,u=Yt(l,r.pendingProps),u=Yt(l.type,u),th(e,r,l,u,i);case 15:return rh(e,r,r.type,r.pendingProps,i);case 17:return l=r.type,u=r.pendingProps,u=r.elementType===l?u:Yt(l,u),so(e,r),r.tag=1,Et(l)?(e=!0,zi(r)):e=!1,Fn(r,i),Kd(r,l,u),sl(r,l,u,i),ll(null,r,l,!0,e,i);case 19:return uh(e,r,i);case 22:return nh(e,r,i)}throw Error(s(156,r.tag))};function Ph(e,r){return fu(e,r)}function ky(e,r,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,r,i,l){return new ky(e,r,i,l)}function Nl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sy(e){if(typeof e=="function")return Nl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pe)return 11;if(e===Ve)return 14}return 2}function zr(e,r){var i=e.alternate;return i===null?(i=qt(e.tag,r,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=r,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,r=e.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function go(e,r,i,l,u,h){var y=2;if(l=e,typeof e=="function")Nl(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case ge:return cn(i.children,u,h,r);case Q:y=8,u|=8;break;case Ne:return e=qt(12,i,r,u|2),e.elementType=Ne,e.lanes=h,e;case Ae:return e=qt(13,i,r,u),e.elementType=Ae,e.lanes=h,e;case Qe:return e=qt(19,i,r,u),e.elementType=Qe,e.lanes=h,e;case Ce:return yo(i,u,h,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case et:y=10;break e;case gt:y=9;break e;case Pe:y=11;break e;case Ve:y=14;break e;case Re:y=16,l=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return r=qt(y,i,r,u),r.elementType=e,r.type=l,r.lanes=h,r}function cn(e,r,i,l){return e=qt(7,e,l,r),e.lanes=i,e}function yo(e,r,i,l){return e=qt(22,e,l,r),e.elementType=Ce,e.lanes=i,e.stateNode={isHidden:!1},e}function jl(e,r,i){return e=qt(6,e,null,r),e.lanes=i,e}function Rl(e,r,i){return r=qt(4,e.children!==null?e.children:[],e.key,r),r.lanes=i,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function Ey(e,r,i,l,u){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=na(0),this.expirationTimes=na(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=na(0),this.identifierPrefix=l,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Il(e,r,i,l,u,h,y,v,x){return e=new Ey(e,r,i,v,x),r===1?(r=1,h===!0&&(r|=8)):r=0,h=qt(3,null,null,r),e.current=h,h.stateNode=e,h.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wa(h),e}function Cy(e,r,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:l==null?null:""+l,children:e,containerInfo:r,implementation:i}}function Dh(e){if(!e)return Ir;e=e._reactInternals;e:{if(Yr(e)!==e||e.tag!==1)throw Error(s(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Et(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(s(171))}if(e.tag===1){var i=e.type;if(Et(i))return cd(e,i,r)}return r}function $h(e,r,i,l,u,h,y,v,x){return e=Il(i,l,!0,e,u,h,y,v,x),e.context=Dh(null),i=e.current,l=xt(),u=Mr(i),h=pr(l,u),h.callback=r??null,Pr(i,h,u),e.current.lanes=u,vs(e,u,l),Nt(e,l),e}function vo(e,r,i,l){var u=r.current,h=xt(),y=Mr(u);return i=Dh(i),r.context===null?r.context=i:r.pendingContext=i,r=pr(h,y),r.payload={element:e},l=l===void 0?null:l,l!==null&&(r.callback=l),e=Pr(u,r,y),e!==null&&(Zt(e,u,y,h),Gi(e,u,y)),y}function wo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lh(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<r?i:r}}function Al(e,r){Lh(e,r),(e=e.alternate)&&Lh(e,r)}function Ty(){return null}var Mh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ol(e){this._internalRoot=e}_o.prototype.render=Ol.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(s(409));vo(e,r,null,null)},_o.prototype.unmount=Ol.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;on(function(){vo(null,e,null,null)}),r[cr]=null}};function _o(e){this._internalRoot=e}_o.prototype.unstable_scheduleHydration=function(e){if(e){var r=bu();e={blockedOn:null,target:e,priority:r};for(var i=0;i<Cr.length&&r!==0&&r<Cr[i].priority;i++);Cr.splice(i,0,e),i===0&&Su(e)}};function Pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uh(){}function Ny(e,r,i,l,u){if(u){if(typeof l=="function"){var h=l;l=function(){var I=wo(y);h.call(I)}}var y=$h(r,l,e,0,null,!1,!1,"",Uh);return e._reactRootContainer=y,e[cr]=y.current,As(e.nodeType===8?e.parentNode:e),on(),y}for(;u=e.lastChild;)e.removeChild(u);if(typeof l=="function"){var v=l;l=function(){var I=wo(x);v.call(I)}}var x=Il(e,0,!1,null,null,!1,!1,"",Uh);return e._reactRootContainer=x,e[cr]=x.current,As(e.nodeType===8?e.parentNode:e),on(function(){vo(r,x,i,l)}),x}function xo(e,r,i,l,u){var h=i._reactRootContainer;if(h){var y=h;if(typeof u=="function"){var v=u;u=function(){var x=wo(y);v.call(x)}}vo(r,y,e,u)}else y=Ny(i,r,e,u,l);return wo(y)}wu=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var i=ys(r.pendingLanes);i!==0&&(sa(r,i|1),Nt(r,Xe()),(je&6)===0&&(Kn=Xe()+500,Ar()))}break;case 13:on(function(){var l=fr(e,1);if(l!==null){var u=xt();Zt(l,e,1,u)}}),Al(e,1)}},ia=function(e){if(e.tag===13){var r=fr(e,134217728);if(r!==null){var i=xt();Zt(r,e,134217728,i)}Al(e,134217728)}},_u=function(e){if(e.tag===13){var r=Mr(e),i=fr(e,r);if(i!==null){var l=xt();Zt(i,e,r,l)}Al(e,r)}},bu=function(){return Oe},xu=function(e,r){var i=Oe;try{return Oe=e,r()}finally{Oe=i}},Qo=function(e,r,i){switch(r){case"input":if(Te(e,i),r=i.name,i.type==="radio"&&r!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<i.length;r++){var l=i[r];if(l!==e&&l.form===e.form){var u=Mi(l);if(!u)throw Error(s(90));M(l),Te(l,u)}}}break;case"textarea":Mt(e,i);break;case"select":r=i.value,r!=null&&nt(e,!!i.multiple,r,!1)}},ou=El,au=on;var jy={usingClientEntryPoint:!1,Events:[Ds,Pn,Mi,su,iu,El]},Js={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ry={bundleType:Js.bundleType,version:Js.version,rendererPackageName:Js.rendererPackageName,rendererConfig:Js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=du(e),e===null?null:e.stateNode},findFiberByHostInstance:Js.findFiberByHostInstance||Ty,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ko.isDisabled&&ko.supportsFiber)try{wi=ko.inject(Ry),sr=ko}catch{}}return jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jy,jt.createPortal=function(e,r){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pl(r))throw Error(s(200));return Cy(e,r,null,i)},jt.createRoot=function(e,r){if(!Pl(e))throw Error(s(299));var i=!1,l="",u=Mh;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),r=Il(e,1,!1,null,null,i,!1,l,u),e[cr]=r.current,As(e.nodeType===8?e.parentNode:e),new Ol(r)},jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=du(r),e=e===null?null:e.stateNode,e},jt.flushSync=function(e){return on(e)},jt.hydrate=function(e,r,i){if(!bo(r))throw Error(s(200));return xo(null,e,r,!0,i)},jt.hydrateRoot=function(e,r,i){if(!Pl(e))throw Error(s(405));var l=i!=null&&i.hydratedSources||null,u=!1,h="",y=Mh;if(i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),r=$h(r,null,e,1,i??null,u,!1,h,y),e[cr]=r.current,As(e),l)for(e=0;e<l.length;e++)i=l[e],u=i._getVersion,u=u(i._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[i,u]:r.mutableSourceEagerHydrationData.push(i,u);return new _o(r)},jt.render=function(e,r,i){if(!bo(r))throw Error(s(200));return xo(null,e,r,!1,i)},jt.unmountComponentAtNode=function(e){if(!bo(e))throw Error(s(40));return e._reactRootContainer?(on(function(){xo(null,null,e,!1,function(){e._reactRootContainer=null,e[cr]=null})}),!0):!1},jt.unstable_batchedUpdates=El,jt.unstable_renderSubtreeIntoContainer=function(e,r,i,l){if(!bo(i))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return xo(e,r,i,!1,l)},jt.version="18.3.1-next-f1338f8080-20240426",jt}var Kh;function Xf(){if(Kh)return Ll.exports;Kh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ll.exports=My(),Ll.exports}var Gh;function Uy(){if(Gh)return So;Gh=1;var n=Xf();return So.createRoot=n.createRoot,So.hydrateRoot=n.hydrateRoot,So}var zy=Uy(),A=Ac();const Qs=Ay(A);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fy=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,o)=>o?o.toUpperCase():s.toLowerCase()),Jh=n=>{const t=Fy(n);return t.charAt(0).toUpperCase()+t.slice(1)},Zf=(...n)=>n.filter((t,s,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===s).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=A.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:c,iconNode:d,...f},p)=>A.createElement("svg",{ref:p,...Vy,width:t,height:t,stroke:n,strokeWidth:o?Number(s)*24/Number(t):s,className:Zf("lucide",a),...f},[...d.map(([g,w])=>A.createElement(g,w)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(n,t)=>{const s=A.forwardRef(({className:o,...a},c)=>A.createElement(Wy,{ref:c,iconNode:t,className:Zf(`lucide-${By(Jh(n))}`,`lucide-${n}`,o),...a}));return s.displayName=Jh(n),s};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],as=De("arrow-left",qy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ep=De("bell",Hy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Gy=De("camera",Ky);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Yh=De("check-check",Jy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hi=De("check",Yy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Xy=De("copy",Qy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ev=De("download",Zy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Qh=De("ellipsis-vertical",tv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],nv=De("external-link",rv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],iv=De("file-text",sv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],av=De("image",ov);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cv=De("lock",lv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Uo=De("message-circle",uv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],hv=De("message-square",dv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],pv=De("paperclip",fv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],gv=De("pause",mv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],vv=De("play",yv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],tp=De("refresh-cw",wv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],rp=De("reply",_v);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],np=De("search",bv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],kv=De("send",xv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ev=De("trash-2",Sv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Xh=De("user-plus",Cv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sp=De("user",Tv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],lc=De("users",Nv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Rv=De("video",jv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fi=De("x",Iv);function Zh(n,t){if(typeof n=="function")return n(t);n!=null&&(n.current=t)}function ip(...n){return t=>{let s=!1;const o=n.map(a=>{const c=Zh(a,t);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let a=0;a<o.length;a++){const c=o[a];typeof c=="function"?c():Zh(n[a],null)}}}}function op(...n){return A.useCallback(ip(...n),n)}var Oc=A.forwardRef((n,t)=>{const{children:s,...o}=n,a=A.Children.toArray(s),c=a.find(Ov);if(c){const d=c.props.children,f=a.map(p=>p===c?A.Children.count(d)>1?A.Children.only(null):A.isValidElement(d)?d.props.children:null:p);return m.jsx(cc,{...o,ref:t,children:A.isValidElement(d)?A.cloneElement(d,void 0,f):null})}return m.jsx(cc,{...o,ref:t,children:s})});Oc.displayName="Slot";var cc=A.forwardRef((n,t)=>{const{children:s,...o}=n;if(A.isValidElement(s)){const a=Dv(s),c=Pv(o,s.props);return s.type!==A.Fragment&&(c.ref=t?ip(t,a):a),A.cloneElement(s,c)}return A.Children.count(s)>1?A.Children.only(null):null});cc.displayName="SlotClone";var Av=({children:n})=>m.jsx(m.Fragment,{children:n});function Ov(n){return A.isValidElement(n)&&n.type===Av}function Pv(n,t){const s={...t};for(const o in t){const a=n[o],c=t[o];/^on[A-Z]/.test(o)?a&&c?s[o]=(...f)=>{c(...f),a(...f)}:a&&(s[o]=a):o==="style"?s[o]={...a,...c}:o==="className"&&(s[o]=[a,c].filter(Boolean).join(" "))}return{...n,...s}}function Dv(n){var o,a;let t=(o=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:o.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?n.ref:(t=(a=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?n.props.ref:n.props.ref||n.ref)}function ap(n){var t,s,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(t=0;t<a;t++)n[t]&&(s=ap(n[t]))&&(o&&(o+=" "),o+=s)}else for(s in n)n[s]&&(o&&(o+=" "),o+=s);return o}function lp(){for(var n,t,s=0,o="",a=arguments.length;s<a;s++)(n=arguments[s])&&(t=ap(n))&&(o&&(o+=" "),o+=t);return o}const ef=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,tf=lp,$v=(n,t)=>s=>{var o;if((t==null?void 0:t.variants)==null)return tf(n,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:a,defaultVariants:c}=t,d=Object.keys(a).map(g=>{const w=s==null?void 0:s[g],_=c==null?void 0:c[g];if(w===null)return null;const b=ef(w)||ef(_);return a[g][b]}),f=s&&Object.entries(s).reduce((g,w)=>{let[_,b]=w;return b===void 0||(g[_]=b),g},{}),p=t==null||(o=t.compoundVariants)===null||o===void 0?void 0:o.reduce((g,w)=>{let{class:_,className:b,...C}=w;return Object.entries(C).every(N=>{let[E,R]=N;return Array.isArray(R)?R.includes({...c,...f}[E]):{...c,...f}[E]===R})?[...g,_,b]:g},[]);return tf(n,d,p,s==null?void 0:s.class,s==null?void 0:s.className)},Pc="-",Lv=n=>{const t=Uv(n),{conflictingClassGroups:s,conflictingClassGroupModifiers:o}=n;return{getClassGroupId:d=>{const f=d.split(Pc);return f[0]===""&&f.length!==1&&f.shift(),cp(f,t)||Mv(d)},getConflictingClassGroupIds:(d,f)=>{const p=s[d]||[];return f&&o[d]?[...p,...o[d]]:p}}},cp=(n,t)=>{var d;if(n.length===0)return t.classGroupId;const s=n[0],o=t.nextPart.get(s),a=o?cp(n.slice(1),o):void 0;if(a)return a;if(t.validators.length===0)return;const c=n.join(Pc);return(d=t.validators.find(({validator:f})=>f(c)))==null?void 0:d.classGroupId},rf=/^\[(.+)\]$/,Mv=n=>{if(rf.test(n)){const t=rf.exec(n)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},Uv=n=>{const{theme:t,classGroups:s}=n,o={nextPart:new Map,validators:[]};for(const a in s)uc(s[a],o,a,t);return o},uc=(n,t,s,o)=>{n.forEach(a=>{if(typeof a=="string"){const c=a===""?t:nf(t,a);c.classGroupId=s;return}if(typeof a=="function"){if(zv(a)){uc(a(o),t,s,o);return}t.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([c,d])=>{uc(d,nf(t,c),s,o)})})},nf=(n,t)=>{let s=n;return t.split(Pc).forEach(o=>{s.nextPart.has(o)||s.nextPart.set(o,{nextPart:new Map,validators:[]}),s=s.nextPart.get(o)}),s},zv=n=>n.isThemeGetter,Bv=n=>{if(n<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,o=new Map;const a=(c,d)=>{s.set(c,d),t++,t>n&&(t=0,o=s,s=new Map)};return{get(c){let d=s.get(c);if(d!==void 0)return d;if((d=o.get(c))!==void 0)return a(c,d),d},set(c,d){s.has(c)?s.set(c,d):a(c,d)}}},dc="!",hc=":",Fv=hc.length,Vv=n=>{const{prefix:t,experimentalParseClassName:s}=n;let o=a=>{const c=[];let d=0,f=0,p=0,g;for(let N=0;N<a.length;N++){let E=a[N];if(d===0&&f===0){if(E===hc){c.push(a.slice(p,N)),p=N+Fv;continue}if(E==="/"){g=N;continue}}E==="["?d++:E==="]"?d--:E==="("?f++:E===")"&&f--}const w=c.length===0?a:a.substring(p),_=Wv(w),b=_!==w,C=g&&g>p?g-p:void 0;return{modifiers:c,hasImportantModifier:b,baseClassName:_,maybePostfixModifierPosition:C}};if(t){const a=t+hc,c=o;o=d=>d.startsWith(a)?c(d.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(s){const a=o;o=c=>s({className:c,parseClassName:a})}return o},Wv=n=>n.endsWith(dc)?n.substring(0,n.length-1):n.startsWith(dc)?n.substring(1):n,qv=n=>{const t=Object.fromEntries(n.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const a=[];let c=[];return o.forEach(d=>{d[0]==="["||t[d]?(a.push(...c.sort(),d),c=[]):c.push(d)}),a.push(...c.sort()),a}},Hv=n=>({cache:Bv(n.cacheSize),parseClassName:Vv(n),sortModifiers:qv(n),...Lv(n)}),Kv=/\s+/,Gv=(n,t)=>{const{parseClassName:s,getClassGroupId:o,getConflictingClassGroupIds:a,sortModifiers:c}=t,d=[],f=n.trim().split(Kv);let p="";for(let g=f.length-1;g>=0;g-=1){const w=f[g],{isExternal:_,modifiers:b,hasImportantModifier:C,baseClassName:N,maybePostfixModifierPosition:E}=s(w);if(_){p=w+(p.length>0?" "+p:p);continue}let R=!!E,D=o(R?N.substring(0,E):N);if(!D){if(!R){p=w+(p.length>0?" "+p:p);continue}if(D=o(N),!D){p=w+(p.length>0?" "+p:p);continue}R=!1}const L=c(b).join(":"),$=C?L+dc:L,q=$+D;if(d.includes(q))continue;d.push(q);const de=a(D,R);for(let Z=0;Z<de.length;++Z){const ge=de[Z];d.push($+ge)}p=w+(p.length>0?" "+p:p)}return p};function Jv(){let n=0,t,s,o="";for(;n<arguments.length;)(t=arguments[n++])&&(s=up(t))&&(o&&(o+=" "),o+=s);return o}const up=n=>{if(typeof n=="string")return n;let t,s="";for(let o=0;o<n.length;o++)n[o]&&(t=up(n[o]))&&(s&&(s+=" "),s+=t);return s};function Yv(n,...t){let s,o,a,c=d;function d(p){const g=t.reduce((w,_)=>_(w),n());return s=Hv(g),o=s.cache.get,a=s.cache.set,c=f,f(p)}function f(p){const g=o(p);if(g)return g;const w=Gv(p,s);return a(p,w),w}return function(){return c(Jv.apply(null,arguments))}}const ot=n=>{const t=s=>s[n]||[];return t.isThemeGetter=!0,t},dp=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,hp=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Qv=/^\d+\/\d+$/,Xv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ew=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tw=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rw=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Jn=n=>Qv.test(n),be=n=>!!n&&!Number.isNaN(Number(n)),Fr=n=>!!n&&Number.isInteger(Number(n)),zl=n=>n.endsWith("%")&&be(n.slice(0,-1)),yr=n=>Xv.test(n),nw=()=>!0,sw=n=>Zv.test(n)&&!ew.test(n),fp=()=>!1,iw=n=>tw.test(n),ow=n=>rw.test(n),aw=n=>!ne(n)&&!se(n),lw=n=>ls(n,gp,fp),ne=n=>dp.test(n),un=n=>ls(n,yp,sw),Bl=n=>ls(n,fw,be),sf=n=>ls(n,pp,fp),cw=n=>ls(n,mp,ow),Eo=n=>ls(n,vp,iw),se=n=>hp.test(n),Xs=n=>cs(n,yp),uw=n=>cs(n,pw),of=n=>cs(n,pp),dw=n=>cs(n,gp),hw=n=>cs(n,mp),Co=n=>cs(n,vp,!0),ls=(n,t,s)=>{const o=dp.exec(n);return o?o[1]?t(o[1]):s(o[2]):!1},cs=(n,t,s=!1)=>{const o=hp.exec(n);return o?o[1]?t(o[1]):s:!1},pp=n=>n==="position"||n==="percentage",mp=n=>n==="image"||n==="url",gp=n=>n==="length"||n==="size"||n==="bg-size",yp=n=>n==="length",fw=n=>n==="number",pw=n=>n==="family-name",vp=n=>n==="shadow",mw=()=>{const n=ot("color"),t=ot("font"),s=ot("text"),o=ot("font-weight"),a=ot("tracking"),c=ot("leading"),d=ot("breakpoint"),f=ot("container"),p=ot("spacing"),g=ot("radius"),w=ot("shadow"),_=ot("inset-shadow"),b=ot("text-shadow"),C=ot("drop-shadow"),N=ot("blur"),E=ot("perspective"),R=ot("aspect"),D=ot("ease"),L=ot("animate"),$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],de=()=>[...q(),se,ne],Z=()=>["auto","hidden","clip","visible","scroll"],ge=()=>["auto","contain","none"],Q=()=>[se,ne,p],Ne=()=>[Jn,"full","auto",...Q()],et=()=>[Fr,"none","subgrid",se,ne],gt=()=>["auto",{span:["full",Fr,se,ne]},Fr,se,ne],Pe=()=>[Fr,"auto",se,ne],Ae=()=>["auto","min","max","fr",se,ne],Qe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ve=()=>["start","end","center","stretch","center-safe","end-safe"],Re=()=>["auto",...Q()],Ce=()=>[Jn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...Q()],O=()=>[n,se,ne],oe=()=>[...q(),of,sf,{position:[se,ne]}],J=()=>["no-repeat",{repeat:["","x","y","space","round"]}],S=()=>["auto","cover","contain",dw,lw,{size:[se,ne]}],P=()=>[zl,Xs,un],ae=()=>["","none","full",g,se,ne],ee=()=>["",be,Xs,un],z=()=>["solid","dashed","dotted","double"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>[be,zl,of,sf],ue=()=>["","none",N,se,ne],xe=()=>["none",be,se,ne],V=()=>["none",be,se,ne],H=()=>[be,se,ne],M=()=>[Jn,"full",...Q()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[yr],breakpoint:[yr],color:[nw],container:[yr],"drop-shadow":[yr],ease:["in","out","in-out"],font:[aw],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[yr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[yr],shadow:[yr],spacing:["px",be],text:[yr],"text-shadow":[yr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Jn,ne,se,R]}],container:["container"],columns:[{columns:[be,ne,se,f]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:de()}],overflow:[{overflow:Z()}],"overflow-x":[{"overflow-x":Z()}],"overflow-y":[{"overflow-y":Z()}],overscroll:[{overscroll:ge()}],"overscroll-x":[{"overscroll-x":ge()}],"overscroll-y":[{"overscroll-y":ge()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Ne()}],"inset-x":[{"inset-x":Ne()}],"inset-y":[{"inset-y":Ne()}],start:[{start:Ne()}],end:[{end:Ne()}],top:[{top:Ne()}],right:[{right:Ne()}],bottom:[{bottom:Ne()}],left:[{left:Ne()}],visibility:["visible","invisible","collapse"],z:[{z:[Fr,"auto",se,ne]}],basis:[{basis:[Jn,"full","auto",f,...Q()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[be,Jn,"auto","initial","none",ne]}],grow:[{grow:["",be,se,ne]}],shrink:[{shrink:["",be,se,ne]}],order:[{order:[Fr,"first","last","none",se,ne]}],"grid-cols":[{"grid-cols":et()}],"col-start-end":[{col:gt()}],"col-start":[{"col-start":Pe()}],"col-end":[{"col-end":Pe()}],"grid-rows":[{"grid-rows":et()}],"row-start-end":[{row:gt()}],"row-start":[{"row-start":Pe()}],"row-end":[{"row-end":Pe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ae()}],"auto-rows":[{"auto-rows":Ae()}],gap:[{gap:Q()}],"gap-x":[{"gap-x":Q()}],"gap-y":[{"gap-y":Q()}],"justify-content":[{justify:[...Qe(),"normal"]}],"justify-items":[{"justify-items":[...Ve(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ve()]}],"align-content":[{content:["normal",...Qe()]}],"align-items":[{items:[...Ve(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ve(),{baseline:["","last"]}]}],"place-content":[{"place-content":Qe()}],"place-items":[{"place-items":[...Ve(),"baseline"]}],"place-self":[{"place-self":["auto",...Ve()]}],p:[{p:Q()}],px:[{px:Q()}],py:[{py:Q()}],ps:[{ps:Q()}],pe:[{pe:Q()}],pt:[{pt:Q()}],pr:[{pr:Q()}],pb:[{pb:Q()}],pl:[{pl:Q()}],m:[{m:Re()}],mx:[{mx:Re()}],my:[{my:Re()}],ms:[{ms:Re()}],me:[{me:Re()}],mt:[{mt:Re()}],mr:[{mr:Re()}],mb:[{mb:Re()}],ml:[{ml:Re()}],"space-x":[{"space-x":Q()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":Q()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ce()}],w:[{w:[f,"screen",...Ce()]}],"min-w":[{"min-w":[f,"screen","none",...Ce()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[d]},...Ce()]}],h:[{h:["screen",...Ce()]}],"min-h":[{"min-h":["screen","none",...Ce()]}],"max-h":[{"max-h":["screen",...Ce()]}],"font-size":[{text:["base",s,Xs,un]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,se,Bl]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",zl,ne]}],"font-family":[{font:[uw,ne,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,se,ne]}],"line-clamp":[{"line-clamp":[be,"none",se,Bl]}],leading:[{leading:[c,...Q()]}],"list-image":[{"list-image":["none",se,ne]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",se,ne]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:[be,"from-font","auto",se,un]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[be,"auto",se,ne]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se,ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se,ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:oe()}],"bg-repeat":[{bg:J()}],"bg-size":[{bg:S()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Fr,se,ne],radial:["",se,ne],conic:[Fr,se,ne]},hw,cw]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:P()}],"gradient-via-pos":[{via:P()}],"gradient-to-pos":[{to:P()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:ae()}],"rounded-s":[{"rounded-s":ae()}],"rounded-e":[{"rounded-e":ae()}],"rounded-t":[{"rounded-t":ae()}],"rounded-r":[{"rounded-r":ae()}],"rounded-b":[{"rounded-b":ae()}],"rounded-l":[{"rounded-l":ae()}],"rounded-ss":[{"rounded-ss":ae()}],"rounded-se":[{"rounded-se":ae()}],"rounded-ee":[{"rounded-ee":ae()}],"rounded-es":[{"rounded-es":ae()}],"rounded-tl":[{"rounded-tl":ae()}],"rounded-tr":[{"rounded-tr":ae()}],"rounded-br":[{"rounded-br":ae()}],"rounded-bl":[{"rounded-bl":ae()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...z(),"hidden","none"]}],"divide-style":[{divide:[...z(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[be,se,ne]}],"outline-w":[{outline:["",be,Xs,un]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",w,Co,Eo]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",_,Co,Eo]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[be,un]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",b,Co,Eo]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[be,se,ne]}],"mix-blend":[{"mix-blend":[...G(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":G()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[be]}],"mask-image-linear-from-pos":[{"mask-linear-from":K()}],"mask-image-linear-to-pos":[{"mask-linear-to":K()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":K()}],"mask-image-t-to-pos":[{"mask-t-to":K()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":K()}],"mask-image-r-to-pos":[{"mask-r-to":K()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":K()}],"mask-image-b-to-pos":[{"mask-b-to":K()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":K()}],"mask-image-l-to-pos":[{"mask-l-to":K()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":K()}],"mask-image-x-to-pos":[{"mask-x-to":K()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":K()}],"mask-image-y-to-pos":[{"mask-y-to":K()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[se,ne]}],"mask-image-radial-from-pos":[{"mask-radial-from":K()}],"mask-image-radial-to-pos":[{"mask-radial-to":K()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":q()}],"mask-image-conic-pos":[{"mask-conic":[be]}],"mask-image-conic-from-pos":[{"mask-conic-from":K()}],"mask-image-conic-to-pos":[{"mask-conic-to":K()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:oe()}],"mask-repeat":[{mask:J()}],"mask-size":[{mask:S()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",se,ne]}],filter:[{filter:["","none",se,ne]}],blur:[{blur:ue()}],brightness:[{brightness:[be,se,ne]}],contrast:[{contrast:[be,se,ne]}],"drop-shadow":[{"drop-shadow":["","none",C,Co,Eo]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",be,se,ne]}],"hue-rotate":[{"hue-rotate":[be,se,ne]}],invert:[{invert:["",be,se,ne]}],saturate:[{saturate:[be,se,ne]}],sepia:[{sepia:["",be,se,ne]}],"backdrop-filter":[{"backdrop-filter":["","none",se,ne]}],"backdrop-blur":[{"backdrop-blur":ue()}],"backdrop-brightness":[{"backdrop-brightness":[be,se,ne]}],"backdrop-contrast":[{"backdrop-contrast":[be,se,ne]}],"backdrop-grayscale":[{"backdrop-grayscale":["",be,se,ne]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[be,se,ne]}],"backdrop-invert":[{"backdrop-invert":["",be,se,ne]}],"backdrop-opacity":[{"backdrop-opacity":[be,se,ne]}],"backdrop-saturate":[{"backdrop-saturate":[be,se,ne]}],"backdrop-sepia":[{"backdrop-sepia":["",be,se,ne]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":Q()}],"border-spacing-x":[{"border-spacing-x":Q()}],"border-spacing-y":[{"border-spacing-y":Q()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",se,ne]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[be,"initial",se,ne]}],ease:[{ease:["linear","initial",D,se,ne]}],delay:[{delay:[be,se,ne]}],animate:[{animate:["none",L,se,ne]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[E,se,ne]}],"perspective-origin":[{"perspective-origin":de()}],rotate:[{rotate:xe()}],"rotate-x":[{"rotate-x":xe()}],"rotate-y":[{"rotate-y":xe()}],"rotate-z":[{"rotate-z":xe()}],scale:[{scale:V()}],"scale-x":[{"scale-x":V()}],"scale-y":[{"scale-y":V()}],"scale-z":[{"scale-z":V()}],"scale-3d":["scale-3d"],skew:[{skew:H()}],"skew-x":[{"skew-x":H()}],"skew-y":[{"skew-y":H()}],transform:[{transform:[se,ne,"","none","gpu","cpu"]}],"transform-origin":[{origin:de()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:M()}],"translate-x":[{"translate-x":M()}],"translate-y":[{"translate-y":M()}],"translate-z":[{"translate-z":M()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se,ne]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Q()}],"scroll-mx":[{"scroll-mx":Q()}],"scroll-my":[{"scroll-my":Q()}],"scroll-ms":[{"scroll-ms":Q()}],"scroll-me":[{"scroll-me":Q()}],"scroll-mt":[{"scroll-mt":Q()}],"scroll-mr":[{"scroll-mr":Q()}],"scroll-mb":[{"scroll-mb":Q()}],"scroll-ml":[{"scroll-ml":Q()}],"scroll-p":[{"scroll-p":Q()}],"scroll-px":[{"scroll-px":Q()}],"scroll-py":[{"scroll-py":Q()}],"scroll-ps":[{"scroll-ps":Q()}],"scroll-pe":[{"scroll-pe":Q()}],"scroll-pt":[{"scroll-pt":Q()}],"scroll-pr":[{"scroll-pr":Q()}],"scroll-pb":[{"scroll-pb":Q()}],"scroll-pl":[{"scroll-pl":Q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se,ne]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[be,Xs,un,Bl]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},gw=Yv(mw);function kn(...n){return gw(lp(n))}const yw=$v("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive cursor-pointer",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Gr({className:n,variant:t,size:s,asChild:o=!1,...a}){const c=o?Oc:"button";return m.jsx(c,{"data-slot":"button",className:kn(yw({variant:t,size:s,className:n})),...a})}function Lt({className:n,type:t,...s}){return m.jsx("input",{type:t,"data-slot":"input",className:kn("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...s})}Xf();var vw=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],us=vw.reduce((n,t)=>{const s=A.forwardRef((o,a)=>{const{asChild:c,...d}=o,f=c?Oc:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(f,{...d,ref:a})});return s.displayName=`Primitive.${t}`,{...n,[t]:s}},{}),ww="Label",wp=A.forwardRef((n,t)=>m.jsx(us.label,{...n,ref:t,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||((a=n.onMouseDown)==null||a.call(n,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));wp.displayName=ww;var _w=wp;function yn({className:n,...t}){return m.jsx(_w,{"data-slot":"label",className:kn("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...t})}function _p(n,t=[]){let s=[];function o(c,d){const f=A.createContext(d),p=s.length;s=[...s,d];const g=_=>{var D;const{scope:b,children:C,...N}=_,E=((D=b==null?void 0:b[n])==null?void 0:D[p])||f,R=A.useMemo(()=>N,Object.values(N));return m.jsx(E.Provider,{value:R,children:C})};g.displayName=c+"Provider";function w(_,b){var E;const C=((E=b==null?void 0:b[n])==null?void 0:E[p])||f,N=A.useContext(C);if(N)return N;if(d!==void 0)return d;throw new Error(`\`${_}\` must be used within \`${c}\``)}return[g,w]}const a=()=>{const c=s.map(d=>A.createContext(d));return function(f){const p=(f==null?void 0:f[n])||c;return A.useMemo(()=>({[`__scope${n}`]:{...f,[n]:p}}),[f,p])}};return a.scopeName=n,[o,bw(a,...t)]}function bw(...n){const t=n[0];if(n.length===1)return t;const s=()=>{const o=n.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(c){const d=o.reduce((f,{useScope:p,scopeName:g})=>{const _=p(c)[`__scope${g}`];return{...f,..._}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return s.scopeName=t.scopeName,s}function af(n,t,{checkForDefaultPrevented:s=!0}={}){return function(a){if(n==null||n(a),s===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Dc(n){const t=A.useRef(n);return A.useEffect(()=>{t.current=n}),A.useMemo(()=>(...s)=>{var o;return(o=t.current)==null?void 0:o.call(t,...s)},[])}function xw({prop:n,defaultProp:t,onChange:s=()=>{}}){const[o,a]=kw({defaultProp:t,onChange:s}),c=n!==void 0,d=c?n:o,f=Dc(s),p=A.useCallback(g=>{if(c){const _=typeof g=="function"?g(n):g;_!==n&&f(_)}else a(g)},[c,n,a,f]);return[d,p]}function kw({defaultProp:n,onChange:t}){const s=A.useState(n),[o]=s,a=A.useRef(o),c=Dc(t);return A.useEffect(()=>{a.current!==o&&(c(o),a.current=o)},[o,a,c]),s}function Sw(n){const t=A.useRef({value:n,previous:n});return A.useMemo(()=>(t.current.value!==n&&(t.current.previous=t.current.value,t.current.value=n),t.current.previous),[n])}var ri=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function Ew(n){const[t,s]=A.useState(void 0);return ri(()=>{if(n){s({width:n.offsetWidth,height:n.offsetHeight});const o=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const c=a[0];let d,f;if("borderBoxSize"in c){const p=c.borderBoxSize,g=Array.isArray(p)?p[0]:p;d=g.inlineSize,f=g.blockSize}else d=n.offsetWidth,f=n.offsetHeight;s({width:d,height:f})});return o.observe(n,{box:"border-box"}),()=>o.unobserve(n)}else s(void 0)},[n]),t}function Cw(n,t){return A.useReducer((s,o)=>t[s][o]??s,n)}var bp=n=>{const{present:t,children:s}=n,o=Tw(t),a=typeof s=="function"?s({present:o.isPresent}):A.Children.only(s),c=op(o.ref,Nw(a));return typeof s=="function"||o.isPresent?A.cloneElement(a,{ref:c}):null};bp.displayName="Presence";function Tw(n){const[t,s]=A.useState(),o=A.useRef({}),a=A.useRef(n),c=A.useRef("none"),d=n?"mounted":"unmounted",[f,p]=Cw(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const g=To(o.current);c.current=f==="mounted"?g:"none"},[f]),ri(()=>{const g=o.current,w=a.current;if(w!==n){const b=c.current,C=To(g);n?p("MOUNT"):C==="none"||(g==null?void 0:g.display)==="none"?p("UNMOUNT"):p(w&&b!==C?"ANIMATION_OUT":"UNMOUNT"),a.current=n}},[n,p]),ri(()=>{if(t){let g;const w=t.ownerDocument.defaultView??window,_=C=>{const E=To(o.current).includes(C.animationName);if(C.target===t&&E&&(p("ANIMATION_END"),!a.current)){const R=t.style.animationFillMode;t.style.animationFillMode="forwards",g=w.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=R)})}},b=C=>{C.target===t&&(c.current=To(o.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",_),t.addEventListener("animationend",_),()=>{w.clearTimeout(g),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",_),t.removeEventListener("animationend",_)}}else p("ANIMATION_END")},[t,p]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:A.useCallback(g=>{g&&(o.current=getComputedStyle(g)),s(g)},[])}}function To(n){return(n==null?void 0:n.animationName)||"none"}function Nw(n){var o,a;let t=(o=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:o.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?n.ref:(t=(a=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?n.props.ref:n.props.ref||n.ref)}var $c="Checkbox",[jw]=_p($c),[Rw,Iw]=jw($c),xp=A.forwardRef((n,t)=>{const{__scopeCheckbox:s,name:o,checked:a,defaultChecked:c,required:d,disabled:f,value:p="on",onCheckedChange:g,form:w,..._}=n,[b,C]=A.useState(null),N=op(t,q=>C(q)),E=A.useRef(!1),R=b?w||!!b.closest("form"):!0,[D=!1,L]=xw({prop:a,defaultProp:c,onChange:g}),$=A.useRef(D);return A.useEffect(()=>{const q=b==null?void 0:b.form;if(q){const de=()=>L($.current);return q.addEventListener("reset",de),()=>q.removeEventListener("reset",de)}},[b,L]),m.jsxs(Rw,{scope:s,state:D,disabled:f,children:[m.jsx(us.button,{type:"button",role:"checkbox","aria-checked":qr(D)?"mixed":D,"aria-required":d,"data-state":Ep(D),"data-disabled":f?"":void 0,disabled:f,value:p,..._,ref:N,onKeyDown:af(n.onKeyDown,q=>{q.key==="Enter"&&q.preventDefault()}),onClick:af(n.onClick,q=>{L(de=>qr(de)?!0:!de),R&&(E.current=q.isPropagationStopped(),E.current||q.stopPropagation())})}),R&&m.jsx(Aw,{control:b,bubbles:!E.current,name:o,value:p,checked:D,required:d,disabled:f,form:w,style:{transform:"translateX(-100%)"},defaultChecked:qr(c)?!1:c})]})});xp.displayName=$c;var kp="CheckboxIndicator",Sp=A.forwardRef((n,t)=>{const{__scopeCheckbox:s,forceMount:o,...a}=n,c=Iw(kp,s);return m.jsx(bp,{present:o||qr(c.state)||c.state===!0,children:m.jsx(us.span,{"data-state":Ep(c.state),"data-disabled":c.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...n.style}})})});Sp.displayName=kp;var Aw=n=>{const{control:t,checked:s,bubbles:o=!0,defaultChecked:a,...c}=n,d=A.useRef(null),f=Sw(s),p=Ew(t);A.useEffect(()=>{const w=d.current,_=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(_,"checked").set;if(f!==s&&C){const N=new Event("click",{bubbles:o});w.indeterminate=qr(s),C.call(w,qr(s)?!1:s),w.dispatchEvent(N)}},[f,s,o]);const g=A.useRef(qr(s)?!1:s);return m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??g.current,...c,tabIndex:-1,ref:d,style:{...n.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function qr(n){return n==="indeterminate"}function Ep(n){return qr(n)?"indeterminate":n?"checked":"unchecked"}var Ow=xp,Pw=Sp;function Dw({className:n,...t}){return m.jsx(Ow,{"data-slot":"checkbox",className:kn("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...t,children:m.jsx(Pw,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:m.jsx(hi,{className:"size-3.5"})})})}function zo(n,t){var s={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&t.indexOf(o)<0&&(s[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(n);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(n,o[a])&&(s[o[a]]=n[o[a]]);return s}function $w(n,t,s,o){function a(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function f(w){try{g(o.next(w))}catch(_){d(_)}}function p(w){try{g(o.throw(w))}catch(_){d(_)}}function g(w){w.done?c(w.value):a(w.value).then(f,p)}g((o=o.apply(n,t||[])).next())})}const Lw=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class Lc extends Error{constructor(t,s="FunctionsError",o){super(t),this.name=s,this.context=o}}class Mw extends Lc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class lf extends Lc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class cf extends Lc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var fc;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(fc||(fc={}));class Uw{constructor(t,{headers:s={},customFetch:o,region:a=fc.Any}={}){this.url=t,this.headers=s,this.region=a,this.fetch=Lw(o)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return $w(this,arguments,void 0,function*(s,o={}){var a;let c,d;try{const{headers:f,method:p,body:g,signal:w,timeout:_}=o;let b={},{region:C}=o;C||(C=this.region);const N=new URL(`${this.url}/${s}`);C&&C!=="any"&&(b["x-region"]=C,N.searchParams.set("forceFunctionRegion",C));let E;g&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",E=g):typeof g=="string"?(b["Content-Type"]="text/plain",E=g):typeof FormData<"u"&&g instanceof FormData?E=g:(b["Content-Type"]="application/json",E=JSON.stringify(g)):E=g;let R=w;_&&(d=new AbortController,c=setTimeout(()=>d.abort(),_),w?(R=d.signal,w.addEventListener("abort",()=>d.abort())):R=d.signal);const D=yield this.fetch(N.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),f),body:E,signal:R}).catch(de=>{throw new Mw(de)}),L=D.headers.get("x-relay-error");if(L&&L==="true")throw new lf(D);if(!D.ok)throw new cf(D);let $=((a=D.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),q;return $==="application/json"?q=yield D.json():$==="application/octet-stream"||$==="application/pdf"?q=yield D.blob():$==="text/event-stream"?q=D:$==="multipart/form-data"?q=yield D.formData():q=yield D.text(),{data:q,error:null,response:D}}catch(f){return{data:null,error:f,response:f instanceof cf||f instanceof lf?f.context:void 0}}finally{c&&clearTimeout(c)}})}}var zw=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},Bw=class{constructor(n){var t,s;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(t=n.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,t){return this.headers=new Headers(this.headers),this.headers.set(n,t),this}then(n,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let d=null,f=null,p=null,g=c.status,w=c.statusText;if(c.ok){var _,b;if(s.method!=="HEAD"){var C;const D=await c.text();D===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((C=s.headers.get("Accept"))===null||C===void 0)&&C.includes("application/vnd.pgrst.plan+text"))?f=D:f=JSON.parse(D))}const E=(_=s.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),R=(b=c.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");E&&R&&R.length>1&&(p=parseInt(R[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,g=406,w="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var N;const E=await c.text();try{d=JSON.parse(E),Array.isArray(d)&&c.status===404&&(f=[],d=null,g=200,w="OK")}catch{c.status===404&&E===""?(g=204,w="No Content"):d={message:E}}if(d&&s.isMaybeSingle&&(!(d==null||(N=d.details)===null||N===void 0)&&N.includes("0 rows"))&&(d=null,g=200,w="OK"),d&&s.shouldThrowOnError)throw new zw(d)}return{error:d,data:f,count:p,status:g,statusText:w}});return this.shouldThrowOnError||(a=a.catch(c=>{var d;let f="";const p=c==null?void 0:c.cause;if(p){var g,w,_,b;const N=(g=p==null?void 0:p.message)!==null&&g!==void 0?g:"",E=(w=p==null?void 0:p.code)!==null&&w!==void 0?w:"";f=`${(_=c==null?void 0:c.name)!==null&&_!==void 0?_:"FetchError"}: ${c==null?void 0:c.message}`,f+=`

Caused by: ${(b=p==null?void 0:p.name)!==null&&b!==void 0?b:"Error"}: ${N}`,E&&(f+=` (${E})`),p!=null&&p.stack&&(f+=`
${p.stack}`)}else{var C;f=(C=c==null?void 0:c.stack)!==null&&C!==void 0?C:""}return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:f,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(n,t)}returns(){return this}overrideTypes(){return this}},Fw=class extends Bw{select(n){let t=!1;const s=(n??"*").split("").map(o=>/\s/.test(o)&&!t?"":(o==='"'&&(t=!t),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:t=!0,nullsFirst:s,foreignTable:o,referencedTable:a=o}={}){const c=a?`${a}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${n}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:t,referencedTable:s=t}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,t,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"offset":`${o}.offset`,c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${n}`),this.url.searchParams.set(c,`${t-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:t=!1,settings:s=!1,buffers:o=!1,wal:a=!1,format:c="text"}={}){var d;const f=[n?"analyze":null,t?"verbose":null,s?"settings":null,o?"buffers":null,a?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const uf=new RegExp("[,()]");var rs=class extends Fw{eq(n,t){return this.url.searchParams.append(n,`eq.${t}`),this}neq(n,t){return this.url.searchParams.append(n,`neq.${t}`),this}gt(n,t){return this.url.searchParams.append(n,`gt.${t}`),this}gte(n,t){return this.url.searchParams.append(n,`gte.${t}`),this}lt(n,t){return this.url.searchParams.append(n,`lt.${t}`),this}lte(n,t){return this.url.searchParams.append(n,`lte.${t}`),this}like(n,t){return this.url.searchParams.append(n,`like.${t}`),this}likeAllOf(n,t){return this.url.searchParams.append(n,`like(all).{${t.join(",")}}`),this}likeAnyOf(n,t){return this.url.searchParams.append(n,`like(any).{${t.join(",")}}`),this}ilike(n,t){return this.url.searchParams.append(n,`ilike.${t}`),this}ilikeAllOf(n,t){return this.url.searchParams.append(n,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(n,t){return this.url.searchParams.append(n,`ilike(any).{${t.join(",")}}`),this}regexMatch(n,t){return this.url.searchParams.append(n,`match.${t}`),this}regexIMatch(n,t){return this.url.searchParams.append(n,`imatch.${t}`),this}is(n,t){return this.url.searchParams.append(n,`is.${t}`),this}isDistinct(n,t){return this.url.searchParams.append(n,`isdistinct.${t}`),this}in(n,t){const s=Array.from(new Set(t)).map(o=>typeof o=="string"&&uf.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,t){const s=Array.from(new Set(t)).map(o=>typeof o=="string"&&uf.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cs.{${t.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(t)}`),this}containedBy(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cd.{${t.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(t)}`),this}rangeGt(n,t){return this.url.searchParams.append(n,`sr.${t}`),this}rangeGte(n,t){return this.url.searchParams.append(n,`nxl.${t}`),this}rangeLt(n,t){return this.url.searchParams.append(n,`sl.${t}`),this}rangeLte(n,t){return this.url.searchParams.append(n,`nxr.${t}`),this}rangeAdjacent(n,t){return this.url.searchParams.append(n,`adj.${t}`),this}overlaps(n,t){return typeof t=="string"?this.url.searchParams.append(n,`ov.${t}`):this.url.searchParams.append(n,`ov.{${t.join(",")}}`),this}textSearch(n,t,{config:s,type:o}={}){let a="";o==="plain"?a="pl":o==="phrase"?a="ph":o==="websearch"&&(a="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${a}fts${c}.${t}`),this}match(n){return Object.entries(n).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(n,t,s){return this.url.searchParams.append(n,`not.${t}.${s}`),this}or(n,{foreignTable:t,referencedTable:s=t}={}){const o=s?`${s}.or`:"or";return this.url.searchParams.append(o,`(${n})`),this}filter(n,t,s){return this.url.searchParams.append(n,`${t}.${s}`),this}},Vw=class{constructor(n,{headers:t={},schema:s,fetch:o}){this.url=n,this.headers=new Headers(t),this.schema=s,this.fetch=o}select(n,t){const{head:s=!1,count:o}=t??{},a=s?"HEAD":"GET";let c=!1;const d=(n??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new rs({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:t,defaultToNull:s=!0}={}){var o;const a="POST";if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const c=n.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new rs({method:a,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(n,{onConflict:t,ignoreDuplicates:s=!1,count:o,defaultToNull:a=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const f=n.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(f.length>0){const p=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new rs({method:d,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(n,{count:t}={}){var s;const o="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new rs({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:n}={}){var t;const s="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new rs({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Ww=class Cp{constructor(t,{headers:s={},schema:o,fetch:a}={}){this.url=t,this.headers=new Headers(s),this.schemaName=o,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Vw(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Cp(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:o=!1,get:a=!1,count:c}={}){var d;let f;const p=new URL(`${this.url}/rpc/${t}`);let g;o||a?(f=o?"HEAD":"GET",Object.entries(s).filter(([_,b])=>b!==void 0).map(([_,b])=>[_,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([_,b])=>{p.searchParams.append(_,b)})):(f="POST",g=s);const w=new Headers(this.headers);return c&&w.set("Prefer",`count=${c}`),new rs({method:f,url:p,headers:w,schema:this.schemaName,body:g,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class qw{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const o=s.node,a=parseInt(o.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const o=this.getWebSocketConstructor();return new o(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Hw="2.89.0",Kw=`realtime-js/${Hw}`,Tp="1.0.0",Gw="2.0.0",df=Tp,pc=1e4,Jw=1e3,Yw=100;var Vr;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Vr||(Vr={}));var at;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(at||(at={}));var rr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(rr||(rr={}));var mc;(function(n){n.websocket="websocket"})(mc||(mc={}));var mn;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(mn||(mn={}));class Qw{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let o=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,o;const a=(o=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var s,o;const a=(o=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&o!==void 0?o:{},d=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(t,s,o){var a,c;const d=t.topic,f=(a=t.ref)!==null&&a!==void 0?a:"",p=(c=t.join_ref)!==null&&c!==void 0?c:"",g=t.payload.event,w=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},_=Object.keys(w).length===0?"":JSON.stringify(w);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+f.length+d.length+g.length+_.length,C=new ArrayBuffer(this.HEADER_LENGTH+b);let N=new DataView(C),E=0;N.setUint8(E++,this.KINDS.userBroadcastPush),N.setUint8(E++,p.length),N.setUint8(E++,f.length),N.setUint8(E++,d.length),N.setUint8(E++,g.length),N.setUint8(E++,_.length),N.setUint8(E++,s),Array.from(p,D=>N.setUint8(E++,D.charCodeAt(0))),Array.from(f,D=>N.setUint8(E++,D.charCodeAt(0))),Array.from(d,D=>N.setUint8(E++,D.charCodeAt(0))),Array.from(g,D=>N.setUint8(E++,D.charCodeAt(0))),Array.from(_,D=>N.setUint8(E++,D.charCodeAt(0)));var R=new Uint8Array(C.byteLength+o.byteLength);return R.set(new Uint8Array(C),0),R.set(new Uint8Array(o),C.byteLength),R.buffer}decode(t,s){if(this._isArrayBuffer(t)){let o=this._binaryDecode(t);return s(o)}if(typeof t=="string"){const o=JSON.parse(t),[a,c,d,f,p]=o;return s({join_ref:a,ref:c,topic:d,event:f,payload:p})}return s({})}_binaryDecode(t){const s=new DataView(t),o=s.getUint8(0),a=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,s,a)}}_decodeUserBroadcast(t,s,o){const a=s.getUint8(1),c=s.getUint8(2),d=s.getUint8(3),f=s.getUint8(4);let p=this.HEADER_LENGTH+4;const g=o.decode(t.slice(p,p+a));p=p+a;const w=o.decode(t.slice(p,p+c));p=p+c;const _=o.decode(t.slice(p,p+d));p=p+d;const b=t.slice(p,t.byteLength),C=f===this.JSON_ENCODING?JSON.parse(o.decode(b)):b,N={type:this.BROADCAST_EVENT,event:w,payload:C};return d>0&&(N.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([o])=>s.includes(o)))}}class Np{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Le||(Le={}));const hf=(n,t,s={})=>{var o;const a=(o=s.skipTypes)!==null&&o!==void 0?o:[];return t?Object.keys(t).reduce((c,d)=>(c[d]=Xw(d,n,t,a),c),{}):{}},Xw=(n,t,s,o)=>{const a=t.find(f=>f.name===n),c=a==null?void 0:a.type,d=s[n];return c&&!o.includes(c)?jp(c,d):gc(d)},jp=(n,t)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return r0(t,s)}switch(n){case Le.bool:return Zw(t);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return e0(t);case Le.json:case Le.jsonb:return t0(t);case Le.timestamp:return n0(t);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return gc(t);default:return gc(t)}},gc=n=>n,Zw=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},e0=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},t0=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},r0=(n,t)=>{if(typeof n!="string")return n;const s=n.length-1,o=n[s];if(n[0]==="{"&&o==="}"){let c;const d=n.slice(1,s);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(f=>jp(t,f))}return n},n0=n=>typeof n=="string"?n.replace(" ","T"):n,Rp=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Fl{constructor(t,s,o={},a=pc){this.channel=t,this.event=s,this.payload=o,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var o;return this._hasReceived(t)&&s((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(o=>o.status===t).forEach(o=>o.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ff;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(ff||(ff={}));class ei{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},a=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ei.syncState(this.state,a,c,d),this.pendingDiffs.forEach(p=>{this.state=ei.syncDiff(this.state,p,c,d)}),this.pendingDiffs=[],f()}),this.channel._on(o.diff,{},a=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ei.syncDiff(this.state,a,c,d),f())}),this.onJoin((a,c,d)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:c,newPresences:d})}),this.onLeave((a,c,d)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,o,a){const c=this.cloneDeep(t),d=this.transformState(s),f={},p={};return this.map(c,(g,w)=>{d[g]||(p[g]=w)}),this.map(d,(g,w)=>{const _=c[g];if(_){const b=w.map(R=>R.presence_ref),C=_.map(R=>R.presence_ref),N=w.filter(R=>C.indexOf(R.presence_ref)<0),E=_.filter(R=>b.indexOf(R.presence_ref)<0);N.length>0&&(f[g]=N),E.length>0&&(p[g]=E)}else f[g]=w}),this.syncDiff(c,{joins:f,leaves:p},o,a)}static syncDiff(t,s,o,a){const{joins:c,leaves:d}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return o||(o=()=>{}),a||(a=()=>{}),this.map(c,(f,p)=>{var g;const w=(g=t[f])!==null&&g!==void 0?g:[];if(t[f]=this.cloneDeep(p),w.length>0){const _=t[f].map(C=>C.presence_ref),b=w.filter(C=>_.indexOf(C.presence_ref)<0);t[f].unshift(...b)}o(f,w,p)}),this.map(d,(f,p)=>{let g=t[f];if(!g)return;const w=p.map(_=>_.presence_ref);g=g.filter(_=>w.indexOf(_.presence_ref)<0),t[f]=g,a(f,g,p),g.length===0&&delete t[f]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(o=>s(o,t[o]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,o)=>{const a=t[o];return"metas"in a?s[o]=a.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[o]=a,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pf;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(pf||(pf={}));var ti;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(ti||(ti={}));var vr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(vr||(vr={}));class is{constructor(t,s={config:{}},o){var a,c;if(this.topic=t,this.params=s,this.socket=o,this.bindings={},this.state=at.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Fl(this,rr.join,this.params,this.timeout),this.rejoinTimer=new Np(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=at.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=at.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rr.reply,{},(d,f)=>{this._trigger(this._replyEventName(f),d)}),this.presence=new ei(this),this.broadcastEndpointURL=Rp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var o,a,c;if(this.socket.isConnected()||this.socket.connect(),this.state==at.closed){const{config:{broadcast:d,presence:f,private:p}}=this.params,g=(a=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(C=>C.filter))!==null&&a!==void 0?a:[],w=!!this.bindings[ti.PRESENCE]&&this.bindings[ti.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,_={},b={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:w}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(C=>t==null?void 0:t(vr.CHANNEL_ERROR,C)),this._onClose(()=>t==null?void 0:t(vr.CLOSED)),this.updateJoinPayload(Object.assign({config:b},_)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:C})=>{var N;if(this.socket._isManualToken()||this.socket.setAuth(),C===void 0){t==null||t(vr.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,R=(N=E==null?void 0:E.length)!==null&&N!==void 0?N:0,D=[];for(let L=0;L<R;L++){const $=E[L],{filter:{event:q,schema:de,table:Z,filter:ge}}=$,Q=C&&C[L];if(Q&&Q.event===q&&is.isFilterValueEqual(Q.schema,de)&&is.isFilterValueEqual(Q.table,Z)&&is.isFilterValueEqual(Q.filter,ge))D.push(Object.assign(Object.assign({},$),{id:Q.id}));else{this.unsubscribe(),this.state=at.errored,t==null||t(vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,t&&t(vr.SUBSCRIBED);return}}).receive("error",C=>{this.state=at.errored,t==null||t(vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(vr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,o){return this.state===at.joined&&t===ti.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,s,o)}async httpSend(t,s,o={}){var a;if(s==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(a=o.timeout)!==null&&a!==void 0?a:this.timeout);if(f.status===202)return{success:!0};let p=f.statusText;try{const g=await f.json();p=g.error||g.message||p}catch{}return Promise.reject(new Error(p))}async send(t,s={}){var o,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:d}=t,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,f,p;const g=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=at.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rr.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(a=>{o=new Fl(this,rr.leave,{},t),o.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=at.closed,this.bindings={}}async _fetchWithTimeout(t,s,o){const a=new AbortController,c=setTimeout(()=>a.abort(),o),d=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(c),d}_push(t,s,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Fl(this,t,s,o);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Yw){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,o){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,o){var a,c;const d=t.toLocaleLowerCase(),{close:f,error:p,leave:g,join:w}=rr;if(o&&[f,p,g,w].indexOf(d)>=0&&o!==this._joinRef())return;let b=this._onMessage(d,s,o);if(s&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(C=>{var N,E,R;return((N=C.filter)===null||N===void 0?void 0:N.event)==="*"||((R=(E=C.filter)===null||E===void 0?void 0:E.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===d}).map(C=>C.callback(b,o)):(c=this.bindings[d])===null||c===void 0||c.filter(C=>{var N,E,R,D,L,$;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in C){const q=C.id,de=(N=C.filter)===null||N===void 0?void 0:N.event;return q&&((E=s.ids)===null||E===void 0?void 0:E.includes(q))&&(de==="*"||(de==null?void 0:de.toLocaleLowerCase())===((R=s.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const q=(L=(D=C==null?void 0:C.filter)===null||D===void 0?void 0:D.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return q==="*"||q===(($=s==null?void 0:s.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===d}).map(C=>{if(typeof b=="object"&&"ids"in b){const N=b.data,{schema:E,table:R,commit_timestamp:D,type:L,errors:$}=N;b=Object.assign(Object.assign({},{schema:E,table:R,commit_timestamp:D,eventType:L,new:{},old:{},errors:$}),this._getPayloadRecords(N))}C.callback(b,o)})}_isClosed(){return this.state===at.closed}_isJoined(){return this.state===at.joined}_isJoining(){return this.state===at.joining}_isLeaving(){return this.state===at.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,o){const a=t.toLocaleLowerCase(),c={type:a,filter:s,callback:o};return this.bindings[a]?this.bindings[a].push(c):this.bindings[a]=[c],this}_off(t,s){const o=t.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(a=>{var c;return!(((c=a.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&is.isEqual(a.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const o in t)if(t[o]!==s[o])return!1;return!0}static isFilterValueEqual(t,s){return(t??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(rr.close,{},t)}_onError(t){this._on(rr.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=at.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=hf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=hf(t.columns,t.old_record)),s}}const Vl=()=>{},No={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},s0=[1e3,2e3,5e3,1e4],i0=1e4,o0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a0{constructor(t,s){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pc,this.transport=null,this.heartbeatIntervalMs=No.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vl,this.ref=0,this.reconnectTimer=null,this.vsn=df,this.logger=Vl,this.conn=null,this.sendBuffer=[],this.serializer=new Qw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...c)=>a(...c):(...c)=>fetch(...c),!(!((o=s==null?void 0:s.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${mc.websocket}`,this.httpEndpoint=Rp(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qw.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,o){this.logger(t,s,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Vr.connecting:return mn.Connecting;case Vr.open:return mn.Open;case Vr.closing:return mn.Closing;default:return mn.Closed}}isConnected(){return this.connectionState()===mn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const o=`realtime:${t}`,a=this.getChannels().find(c=>c.topic===o);if(a)return a;{const c=new is(`realtime:${t}`,s,this);return this.channels.push(c),c}}push(t){const{topic:s,event:o,payload:a,ref:c}=t,d=()=>{this.encode(t,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${s} ${o} (${c})`,a),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Jw,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},No.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(o=>o.topic===t&&(o._isJoined()||o._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:a,payload:c,ref:d}=s,f=d?`(${d})`:"",p=c.status||"";this.log("receive",`${p} ${o} ${a} ${f}`.trim(),c),this.channels.filter(g=>g._isMember(o)).forEach(g=>g._trigger(a,c,d)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Vr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Vr.open||this.conn.readyState===Vr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(rr.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const o=t.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${t}${o}${a}`}_workerObjectUrl(t){let s;if(t)s=t;else{const o=new Blob([o0],{type:"application/javascript"});s=URL.createObjectURL(o)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s,o=!1;if(t)s=t,o=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),s=this.accessTokenValue}else s=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{const c={access_token:s,version:Kw};s&&a.updateJoinPayload(c),a.joinedOnce&&a._isJoined()&&a._push(rr.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(o=>{try{o(s)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(o){this.log("error",`error triggering ${t} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Np(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},No.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,o,a,c,d,f,p,g,w,_,b,C;switch(this.transport=(s=t==null?void 0:t.transport)!==null&&s!==void 0?s:null,this.timeout=(o=t==null?void 0:t.timeout)!==null&&o!==void 0?o:pc,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:No.HEARTBEAT_INTERVAL,this.worker=(c=t==null?void 0:t.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=t==null?void 0:t.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=t==null?void 0:t.heartbeatCallback)!==null&&f!==void 0?f:Vl,this.vsn=(p=t==null?void 0:t.vsn)!==null&&p!==void 0?p:df,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=t==null?void 0:t.reconnectAfterMs)!==null&&g!==void 0?g:(N=>s0[N-1]||i0),this.vsn){case Tp:this.encode=(w=t==null?void 0:t.encode)!==null&&w!==void 0?w:((N,E)=>E(JSON.stringify(N))),this.decode=(_=t==null?void 0:t.decode)!==null&&_!==void 0?_:((N,E)=>E(JSON.parse(N)));break;case Gw:this.encode=(b=t==null?void 0:t.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(C=t==null?void 0:t.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var ni=class extends Error{constructor(n,t){var s;super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((s=t.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function l0(n,t,s){const o=new URL(t,n);if(s)for(const[a,c]of Object.entries(s))c!==void 0&&o.searchParams.set(a,c);return o.toString()}async function c0(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function u0(n){const t=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:o,query:a,body:c,headers:d}){const f=l0(n.baseUrl,o,a),p=await c0(n.auth),g=await t(f,{method:s,headers:{...c?{"Content-Type":"application/json"}:{},...p,...d},body:c?JSON.stringify(c):void 0}),w=await g.text(),_=(g.headers.get("content-type")||"").includes("application/json"),b=_&&w?JSON.parse(w):w;if(!g.ok){const C=_?b:void 0,N=C==null?void 0:C.error;throw new ni((N==null?void 0:N.message)??`Request failed with status ${g.status}`,{status:g.status,icebergType:N==null?void 0:N.type,icebergCode:N==null?void 0:N.code,details:C})}return{status:g.status,headers:g.headers,data:b}}}}function jo(n){return n.join("")}var d0=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){const t=n?{parent:jo(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(n,t){const s={namespace:n.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${jo(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jo(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${jo(n.namespace)}`}),!0}catch(t){if(t instanceof ni&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(s){if(s instanceof ni&&s.status===409)return;throw s}}};function Yn(n){return n.join("")}var h0=class{constructor(n,t="",s){this.client=n,this.prefix=t,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yn(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Yn(n.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(n,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Yn(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Yn(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(n){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yn(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Yn(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(s){if(s instanceof ni&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(s){if(s instanceof ni&&s.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw s}}},f0=class{constructor(n){var o;let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=u0({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(o=n.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new d0(this.client,t),this.tableOps=new h0(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}},Bo=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function He(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var p0=class extends Bo{constructor(n,t,s){super(n),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},yc=class extends Bo{constructor(n,t){super(n),this.name="StorageUnknownError",this.originalError=t}};const Mc=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),m0=()=>Response,vc=n=>{if(Array.isArray(n))return n.map(s=>vc(s));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([s,o])=>{const a=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[a]=vc(o)}),t},g0=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},y0=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function si(n){"@babel/helpers - typeof";return si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(n)}function v0(n,t){if(si(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var o=s.call(n,t);if(si(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function w0(n){var t=v0(n,"string");return si(t)=="symbol"?t:t+""}function _0(n,t,s){return(t=w0(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function mf(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),s.push.apply(s,o)}return s}function ve(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?mf(Object(s),!0).forEach(function(o){_0(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):mf(Object(s)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(s,o))})}return n}const Wl=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},b0=async(n,t,s)=>{n instanceof await m0()&&!(s!=null&&s.noResolveJson)?n.json().then(o=>{const a=n.status||500,c=(o==null?void 0:o.statusCode)||a+"";t(new p0(Wl(o),a,c))}).catch(o=>{t(new yc(Wl(o),o))}):t(new yc(Wl(n),n))},x0=(n,t,s,o)=>{const a={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"||!o?a:(g0(o)?(a.headers=ve({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(o)):a.body=o,t!=null&&t.duplex&&(a.duplex=t.duplex),ve(ve({},a),s))};async function pi(n,t,s,o,a,c){return new Promise((d,f)=>{n(s,x0(t,o,a,c)).then(p=>{if(!p.ok)throw p;return o!=null&&o.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>b0(p,f,o))})}async function ii(n,t,s,o){return pi(n,"GET",t,s,o)}async function tr(n,t,s,o,a){return pi(n,"POST",t,o,a,s)}async function wc(n,t,s,o,a){return pi(n,"PUT",t,o,a,s)}async function k0(n,t,s,o){return pi(n,"HEAD",t,ve(ve({},s),{},{noResolveJson:!0}),o)}async function Uc(n,t,s,o,a){return pi(n,"DELETE",t,o,a,s)}var S0=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t}then(n,t){return this.execute().then(n,t)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(He(t))return{data:null,error:t};throw t}}};let Ip;Ip=Symbol.toStringTag;var E0=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t,this[Ip]="BlobDownloadBuilder",this.promise=null}asStream(){return new S0(this.downloadFn,this.shouldThrowOnError)}then(n,t){return this.getPromise().then(n,t)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(He(t))return{data:null,error:t};throw t}}};const C0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var T0=class{constructor(n,t={},s,o){this.shouldThrowOnError=!1,this.url=n,this.headers=t,this.bucketId=s,this.fetch=Mc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,t,s,o){var a=this;try{let c;const d=ve(ve({},gf),o);let f=ve(ve({},a.headers),n==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),p&&c.append("metadata",a.encodeMetadata(p)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.has("cacheControl")||c.append("cacheControl",d.cacheControl),p&&!c.has("metadata")&&c.append("metadata",a.encodeMetadata(p))):(c=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,p&&(f["x-metadata"]=a.toBase64(a.encodeMetadata(p))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!d.duplex&&(d.duplex="half")),o!=null&&o.headers&&(f=ve(ve({},f),o.headers));const g=a._removeEmptyFolders(t),w=a._getFinalPath(g),_=await(n=="PUT"?wc:tr)(a.fetch,`${a.url}/object/${w}`,c,ve({headers:f},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:g,id:_.Id,fullPath:_.Key},error:null}}catch(c){if(a.shouldThrowOnError)throw c;if(He(c))return{data:null,error:c};throw c}}async upload(n,t,s){return this.uploadOrUpdate("POST",n,t,s)}async uploadToSignedUrl(n,t,s,o){var a=this;const c=a._removeEmptyFolders(n),d=a._getFinalPath(c),f=new URL(a.url+`/object/upload/sign/${d}`);f.searchParams.set("token",t);try{let p;const g=ve({upsert:gf.upsert},o),w=ve(ve({},a.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",g.cacheControl)):(p=s,w["cache-control"]=`max-age=${g.cacheControl}`,w["content-type"]=g.contentType),{data:{path:c,fullPath:(await wc(a.fetch,f.toString(),p,{headers:w})).Key},error:null}}catch(p){if(a.shouldThrowOnError)throw p;if(He(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(n,t){var s=this;try{let o=s._getFinalPath(n);const a=ve({},s.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const c=await tr(s.fetch,`${s.url}/object/upload/sign/${o}`,{},{headers:a}),d=new URL(s.url+c.url),f=d.searchParams.get("token");if(!f)throw new Bo("No token returned by API");return{data:{signedUrl:d.toString(),path:n,token:f},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(He(o))return{data:null,error:o};throw o}}async update(n,t,s){return this.uploadOrUpdate("PUT",n,t,s)}async move(n,t,s){var o=this;try{return{data:await tr(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:o.headers}),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}}async copy(n,t,s){var o=this;try{return{data:{path:(await tr(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:o.headers})).Key},error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}}async createSignedUrl(n,t,s){var o=this;try{let a=o._getFinalPath(n),c=await tr(o.fetch,`${o.url}/object/sign/${a}`,ve({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:o.headers});const d=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return c={signedUrl:encodeURI(`${o.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}}async createSignedUrls(n,t,s){var o=this;try{const a=await tr(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:t,paths:n},{headers:o.headers}),c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(d=>ve(ve({},d),{},{signedUrl:d.signedURL?encodeURI(`${o.url}${d.signedURL}${c}`):null})),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}}download(n,t){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=o?`?${o}`:"",c=this._getFinalPath(n),d=()=>ii(this.fetch,`${this.url}/${s}/${c}${a}`,{headers:this.headers,noResolveJson:!0});return new E0(d,this.shouldThrowOnError)}async info(n){var t=this;const s=t._getFinalPath(n);try{return{data:vc(await ii(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})),error:null}}catch(o){if(t.shouldThrowOnError)throw o;if(He(o))return{data:null,error:o};throw o}}async exists(n){var t=this;const s=t._getFinalPath(n);try{return await k0(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(o){if(t.shouldThrowOnError)throw o;if(He(o)&&o instanceof yc){const a=o.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:o}}throw o}}getPublicUrl(n,t){const s=this._getFinalPath(n),o=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&o.push(a);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&o.push(d);let f=o.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${s}${f}`)}}}async remove(n){var t=this;try{return{data:await Uc(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:n},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async list(n,t,s){var o=this;try{const a=ve(ve(ve({},C0),t),{},{prefix:n||""});return{data:await tr(o.fetch,`${o.url}/object/list/${o.bucketId}`,a,{headers:o.headers},s),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}}async listV2(n,t){var s=this;try{const o=ve({},n);return{data:await tr(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,o,{headers:s.headers},t),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(He(o))return{data:null,error:o};throw o}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const t=[];return n.width&&t.push(`width=${n.width}`),n.height&&t.push(`height=${n.height}`),n.resize&&t.push(`resize=${n.resize}`),n.format&&t.push(`format=${n.format}`),n.quality&&t.push(`quality=${n.quality}`),t.join("&")}};const Ap="2.89.0",Op={"X-Client-Info":`storage-js/${Ap}`};var N0=class{constructor(n,t={},s,o){this.shouldThrowOnError=!1;const a=new URL(n);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=ve(ve({},Op),t),this.fetch=Mc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var t=this;try{const s=t.listBucketOptionsToQueryString(n);return{data:await ii(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async getBucket(n){var t=this;try{return{data:await ii(t.fetch,`${t.url}/bucket/${n}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async createBucket(n,t={public:!1}){var s=this;try{return{data:await tr(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(He(o))return{data:null,error:o};throw o}}async updateBucket(n,t){var s=this;try{return{data:await wc(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(He(o))return{data:null,error:o};throw o}}async emptyBucket(n){var t=this;try{return{data:await tr(t.fetch,`${t.url}/bucket/${n}/empty`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async deleteBucket(n){var t=this;try{return{data:await Uc(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(n){const t={};return n&&("limit"in n&&(t.limit=String(n.limit)),"offset"in n&&(t.offset=String(n.offset)),n.search&&(t.search=n.search),n.sortColumn&&(t.sortColumn=n.sortColumn),n.sortOrder&&(t.sortOrder=n.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},j0=class{constructor(n,t={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ve(ve({},Op),t),this.fetch=Mc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var t=this;try{return{data:await tr(t.fetch,`${t.url}/bucket`,{name:n},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async listBuckets(n){var t=this;try{const s=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&s.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&s.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&s.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&s.set("sortOrder",n.sortOrder),n!=null&&n.search&&s.set("search",n.search);const o=s.toString(),a=o?`${t.url}/bucket?${o}`:`${t.url}/bucket`;return{data:await ii(t.fetch,a,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async deleteBucket(n){var t=this;try{return{data:await Uc(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}from(n){var t=this;if(!y0(n))throw new Bo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new f0({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(s,{get(a,c){const d=a[c];return typeof d!="function"?d:async(...f)=>{try{return{data:await d.apply(a,f),error:null}}catch(p){if(o)throw p;return{data:null,error:p}}}}})}};const zc={"X-Client-Info":`storage-js/${Ap}`,"Content-Type":"application/json"};var Pp=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Dt(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var ql=class extends Pp{constructor(n,t,s){super(n),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},R0=class extends Pp{constructor(n,t){super(n),this.name="StorageVectorsUnknownError",this.originalError=t}};const Bc=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),I0=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},yf=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),A0=async(n,t,s)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(s!=null&&s.noResolveJson)){const o=n.status||500,a=n;if(typeof a.json=="function")a.json().then(c=>{const d=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||o+"";t(new ql(yf(c),o,d))}).catch(()=>{const c=o+"";t(new ql(a.statusText||`HTTP ${o} error`,o,c))});else{const c=o+"";t(new ql(a.statusText||`HTTP ${o} error`,o,c))}}else t(new R0(yf(n),n))},O0=(n,t,s,o)=>{const a={method:n,headers:(t==null?void 0:t.headers)||{}};return o?(I0(o)?(a.headers=ve({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(o)):a.body=o,ve(ve({},a),s)):a};async function P0(n,t,s,o,a,c){return new Promise((d,f)=>{n(s,O0(t,o,a,c)).then(p=>{if(!p.ok)throw p;if(o!=null&&o.noResolveJson)return p;const g=p.headers.get("content-type");return!g||!g.includes("application/json")?{}:p.json()}).then(p=>d(p)).catch(p=>A0(p,f,o))})}async function $t(n,t,s,o,a){return P0(n,"POST",t,o,a,s)}var D0=class{constructor(n,t={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ve(ve({},zc),t),this.fetch=Bc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var t=this;try{return{data:await $t(t.fetch,`${t.url}/CreateIndex`,n,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async getIndex(n,t){var s=this;try{return{data:await $t(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(Dt(o))return{data:null,error:o};throw o}}async listIndexes(n){var t=this;try{return{data:await $t(t.fetch,`${t.url}/ListIndexes`,n,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async deleteIndex(n,t){var s=this;try{return{data:await $t(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers})||{},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(Dt(o))return{data:null,error:o};throw o}}},$0=class{constructor(n,t={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ve(ve({},zc),t),this.fetch=Bc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var t=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await $t(t.fetch,`${t.url}/PutVectors`,n,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async getVectors(n){var t=this;try{return{data:await $t(t.fetch,`${t.url}/GetVectors`,n,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async listVectors(n){var t=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await $t(t.fetch,`${t.url}/ListVectors`,n,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async queryVectors(n){var t=this;try{return{data:await $t(t.fetch,`${t.url}/QueryVectors`,n,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async deleteVectors(n){var t=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await $t(t.fetch,`${t.url}/DeleteVectors`,n,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}},L0=class{constructor(n,t={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ve(ve({},zc),t),this.fetch=Bc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var t=this;try{return{data:await $t(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async getBucket(n){var t=this;try{return{data:await $t(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:n},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async listBuckets(n={}){var t=this;try{return{data:await $t(t.fetch,`${t.url}/ListVectorBuckets`,n,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async deleteBucket(n){var t=this;try{return{data:await $t(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}},M0=class extends L0{constructor(n,t={}){super(n,t.headers||{},t.fetch)}from(n){return new U0(this.url,this.headers,n,this.fetch)}async createBucket(n){var t=()=>super.createBucket,s=this;return t().call(s,n)}async getBucket(n){var t=()=>super.getBucket,s=this;return t().call(s,n)}async listBuckets(n={}){var t=()=>super.listBuckets,s=this;return t().call(s,n)}async deleteBucket(n){var t=()=>super.deleteBucket,s=this;return t().call(s,n)}},U0=class extends D0{constructor(n,t,s,o){super(n,t,o),this.vectorBucketName=s}async createIndex(n){var t=()=>super.createIndex,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var t=()=>super.listIndexes,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var t=()=>super.getIndex,s=this;return t().call(s,s.vectorBucketName,n)}async deleteIndex(n){var t=()=>super.deleteIndex,s=this;return t().call(s,s.vectorBucketName,n)}index(n){return new z0(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},z0=class extends $0{constructor(n,t,s,o,a){super(n,t,a),this.vectorBucketName=s,this.indexName=o}async putVectors(n){var t=()=>super.putVectors,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var t=()=>super.getVectors,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var t=()=>super.listVectors,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var t=()=>super.queryVectors,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var t=()=>super.deleteVectors,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},B0=class extends N0{constructor(n,t={},s,o){super(n,t,s,o)}from(n){return new T0(this.url,this.headers,n,this.fetch)}get vectors(){return new M0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new j0(this.url+"/iceberg",this.headers,this.fetch)}};const Dp="2.89.0",ns=30*1e3,_c=3,Hl=_c*ns,F0="http://localhost:9999",V0="supabase.auth.token",W0={"X-Client-Info":`gotrue-js/${Dp}`},bc="X-Supabase-Api-Version",$p={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},q0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,H0=600*1e3;class oi extends Error{constructor(t,s,o){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=o}}function ce(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class K0 extends oi{constructor(t,s,o){super(t,s,o),this.name="AuthApiError",this.status=s,this.code=o}}function G0(n){return ce(n)&&n.name==="AuthApiError"}class gn extends oi{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class xr extends oi{constructor(t,s,o,a){super(t,o,a),this.name=s,this.status=o}}class Pt extends xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function J0(n){return ce(n)&&n.name==="AuthSessionMissingError"}class Qn extends xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ro extends xr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Io extends xr{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Y0(n){return ce(n)&&n.name==="AuthImplicitGrantRedirectError"}class vf extends xr{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Q0 extends xr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class xc extends xr{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Kl(n){return ce(n)&&n.name==="AuthRetryableFetchError"}class wf extends xr{constructor(t,s,o){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=o}}class kc extends xr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_f=` 	
\r=`.split(""),X0=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<_f.length;t+=1)n[_f[t].charCodeAt(0)]=-2;for(let t=0;t<Ao.length;t+=1)n[Ao[t].charCodeAt(0)]=t;return n})();function bf(n,t,s){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const o=t.queue>>t.queuedBits-6&63;s(Ao[o]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const o=t.queue>>t.queuedBits-6&63;s(Ao[o]),t.queuedBits-=6}}function Lp(n,t,s){const o=X0[n];if(o>-1)for(t.queue=t.queue<<6|o,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function xf(n){const t=[],s=d=>{t.push(String.fromCodePoint(d))},o={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},c=d=>{t_(d,o,s)};for(let d=0;d<n.length;d+=1)Lp(n.charCodeAt(d),a,c);return t.join("")}function Z0(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function e_(n,t){for(let s=0;s<n.length;s+=1){let o=n.charCodeAt(s);if(o>55295&&o<=56319){const a=(o-55296)*1024&65535;o=(n.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}Z0(o,t)}}function t_(n,t,s){if(t.utf8seq===0){if(n<=127){s(n);return}for(let o=1;o<6;o+=1)if((n>>7-o&1)===0){t.utf8seq=o;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function os(n){const t=[],s={queue:0,queuedBits:0},o=a=>{t.push(a)};for(let a=0;a<n.length;a+=1)Lp(n.charCodeAt(a),s,o);return new Uint8Array(t)}function r_(n){const t=[];return e_(n,s=>t.push(s)),new Uint8Array(t)}function vn(n){const t=[],s={queue:0,queuedBits:0},o=a=>{t.push(a)};return n.forEach(a=>bf(a,s,o)),bf(null,s,o),t.join("")}function n_(n){return Math.round(Date.now()/1e3)+n}function s_(){return Symbol("auth-callback")}const mt=()=>typeof window<"u"&&typeof document<"u",dn={tested:!1,writable:!1},Mp=()=>{if(!mt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(dn.tested)return dn.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),dn.tested=!0,dn.writable=!0}catch{dn.tested=!0,dn.writable=!1}return dn.writable};function i_(n){const t={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,c)=>{t[c]=a})}catch{}return s.searchParams.forEach((o,a)=>{t[a]=o}),t}const Up=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),o_=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ss=async(n,t,s)=>{await n.setItem(t,JSON.stringify(s))},hn=async(n,t)=>{const s=await n.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},pt=async(n,t)=>{await n.removeItem(t)};let zp=class Bp{constructor(){this.promise=new Bp.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}};zp.promiseConstructor=Promise;function Gl(n){const t=n.split(".");if(t.length!==3)throw new kc("Invalid JWT structure");for(let o=0;o<t.length;o++)if(!q0.test(t[o]))throw new kc("JWT not in base64url format");return{header:JSON.parse(xf(t[0])),payload:JSON.parse(xf(t[1])),signature:os(t[2]),raw:{header:t[0],payload:t[1]}}}async function a_(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function l_(n,t){return new Promise((o,a)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await n(c);if(!t(c,null,d)){o(d);return}}catch(d){if(!t(c,d)){a(d);return}}})()})}function c_(n){return("0"+n.toString(16)).substr(-2)}function u_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=s.length;let a="";for(let c=0;c<56;c++)a+=s.charAt(Math.floor(Math.random()*o));return a}return crypto.getRandomValues(t),Array.from(t,c_).join("")}async function d_(n){const s=new TextEncoder().encode(n),o=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(o);return Array.from(a).map(c=>String.fromCharCode(c)).join("")}async function h_(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await d_(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xn(n,t,s=!1){const o=u_();let a=o;s&&(a+="/PASSWORD_RECOVERY"),await ss(n,`${t}-code-verifier`,a);const c=await h_(o);return[c,o===c?"plain":"s256"]}const f_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function p_(n){const t=n.headers.get(bc);if(!t||!t.match(f_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function m_(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function g_(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const y_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zn(n){if(!y_.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jl(){const n={};return new Proxy(n,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function v_(n,t){return new Proxy(n,{get:(s,o,a)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const c=o.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,o,a)}return!t.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,o,a)}})}function kf(n){return JSON.parse(JSON.stringify(n))}const fn=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),w_=[502,503,504];async function Sf(n){var t;if(!o_(n))throw new xc(fn(n),0);if(w_.includes(n.status))throw new xc(fn(n),n.status);let s;try{s=await n.json()}catch(c){throw new gn(fn(c),c)}let o;const a=p_(n);if(a&&a.getTime()>=$p["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?o=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(o=s.error_code),o){if(o==="weak_password")throw new wf(fn(s),n.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(o==="session_not_found")throw new Pt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new wf(fn(s),n.status,s.weak_password.reasons);throw new K0(fn(s),n.status||500,o)}const __=(n,t,s,o)=>{const a={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(o),Object.assign(Object.assign({},a),s))};async function ye(n,t,s,o){var a;const c=Object.assign({},o==null?void 0:o.headers);c[bc]||(c[bc]=$p["2024-01-01"].name),o!=null&&o.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const d=(a=o==null?void 0:o.query)!==null&&a!==void 0?a:{};o!=null&&o.redirectTo&&(d.redirect_to=o.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await b_(n,t,s+f,{headers:c,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(p):{data:Object.assign({},p),error:null}}async function b_(n,t,s,o,a,c){const d=__(t,o,a,c);let f;try{f=await n(s,Object.assign({},d))}catch(p){throw console.error(p),new xc(fn(p),0)}if(f.ok||await Sf(f),o!=null&&o.noResolveJson)return f;try{return await f.json()}catch(p){await Sf(p)}}function er(n){var t;let s=null;S_(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=n_(n.expires_in)));const o=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:s,user:o},error:null}}function Ef(n){const t=er(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Wr(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function x_(n){return{data:n,error:null}}function k_(n){const{action_link:t,email_otp:s,hashed_token:o,redirect_to:a,verification_type:c}=n,d=zo(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:s,hashed_token:o,redirect_to:a,verification_type:c},p=Object.assign({},d);return{data:{properties:f,user:p},error:null}}function Cf(n){return n}function S_(n){return n.access_token&&n.refresh_token&&n.expires_in}const Yl=["global","local","others"];class E_{constructor({url:t="",headers:s={},fetch:o}){this.url=t,this.headers=s,this.fetch=Up(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=Yl[0]){if(Yl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yl.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(o){if(ce(o))return{data:null,error:o};throw o}}async inviteUserByEmail(t,s={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Wr})}catch(o){if(ce(o))return{data:{user:null},error:o};throw o}}async generateLink(t){try{const{options:s}=t,o=zo(t,["options"]),a=Object.assign(Object.assign({},o),s);return"newEmail"in o&&(a.new_email=o==null?void 0:o.newEmail,delete a.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:k_,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ce(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Wr})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,o,a,c,d,f,p;try{const g={nextPage:null,lastPage:0,total:0},w=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(c=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:""},xform:Cf});if(w.error)throw w.error;const _=await w.json(),b=(d=w.headers.get("x-total-count"))!==null&&d!==void 0?d:0,C=(p=(f=w.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return C.length>0&&(C.forEach(N=>{const E=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(N.split(";")[1].split("=")[1]);g[`${R}Page`]=E}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(ce(g))return{data:{users:[]},error:g};throw g}}async getUserById(t){Zn(t);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Wr})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){Zn(t);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Wr})}catch(o){if(ce(o))return{data:{user:null},error:o};throw o}}async deleteUser(t,s=!1){Zn(t);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Wr})}catch(o){if(ce(o))return{data:{user:null},error:o};throw o}}async _listFactors(t){Zn(t.userId);try{const{data:s,error:o}=await ye(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:o}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _deleteFactor(t){Zn(t.userId),Zn(t.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,o,a,c,d,f,p;try{const g={nextPage:null,lastPage:0,total:0},w=await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(c=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:""},xform:Cf});if(w.error)throw w.error;const _=await w.json(),b=(d=w.headers.get("x-total-count"))!==null&&d!==void 0?d:0,C=(p=(f=w.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return C.length>0&&(C.forEach(N=>{const E=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(N.split(";")[1].split("=")[1]);g[`${R}Page`]=E}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(ce(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(t){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await ye(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ce(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(t){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}}function Tf(n={}){return{getItem:t=>n[t]||null,setItem:(t,s)=>{n[t]=s},removeItem:t=>{delete n[t]}}}const es={debug:!!(globalThis&&Mp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Fp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class C_ extends Fp{}async function T_(n,t,s){es.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const o=new globalThis.AbortController;return t>0&&setTimeout(()=>{o.abort(),es.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async a=>{if(a){es.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await s()}finally{es.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(t===0)throw es.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new C_(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(es.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function N_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Vp(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function j_(n){return parseInt(n,16)}function R_(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,o=>o.toString(16).padStart(2,"0")).join("")}function I_(n){var t;const{chainId:s,domain:o,expirationTime:a,issuedAt:c=new Date,nonce:d,notBefore:f,requestId:p,resources:g,scheme:w,uri:_,version:b}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const C=Vp(n.address),N=w?`${w}://${o}`:o,E=n.statement?`${n.statement}
`:"",R=`${N} wants you to sign in with your Ethereum account:
${C}

${E}`;let D=`URI: ${_}
Version: ${b}
Chain ID: ${s}${d?`
Nonce: ${d}`:""}
Issued At: ${c.toISOString()}`;if(a&&(D+=`
Expiration Time: ${a.toISOString()}`),f&&(D+=`
Not Before: ${f.toISOString()}`),p&&(D+=`
Request ID: ${p}`),g){let L=`
Resources:`;for(const $ of g){if(!$||typeof $!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${$}`);L+=`
- ${$}`}D+=L}return`${R}
${D}`}class rt extends Error{constructor({message:t,code:s,cause:o,name:a}){var c;super(t,{cause:o}),this.__isWebAuthnError=!0,this.name=(c=a??(o instanceof Error?o.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=s}}class Oo extends rt{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function A_({error:n,options:t}){var s,o,a;const{publicKey:c}=t;if(!c)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=c.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new rt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return c.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const d=window.location.hostname;if(Wp(d)){if(c.rp.id!==d)return new rt({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function O_({error:n,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new rt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(Wp(o)){if(s.rpId!==o)return new rt({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class P_{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const D_=new P_;function $_(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:s,excludeCredentials:o}=n,a=zo(n,["challenge","user","excludeCredentials"]),c=os(t).buffer,d=Object.assign(Object.assign({},s),{id:os(s.id).buffer}),f=Object.assign(Object.assign({},a),{challenge:c,user:d});if(o&&o.length>0){f.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const g=o[p];f.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:os(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return f}function L_(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:s}=n,o=zo(n,["challenge","allowCredentials"]),a=os(t).buffer,c=Object.assign(Object.assign({},o),{challenge:a});if(s&&s.length>0){c.allowCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const f=s[d];c.allowCredentials[d]=Object.assign(Object.assign({},f),{id:os(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function M_(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:vn(new Uint8Array(n.response.attestationObject)),clientDataJSON:vn(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function U_(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,o=n.getClientExtensionResults(),a=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:vn(new Uint8Array(a.authenticatorData)),clientDataJSON:vn(new Uint8Array(a.clientDataJSON)),signature:vn(new Uint8Array(a.signature)),userHandle:a.userHandle?vn(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Wp(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Nf(){var n,t;return!!(mt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function z_(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Oo("Browser returned unexpected credential type",t)}:{data:null,error:new Oo("Empty credential response",t)}}catch(t){return{data:null,error:A_({error:t,options:n})}}}async function B_(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Oo("Browser returned unexpected credential type",t)}:{data:null,error:new Oo("Empty credential response",t)}}catch(t){return{data:null,error:O_({error:t,options:n})}}}const F_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},V_={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Po(...n){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),s=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),o={};for(const a of n)if(a)for(const c in a){const d=a[c];if(d!==void 0)if(Array.isArray(d))o[c]=d;else if(s(d))o[c]=d;else if(t(d)){const f=o[c];t(f)?o[c]=Po(f,d):o[c]=Po(d)}else o[c]=d}return o}function W_(n,t){return Po(F_,n,t||{})}function q_(n,t){return Po(V_,n,t||{})}class H_{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:o,signal:a},c){try{const{data:d,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!d)return{data:null,error:f};const p=a??D_.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:g}=d.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${o}`),g.displayName||(g.displayName=g.name)}switch(d.webauthn.type){case"create":{const g=W_(d.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:w,error:_}=await z_({publicKey:g,signal:p});return w?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}case"request":{const g=q_(d.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:w,error:_}=await B_(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:g,signal:p}));return w?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}}}catch(d){return ce(d)?{data:null,error:d}:{data:null,error:new gn("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:s,webauthn:o}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:o})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},c){if(!s)return{data:null,error:new oi("rpId is required for WebAuthn authentication")};try{if(!Nf())return{data:null,error:new gn("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:o},signal:a},{request:c});if(!d)return{data:null,error:f};const{webauthn:p}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:p.type,rpId:s,rpOrigins:o,credential_response:p.credential_response}})}catch(d){return ce(d)?{data:null,error:d}:{data:null,error:new gn("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},c){if(!s)return{data:null,error:new oi("rpId is required for WebAuthn registration")};try{if(!Nf())return{data:null,error:new gn("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(w=>{var _;return(_=w.data)===null||_===void 0?void 0:_.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w==null?void 0:w.id}):void 0),{data:null,error:f};const{data:p,error:g}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:s,rpOrigins:o},signal:a},{create:c});return p?this._verify({factorId:d.id,challengeId:p.challengeId,webauthn:{rpId:s,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(d){return ce(d)?{data:null,error:d}:{data:null,error:new gn("Unexpected error in register",d)}}}}N_();const K_={url:F0,storageKey:V0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:W0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function jf(n,t,s){return await s()}const ts={};class ai{get jwks(){var t,s;return(s=(t=ts[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){ts[this.storageKey]=Object.assign(Object.assign({},ts[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=ts[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ts[this.storageKey]=Object.assign(Object.assign({},ts[this.storageKey]),{cachedAt:t})}constructor(t){var s,o,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},K_),t);if(this.storageKey=c.storageKey,this.instanceID=(s=ai.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,ai.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&mt()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new E_({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Up(c.fetch),this.lock=c.lock||jf,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:this.persistSession&&mt()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=T_:this.lock=jf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new H_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Mp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tf(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Tf(this.memoryStorage)),mt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Dp}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},o="none";if(mt()&&(s=i_(window.location.href),this._isImplicitGrantCallback(s)?o="implicit":await this._isPKCECallback(s)&&(o="pkce")),mt()&&this.detectSessionInUrl&&o!=="none"){const{data:a,error:c}=await this._getSessionFromURL(s,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Y0(c)){const p=(t=c.details)===null||t===void 0?void 0:t.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ce(s)?this._returnResult({error:s}):this._returnResult({error:new gn("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,o,a;try{const c=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:er}),{data:d,error:f}=c;if(f||!d)return this._returnResult({data:{user:null,session:null},error:f});const p=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(c){if(ce(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(t){var s,o,a;try{let c;if("email"in t){const{email:w,password:_,options:b}=t;let C=null,N=null;this.flowType==="pkce"&&([C,N]=await Xn(this.storage,this.storageKey)),c=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:w,password:_,data:(s=b==null?void 0:b.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:C,code_challenge_method:N},xform:er})}else if("phone"in t){const{phone:w,password:_,options:b}=t;c=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:_,data:(o=b==null?void 0:b.data)!==null&&o!==void 0?o:{},channel:(a=b==null?void 0:b.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:er})}else throw new Ro("You must provide either an email or phone number and a password");const{data:d,error:f}=c;if(f||!d)return await pt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const p=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(c){if(await pt(this.storage,`${this.storageKey}-code-verifier`),ce(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(t){try{let s;if("email"in t){const{email:c,password:d,options:f}=t;s=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ef})}else if("phone"in t){const{phone:c,password:d,options:f}=t;s=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ef})}else throw new Ro("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!o||!o.session||!o.user){const c=new Qn;return this._returnResult({data:{user:null,session:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:a})}catch(s){if(ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,o,a,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,o,a,c,d,f,p,g,w,_,b;let C,N;if("message"in t)C=t.message,N=t.signature;else{const{chain:E,wallet:R,statement:D,options:L}=t;let $;if(mt())if(typeof R=="object")$=R;else{const Ne=window;if("ethereum"in Ne&&typeof Ne.ethereum=="object"&&"request"in Ne.ethereum&&typeof Ne.ethereum.request=="function")$=Ne.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=R}const q=new URL((s=L==null?void 0:L.url)!==null&&s!==void 0?s:window.location.href),de=await $.request({method:"eth_requestAccounts"}).then(Ne=>Ne).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!de||de.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Z=Vp(de[0]);let ge=(o=L==null?void 0:L.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!ge){const Ne=await $.request({method:"eth_chainId"});ge=j_(Ne)}const Q={domain:q.host,address:Z,statement:D,uri:q.href,version:"1",chainId:ge,nonce:(a=L==null?void 0:L.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(d=(c=L==null?void 0:L.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(f=L==null?void 0:L.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(p=L==null?void 0:L.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=L==null?void 0:L.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(w=L==null?void 0:L.signInWithEthereum)===null||w===void 0?void 0:w.resources};C=I_(Q),N=await $.request({method:"personal_sign",params:[R_(C),Z]})}try{const{data:E,error:R}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:N},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:er});if(R)throw R;if(!E||!E.session||!E.user){const D=new Qn;return this._returnResult({data:{user:null,session:null},error:D})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:R})}catch(E){if(ce(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(t){var s,o,a,c,d,f,p,g,w,_,b,C;let N,E;if("message"in t)N=t.message,E=t.signature;else{const{chain:R,wallet:D,statement:L,options:$}=t;let q;if(mt())if(typeof D=="object")q=D;else{const Z=window;if("solana"in Z&&typeof Z.solana=="object"&&("signIn"in Z.solana&&typeof Z.solana.signIn=="function"||"signMessage"in Z.solana&&typeof Z.solana.signMessage=="function"))q=Z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!($!=null&&$.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=D}const de=new URL((s=$==null?void 0:$.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in q&&q.signIn){const Z=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},$==null?void 0:$.signInWithSolana),{version:"1",domain:de.host,uri:de.href}),L?{statement:L}:null));let ge;if(Array.isArray(Z)&&Z[0]&&typeof Z[0]=="object")ge=Z[0];else if(Z&&typeof Z=="object"&&"signedMessage"in Z&&"signature"in Z)ge=Z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ge&&"signature"in ge&&(typeof ge.signedMessage=="string"||ge.signedMessage instanceof Uint8Array)&&ge.signature instanceof Uint8Array)N=typeof ge.signedMessage=="string"?ge.signedMessage:new TextDecoder().decode(ge.signedMessage),E=ge.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${de.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${de.href}`,`Issued At: ${(a=(o=$==null?void 0:$.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((c=$==null?void 0:$.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${$.signInWithSolana.notBefore}`]:[],...!((d=$==null?void 0:$.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${$.signInWithSolana.expirationTime}`]:[],...!((f=$==null?void 0:$.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${$.signInWithSolana.chainId}`]:[],...!((p=$==null?void 0:$.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${$.signInWithSolana.nonce}`]:[],...!((g=$==null?void 0:$.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${$.signInWithSolana.requestId}`]:[],...!((_=(w=$==null?void 0:$.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||_===void 0)&&_.length?["Resources",...$.signInWithSolana.resources.map(ge=>`- ${ge}`)]:[]].join(`
`);const Z=await q.signMessage(new TextEncoder().encode(N),"utf8");if(!Z||!(Z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=Z}}try{const{data:R,error:D}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:vn(E)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(C=t.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:er});if(D)throw D;if(!R||!R.session||!R.user){const L=new Qn;return this._returnResult({data:{user:null,session:null},error:L})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:D})}catch(R){if(ce(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(t){const s=await hn(this.storage,`${this.storageKey}-code-verifier`),[o,a]=(s??"").split("/");try{if(!o&&this.flowType==="pkce")throw new Q0;const{data:c,error:d}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:o},xform:er});if(await pt(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!c||!c.session||!c.user){const f=new Qn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:a??null}),error:d})}catch(c){if(await pt(this.storage,`${this.storageKey}-code-verifier`),ce(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(t){try{const{options:s,provider:o,token:a,access_token:c,nonce:d}=t,f=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:a,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:er}),{data:p,error:g}=f;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p||!p.session||!p.user){const w=new Qn;return this._returnResult({data:{user:null,session:null},error:w})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:g})}catch(s){if(ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,o,a,c,d;try{if("email"in t){const{email:f,options:p}=t;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await Xn(this.storage,this.storageKey));const{error:_}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},create_user:(o=p==null?void 0:p.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:w},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in t){const{phone:f,options:p}=t,{data:g,error:w}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},create_user:(c=p==null?void 0:p.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(d=p==null?void 0:p.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:w})}throw new Ro("You must provide either an email or phone number.")}catch(f){if(await pt(this.storage,`${this.storageKey}-code-verifier`),ce(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var s,o;try{let a,c;"options"in t&&(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo,c=(o=t.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:f}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:a,xform:er});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,g=d.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(a){if(ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var s,o,a,c,d;try{let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Xn(this.storage,this.storageKey));const g=await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(o=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&o!==void 0?o:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:p}),headers:this.headers,xform:x_});return!((c=g.data)===null||c===void 0)&&c.url&&mt()&&!(!((d=t.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(f){if(await pt(this.storage,`${this.storageKey}-code-verifier`),ce(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:o}=t;if(o)throw o;if(!s)throw new Pt;const{error:a}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(ce(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:o,type:a,options:c}=t,{error:d}=await ye(this.fetch,"POST",s,{headers:this.headers,body:{email:o,type:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in t){const{phone:o,type:a,options:c}=t,{data:d,error:f}=await ye(this.fetch,"POST",s,{headers:this.headers,body:{phone:o,type:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f})}throw new Ro("You must provide either an email or phone number and a type")}catch(s){if(ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await o,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=s();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await hn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const o=t.expires_at?t.expires_at*1e3-Date.now()<Hl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",t.expires_at),!o){if(this.userStorage){const d=await hn(this.userStorage,this.storageKey+"-user");d!=null&&d.user?t.user=d.user:t.user=Jl()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};t.user=v_(t.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:c}=await this._callRefreshToken(t.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const s=await this._acquireLock(-1,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(t){try{return t?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Wr}):await this._useSession(async s=>{var o,a,c;const{data:d,error:f}=s;if(f)throw f;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pt}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(a=d.session)===null||a===void 0?void 0:a.access_token)!==null&&c!==void 0?c:void 0,xform:Wr})})}catch(s){if(ce(s))return J0(s)&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async o=>{const{data:a,error:c}=o;if(c)throw c;if(!a.session)throw new Pt;const d=a.session;let f=null,p=null;this.flowType==="pkce"&&t.email!=null&&([f,p]=await Xn(this.storage,this.storageKey));const{data:g,error:w}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:p}),jwt:d.access_token,xform:Wr});if(w)throw w;return d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(o){if(await pt(this.storage,`${this.storageKey}-code-verifier`),ce(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Pt;const s=Date.now()/1e3;let o=s,a=!0,c=null;const{payload:d}=Gl(t.access_token);if(d.exp&&(o=d.exp,a=o<=s),a){const{data:f,error:p}=await this._callRefreshToken(t.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:p}=await this._getUser(t.access_token);if(p)throw p;c={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:o-s,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(s){if(ce(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var o;if(!t){const{data:d,error:f}=s;if(f)throw f;t=(o=d.session)!==null&&o!==void 0?o:void 0}if(!(t!=null&&t.refresh_token))throw new Pt;const{data:a,error:c}=await this._callRefreshToken(t.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!mt())throw new Io("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Io(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new vf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Io("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new vf("No code detected.");const{data:L,error:$}=await this._exchangeCodeForSession(t.code);if($)throw $;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:a,access_token:c,refresh_token:d,expires_in:f,expires_at:p,token_type:g}=t;if(!c||!f||!d||!g)throw new Io("No session defined in URL");const w=Math.round(Date.now()/1e3),_=parseInt(f);let b=w+_;p&&(b=parseInt(p));const C=b-w;C*1e3<=ns&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${_}s`);const N=b-_;w-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,b,w):w-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,b,w);const{data:E,error:R}=await this._getUser(c);if(R)throw R;const D={provider_token:o,provider_refresh_token:a,access_token:c,expires_in:_,expires_at:b,refresh_token:d,token_type:g,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:t.type},error:null})}catch(o){if(ce(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await hn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var o;const{data:a,error:c}=s;if(c)return this._returnResult({error:c});const d=(o=a.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:f}=await this.admin.signOut(d,t);if(f&&!(G0(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=s_(),o={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:o}}}async _emitInitialSession(t){return await this._useSession(async s=>{var o,a;try{const{data:{session:c},error:d}=s;if(d)throw d;await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,s={}){let o=null,a=null;this.flowType==="pkce"&&([o,a]=await Xn(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(await pt(this.storage,`${this.storageKey}-code-verifier`),ce(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var t;try{const{data:s,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:o,error:a}=await this._useSession(async c=>{var d,f,p,g,w;const{data:_,error:b}=c;if(b)throw b;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=t.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",C,{headers:this.headers,jwt:(w=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&w!==void 0?w:void 0})});if(a)throw a;return mt()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:t.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(ce(o))return this._returnResult({data:{provider:t.provider,url:null},error:o});throw o}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var o;try{const{error:a,data:{session:c}}=s;if(a)throw a;const{options:d,provider:f,token:p,access_token:g,nonce:w}=t,_=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=c==null?void 0:c.access_token)!==null&&o!==void 0?o:void 0,body:{provider:f,id_token:p,access_token:g,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:er}),{data:b,error:C}=_;return C?this._returnResult({data:{user:null,session:null},error:C}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Qn}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:C}))}catch(a){if(await pt(this.storage,`${this.storageKey}-code-verifier`),ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var o,a;const{data:c,error:d}=s;if(d)throw d;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const o=Date.now();return await l_(async a=>(a>0&&await a_(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:er})),(a,c)=>{const d=200*Math.pow(2,a);return c&&Kl(c)&&Date.now()+d-o<ns})}catch(o){if(this._debug(s,"error",o),ce(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const o=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",o),mt()&&!s.skipBrowserRedirect&&window.location.assign(o),{data:{provider:t,url:o},error:null}}async _recoverAndRefresh(){var t,s;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const a=await hn(this.storage,this.storageKey);if(a&&this.userStorage){let d=await hn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:a.user},await ss(this.userStorage,this.storageKey+"-user",d)),a.user=(t=d==null?void 0:d.user)!==null&&t!==void 0?t:Jl()}else if(a&&!a.user&&!a.user){const d=await hn(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(a.user=d.user,await pt(this.storage,this.storageKey+"-user"),await ss(this.storage,this.storageKey,a)):a.user=Jl()}if(this._debug(o,"session from storage",a),!this._isValidSession(a)){this._debug(o,"session is not valid"),a!==null&&await this._removeSession();return}const c=((s=a.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Hl;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${Hl}s`),c){if(this.autoRefreshToken&&a.refresh_token){const{error:d}=await this._callRefreshToken(a.refresh_token);d&&(console.error(d),Kl(d)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(a.access_token);!f&&(d!=null&&d.user)?(a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(o,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(o,"error",a),console.error(a);return}finally{this._debug(o,"end")}}async _callRefreshToken(t){var s,o;if(!t)throw new Pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new zp;const{data:c,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!c.session)throw new Pt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={data:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(a,"error",c),ce(c)){const d={data:null,error:c};return Kl(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,s,o=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",s,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:t,session:s});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,s)}catch(p){c.push(p)}});if(await Promise.all(d),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await pt(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},t),o=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&s.user&&await ss(this.userStorage,this.storageKey+"-user",{user:s.user});const a=Object.assign({},s);delete a.user;const c=kf(a);await ss(this.storage,this.storageKey,c)}else{const a=kf(s);await ss(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await pt(this.storage,this.storageKey),await pt(this.storage,this.storageKey+"-code-verifier"),await pt(this.storage,this.storageKey+"-user"),this.userStorage&&await pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&mt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ns);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((o.expires_at*1e3-t)/ns);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ns}ms, refresh threshold is ${_c} ticks`),a<=_c&&await this._callRefreshToken(o.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Fp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!mt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,o){const a=[`provider=${encodeURIComponent(s)}`];if(o!=null&&o.redirectTo&&a.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&a.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,d]=await Xn(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});a.push(f.toString())}if(o!=null&&o.queryParams){const c=new URLSearchParams(o.queryParams);a.push(c.toString())}return o!=null&&o.skipBrowserRedirect&&a.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var o;const{data:a,error:c}=s;return c?this._returnResult({data:null,error:c}):await ye(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var o,a;const{data:c,error:d}=s;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:p,error:g}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(t.factorType==="totp"&&p.type==="totp"&&(!((a=p==null?void 0:p.totp)===null||a===void 0)&&a.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:a,error:c}=s;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?M_(t.webauthn.credential_response):U_(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:p}=await ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:p}))})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:a,error:c}=s;if(c)return this._returnResult({data:null,error:c});const d=await ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});if(d.error)return d;const{data:f}=d;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:$_(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:L_(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:o}=await this._challenge({factorId:t.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:o}=await this.getUser();if(o)return{data:null,error:o};const a={all:[],phone:[],totp:[],webauthn:[]};for(const c of(t=s==null?void 0:s.factors)!==null&&t!==void 0?t:[])a.all.push(c),c.status==="verified"&&a[c.factor_type].push(c);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,s;const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Gl(o.access_token);let d=null;c.aal&&(d=c.aal);let f=d;((s=(t=o.user.factors)===null||t===void 0?void 0:t.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const g=c.amr||[];return{data:{currentLevel:d,nextLevel:f,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:o},error:a}=s;return a?this._returnResult({data:null,error:a}):o?await ye(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:o.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Pt})})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async o=>{const{data:{session:a},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!a)return this._returnResult({data:null,error:new Pt});const d=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&mt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(o){if(ce(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(t,s){try{return await this._useSession(async o=>{const{data:{session:a},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!a)return this._returnResult({data:null,error:new Pt});const d=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&mt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(o){if(ce(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:o}=t;return o?this._returnResult({data:null,error:o}):s?await ye(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Pt})})}catch(t){if(ce(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:o},error:a}=s;return a?this._returnResult({data:null,error:a}):o?(await ye(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Pt})})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let o=s.keys.find(f=>f.kid===t);if(o)return o;const a=Date.now();if(o=this.jwks.keys.find(f=>f.kid===t),o&&this.jwks_cached_at+H0>a)return o;const{data:c,error:d}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=a,o=c.keys.find(f=>f.kid===t),!o)?null:o}async getClaims(t,s={}){try{let o=t;if(!o){const{data:C,error:N}=await this.getSession();if(N||!C.session)return this._returnResult({data:null,error:N});o=C.session.access_token}const{header:a,payload:c,signature:d,raw:{header:f,payload:p}}=Gl(o);s!=null&&s.allowExpired||m_(c.exp);const g=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!g){const{error:C}=await this.getUser(o);if(C)throw C;return{data:{claims:c,header:a,signature:d},error:null}}const w=g_(a.alg),_=await crypto.subtle.importKey("jwk",g,w,!0,["verify"]);if(!await crypto.subtle.verify(w,_,d,r_(`${f}.${p}`)))throw new kc("Invalid JWT signature");return{data:{claims:c,header:a,signature:d},error:null}}catch(o){if(ce(o))return this._returnResult({data:null,error:o});throw o}}}ai.nextInstanceID={};const G_=ai,J_="2.89.0";let Zs="";typeof Deno<"u"?Zs="deno":typeof document<"u"?Zs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zs="react-native":Zs="node";const Y_={"X-Client-Info":`supabase-js-${Zs}/${J_}`},Q_={headers:Y_},X_={schema:"public"},Z_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},eb={};function li(n){"@babel/helpers - typeof";return li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},li(n)}function tb(n,t){if(li(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var o=s.call(n,t);if(li(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function rb(n){var t=tb(n,"string");return li(t)=="symbol"?t:t+""}function nb(n,t,s){return(t=rb(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function Rf(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),s.push.apply(s,o)}return s}function Ye(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Rf(Object(s),!0).forEach(function(o){nb(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Rf(Object(s)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(s,o))})}return n}const sb=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),ib=()=>Headers,ob=(n,t,s)=>{const o=sb(s),a=ib();return async(c,d)=>{var f;const p=(f=await t())!==null&&f!==void 0?f:n;let g=new a(d==null?void 0:d.headers);return g.has("apikey")||g.set("apikey",n),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),o(c,Ye(Ye({},d),{},{headers:g}))}};function ab(n){return n.endsWith("/")?n:n+"/"}function lb(n,t){var s,o;const{db:a,auth:c,realtime:d,global:f}=n,{db:p,auth:g,realtime:w,global:_}=t,b={db:Ye(Ye({},p),a),auth:Ye(Ye({},g),c),realtime:Ye(Ye({},w),d),storage:{},global:Ye(Ye(Ye({},_),f),{},{headers:Ye(Ye({},(s=_==null?void 0:_.headers)!==null&&s!==void 0?s:{}),(o=f==null?void 0:f.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return n.accessToken?b.accessToken=n.accessToken:delete b.accessToken,b}function cb(n){const t=n==null?void 0:n.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ab(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var ub=class extends G_{constructor(n){super(n)}},db=class{constructor(n,t,s){var o,a;this.supabaseUrl=n,this.supabaseKey=t;const c=cb(n);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:X_,realtime:eb,auth:Ye(Ye({},Z_),{},{storageKey:d}),global:Q_},p=lb(s??{},f);if(this.storageKey=(o=p.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(w,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=p.auth)!==null&&g!==void 0?g:{},this.headers,p.global.fetch)}this.fetch=ob(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Ye({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new Ww(new URL("rest/v1",c).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new B0(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new Uw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,t,s)}channel(n,t={config:{}}){return this.realtime.channel(n,t)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,t,s;if(n.accessToken)return await n.accessToken();const{data:o}=await n.auth.getSession();return(t=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&t!==void 0?t:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:o,userStorage:a,storageKey:c,flowType:d,lock:f,debug:p,throwOnError:g},w,_){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ub({url:this.authUrl.href,headers:Ye(Ye({},b),w),storageKey:c,autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:o,userStorage:a,flowType:d,lock:f,debug:p,throwOnError:g,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new a0(this.realtimeUrl.href,Ye(Ye({},n),{},{params:Ye(Ye({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,t)=>{this._handleTokenChanged(n,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(n,t,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const hb=(n,t,s)=>new db(n,t,s);function fb(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}fb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Fc="umgfxbipblzpgpejlnzg",Vc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVtZ2Z4YmlwYmx6cGdwZWpsbnpnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY1ODY5MDIsImV4cCI6MjA4MjE2MjkwMn0.fkNxfMwxqGR5EUALb5C3QxQvSMXsDyRyHf8tltWpm2Y",pb=`https://${Fc}.supabase.co`,mb=Vc,_e=hb(pb,mb,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}});function gb({onLoginSuccess:n,initialStep:t="login",onNavigateToRegister:s}){const[o,a]=A.useState(""),[c,d]=A.useState(""),[f,p]=A.useState(""),[g,w]=A.useState(t==="signup"),[_,b]=A.useState(!1),[C,N]=A.useState(null),[E,R]=A.useState(!0);A.useEffect(()=>{const $=localStorage.getItem("chat_app_username"),q=localStorage.getItem("chat_app_pin");$&&q&&(a($),d(q),R(!0))},[]);const D=$=>`${$.trim().toLowerCase()}@app.local`,L=async $=>{if($.preventDefault(),!(!o.trim()||!c.trim())&&!(g&&!f.trim())){b(!0),N(null);try{const q=D(o);if(g){const{error:de}=await _e.auth.signUp({email:q,password:c,options:{data:{username:o.trim().toLowerCase(),display_name:f.trim(),pin:c}}});if(de)throw de}else{const{error:de}=await _e.auth.signInWithPassword({email:q,password:c});if(de)throw de.message.includes("Invalid login credentials")?new Error("Invalid username or PIN"):de;E?(localStorage.setItem("chat_app_username",o.trim()),localStorage.setItem("chat_app_pin",c)):(localStorage.removeItem("chat_app_username"),localStorage.removeItem("chat_app_pin"))}n()}catch(q){N(q.message)}finally{b(!1)}}};return m.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-[#00a884] via-[#008069] to-[#005c4b] px-4",children:m.jsxs("div",{className:"w-full max-w-md",children:[m.jsxs("div",{className:"flex flex-col items-center mb-8",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mb-4 shadow-2xl",children:m.jsx(Uo,{className:"w-14 h-14 text-[#00a884]"})}),m.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-[#25d366] rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-white text-xl",children:""})})]}),m.jsx("h1",{className:"text-white text-4xl mb-2 font-bold",children:"Chat App"}),m.jsx("p",{className:"text-white/90 text-center text-lg",children:"Connect with anyone, anywhere"})]}),m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:g?"Create Account":"Welcome"}),C&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:m.jsx("p",{className:"text-red-600 text-sm text-center",children:C})}),m.jsxs("form",{onSubmit:L,className:"space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(yn,{htmlFor:"username",className:"text-gray-700 text-sm font-medium",children:"Username"}),m.jsxs("div",{className:"relative",children:[m.jsx(sp,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),m.jsx(Lt,{id:"username",type:"text",placeholder:"@username",value:o,onChange:$=>a($.target.value),className:"pl-11 bg-gray-50 border-gray-200 text-gray-900 placeholder:text-gray-400 h-12 rounded-lg focus:border-[#00a884] focus:ring-[#00a884]",disabled:_,required:!0})]})]}),g&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(yn,{htmlFor:"displayName",className:"text-gray-700 text-sm font-medium",children:"Display Name"}),m.jsx(Lt,{id:"displayName",type:"text",placeholder:"Your Name",value:f,onChange:$=>p($.target.value),className:"bg-gray-50 border-gray-200 text-gray-900 placeholder:text-gray-400 h-12 rounded-lg focus:border-[#00a884] focus:ring-[#00a884]",disabled:_,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(yn,{htmlFor:"pin",className:"text-gray-700 text-sm font-medium",children:"PIN"}),m.jsxs("div",{className:"relative",children:[m.jsx(cv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),m.jsx(Lt,{id:"pin",type:"password",inputMode:"numeric",pattern:"[0-9]*",placeholder:"6-digit PIN",value:c,onChange:$=>d($.target.value),maxLength:6,className:"pl-11 bg-gray-50 border-gray-200 text-gray-900 placeholder:text-gray-400 h-12 rounded-lg focus:border-[#00a884] focus:ring-[#00a884]",disabled:_,required:!0})]})]}),!g&&m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Dw,{id:"rememberMe",checked:E,onCheckedChange:$=>R($),className:"border-gray-300"}),m.jsx("label",{htmlFor:"rememberMe",className:"text-sm text-gray-700 cursor-pointer select-none",children:"Remember me"})]}),m.jsx(Gr,{type:"submit",disabled:_,className:"w-full bg-[#00a884] hover:bg-[#00956f] text-white py-6 text-lg font-medium shadow-lg",children:_?"Please wait...":g?"Sign Up":"Login"})]}),m.jsx("div",{className:"mt-6 text-center",children:m.jsx("button",{onClick:()=>{s&&!g?s():(w(!g),N(null))},className:"text-[#00a884] hover:text-[#00956f] text-sm font-medium transition-colors",children:g?"Already have an account? Login":"Create new account"})})]}),m.jsx("p",{className:"text-center text-white/80 text-sm mt-6",children:" Your messages are secured end-to-end"})]})})}function yb({onRegister:n,onBackToLogin:t}){const[s,o]=A.useState(""),[a,c]=A.useState(""),[d,f]=A.useState(""),[p,g]=A.useState(""),[w,_]=A.useState(!1),[b,C]=A.useState(""),N=E=>{if(E.preventDefault(),C(""),!s.trim()||!a.trim()||!d.trim()){C("All fields are required");return}if(d.length<6){C("Password must be at least 6 characters");return}if(d!==p){C("Passwords do not match");return}_(!0),n(s.trim(),a.trim(),d.trim()),_(!1)};return m.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-[#00a884] via-[#008069] to-[#005c4b] px-4",children:m.jsxs("div",{className:"w-full max-w-md",children:[m.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-white mb-4 hover:text-white/80 transition-colors",children:[m.jsx(as,{className:"w-5 h-5"}),m.jsx("span",{children:"Back to Login"})]}),m.jsxs("div",{className:"flex flex-col items-center mb-8",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mb-4 shadow-2xl",children:m.jsx(Uo,{className:"w-14 h-14 text-[#00a884]"})}),m.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-[#25d366] rounded-full flex items-center justify-center",children:m.jsx(Xh,{className:"w-4 h-4 text-white"})})]}),m.jsx("h1",{className:"text-white text-4xl mb-2 font-bold",children:"Create Account"}),m.jsx("p",{className:"text-white/90 text-center text-lg",children:"Join the conversation today"})]}),m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[m.jsx(Xh,{className:"w-6 h-6 text-[#00a884]"}),m.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Sign Up"})]}),b&&m.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:m.jsx("p",{className:"text-red-600 text-sm",children:b})}),m.jsxs("form",{onSubmit:N,className:"space-y-5",children:[m.jsxs("div",{children:[m.jsx(yn,{htmlFor:"name",className:"text-gray-700 font-medium",children:"Display Name"}),m.jsx(Lt,{id:"name",type:"text",placeholder:"Enter your name",value:a,onChange:E=>c(E.target.value),className:"mt-1 bg-gray-50 border-gray-200 focus:border-[#00a884] focus:ring-[#00a884]",required:!0}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This name will be visible to other users"})]}),m.jsxs("div",{children:[m.jsx(yn,{htmlFor:"userId",className:"text-gray-700 font-medium",children:"User ID"}),m.jsx(Lt,{id:"userId",type:"text",placeholder:"Choose a unique ID",value:s,onChange:E=>o(E.target.value),className:"mt-1 bg-gray-50 border-gray-200 focus:border-[#00a884] focus:ring-[#00a884]",required:!0}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be your unique identifier (e.g., john123)"})]}),m.jsxs("div",{children:[m.jsx(yn,{htmlFor:"password",className:"text-gray-700 font-medium",children:"Password"}),m.jsx(Lt,{id:"password",type:"password",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Create a password",value:d,onChange:E=>f(E.target.value),className:"mt-1 bg-gray-50 border-gray-200 focus:border-[#00a884] focus:ring-[#00a884]",required:!0}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters"})]}),m.jsxs("div",{children:[m.jsx(yn,{htmlFor:"confirmPassword",className:"text-gray-700 font-medium",children:"Confirm Password"}),m.jsx(Lt,{id:"confirmPassword",type:"password",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Re-enter your password",value:p,onChange:E=>g(E.target.value),className:"mt-1 bg-gray-50 border-gray-200 focus:border-[#00a884] focus:ring-[#00a884]",required:!0})]}),m.jsx(Gr,{type:"submit",className:"w-full bg-[#00a884] hover:bg-[#00956f] text-white py-6 text-lg font-medium shadow-lg",disabled:w,children:w?"Creating Account...":"Create Account"})]}),m.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By signing up, you agree to our Terms of Service and Privacy Policy"})]}),m.jsx("p",{className:"text-center text-white/80 text-sm mt-6",children:" Your data is encrypted and secure"})]})})}var Wc="Avatar",[vb]=_p(Wc),[wb,qp]=vb(Wc),Hp=A.forwardRef((n,t)=>{const{__scopeAvatar:s,...o}=n,[a,c]=A.useState("idle");return m.jsx(wb,{scope:s,imageLoadingStatus:a,onImageLoadingStatusChange:c,children:m.jsx(us.span,{...o,ref:t})})});Hp.displayName=Wc;var Kp="AvatarImage",Gp=A.forwardRef((n,t)=>{const{__scopeAvatar:s,src:o,onLoadingStatusChange:a=()=>{},...c}=n,d=qp(Kp,s),f=_b(o,c.referrerPolicy),p=Dc(g=>{a(g),d.onImageLoadingStatusChange(g)});return ri(()=>{f!=="idle"&&p(f)},[f,p]),f==="loaded"?m.jsx(us.img,{...c,ref:t,src:o}):null});Gp.displayName=Kp;var Jp="AvatarFallback",Yp=A.forwardRef((n,t)=>{const{__scopeAvatar:s,delayMs:o,...a}=n,c=qp(Jp,s),[d,f]=A.useState(o===void 0);return A.useEffect(()=>{if(o!==void 0){const p=window.setTimeout(()=>f(!0),o);return()=>window.clearTimeout(p)}},[o]),d&&c.imageLoadingStatus!=="loaded"?m.jsx(us.span,{...a,ref:t}):null});Yp.displayName=Jp;function _b(n,t){const[s,o]=A.useState("idle");return ri(()=>{if(!n){o("error");return}let a=!0;const c=new window.Image,d=f=>()=>{a&&o(f)};return o("loading"),c.onload=d("loaded"),c.onerror=d("error"),c.src=n,t&&(c.referrerPolicy=t),()=>{a=!1}},[n,t]),s}var bb=Hp,xb=Gp,kb=Yp;function Do({className:n,...t}){return m.jsx(bb,{"data-slot":"avatar",className:kn("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...t})}function Ql({className:n,...t}){return m.jsx(xb,{"data-slot":"avatar-image",className:kn("aspect-square size-full",n),...t})}function $o({className:n,...t}){return m.jsx(kb,{"data-slot":"avatar-fallback",className:kn("bg-muted flex size-full items-center justify-center rounded-full",n),...t})}function Sb(n){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}Array(12).fill(0);let Sc=1;class Eb{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;const{message:o,...a}=t,c=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:Sc++,d=this.toasts.find(p=>p.id===c),f=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),d?this.toasts=this.toasts.map(p=>p.id===c?(this.publish({...p,...t,id:c,title:o}),{...p,...t,id:c,dismissible:f,title:o}):p):this.addToast({title:o,...a,dismissible:f,id:c}),c},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:t,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(o=>o({id:s.id,dismiss:!0}))}),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let o;s.loading!==void 0&&(o=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let c=o!==void 0,d;const f=a.then(async g=>{if(d=["resolve",g],Qs.isValidElement(g))c=!1,this.create({id:o,type:"default",message:g});else if(Tb(g)&&!g.ok){c=!1;const _=typeof s.error=="function"?await s.error(`HTTP error! status: ${g.status}`):s.error,b=typeof s.description=="function"?await s.description(`HTTP error! status: ${g.status}`):s.description,N=typeof _=="object"&&!Qs.isValidElement(_)?_:{message:_};this.create({id:o,type:"error",description:b,...N})}else if(g instanceof Error){c=!1;const _=typeof s.error=="function"?await s.error(g):s.error,b=typeof s.description=="function"?await s.description(g):s.description,N=typeof _=="object"&&!Qs.isValidElement(_)?_:{message:_};this.create({id:o,type:"error",description:b,...N})}else if(s.success!==void 0){c=!1;const _=typeof s.success=="function"?await s.success(g):s.success,b=typeof s.description=="function"?await s.description(g):s.description,N=typeof _=="object"&&!Qs.isValidElement(_)?_:{message:_};this.create({id:o,type:"success",description:b,...N})}}).catch(async g=>{if(d=["reject",g],s.error!==void 0){c=!1;const w=typeof s.error=="function"?await s.error(g):s.error,_=typeof s.description=="function"?await s.description(g):s.description,C=typeof w=="object"&&!Qs.isValidElement(w)?w:{message:w};this.create({id:o,type:"error",description:_,...C})}}).finally(()=>{c&&(this.dismiss(o),o=void 0),s.finally==null||s.finally.call(s)}),p=()=>new Promise((g,w)=>f.then(()=>d[0]==="reject"?w(d[1]):g(d[1])).catch(w));return typeof o!="string"&&typeof o!="number"?{unwrap:p}:Object.assign(o,{unwrap:p})},this.custom=(t,s)=>{const o=(s==null?void 0:s.id)||Sc++;return this.create({jsx:t(o),id:o,...s}),o},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ht=new Eb,Cb=(n,t)=>{const s=(t==null?void 0:t.id)||Sc++;return Ht.addToast({title:n,...t,id:s}),s},Tb=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",Nb=Cb,jb=()=>Ht.toasts,Rb=()=>Ht.getActiveToasts(),Je=Object.assign(Nb,{success:Ht.success,info:Ht.info,warning:Ht.warning,error:Ht.error,custom:Ht.custom,message:Ht.message,promise:Ht.promise,dismiss:Ht.dismiss,loading:Ht.loading},{getHistory:jb,getToasts:Rb});Sb("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ib({chats:n,currentUser:t,onlineUsers:s,onSelectChat:o,onNewChat:a,onCreateGroup:c,onLogout:d,onAcceptRequest:f,onRejectRequest:p,pendingRequests:g,typingUsers:w}){const[_,b]=A.useState(""),C=n.filter(E=>E.partnerName.toLowerCase().includes(_.toLowerCase())||E.lastMessage.toLowerCase().includes(_.toLowerCase())),N=E=>{if(!E)return"";const R=new Date(E),L=new Date().getTime()-R.getTime(),$=Math.floor(L/(1e3*60*60*24));return $===0?R.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):$===1?"Yesterday":$<7?R.toLocaleDateString([],{weekday:"short"}):R.toLocaleDateString([],{month:"short",day:"numeric"})};return m.jsxs("div",{className:"flex flex-col h-full bg-[#111b21] border-r border-gray-700 w-full",children:[m.jsxs("div",{className:"p-4 bg-[#202c33]",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h1",{className:"text-white text-xl font-bold",children:"Chats"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:c,className:"text-gray-400 hover:text-white transition-colors",title:"Create Group",children:m.jsx(lc,{className:"w-5 h-5"})}),m.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",title:"New Chat",children:m.jsx(hv,{className:"w-5 h-5"})}),m.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white transition-colors text-sm font-medium",children:"Logout"})]})]}),m.jsxs("div",{className:"flex items-center gap-3 mb-4 p-2 bg-[#111b21] rounded-lg border border-gray-800",children:[m.jsxs(Do,{className:"w-10 h-10 border border-gray-700",children:[t.avatar_url?m.jsx(Ql,{src:t.avatar_url}):m.jsx(Ql,{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name)}&background=00a884&color=fff`}),m.jsx($o,{className:"bg-[#00a884] text-white",children:t.name.charAt(0).toUpperCase()})]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-white font-bold truncate",children:t.name}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("p",{className:"text-[#00a884] text-xs font-medium truncate",children:["@",t.username]}),m.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`@${t.username}`),Je.success("Username copied!")},className:"text-gray-500 hover:text-[#00a884] transition-colors",children:m.jsx(Xy,{className:"w-3 h-3"})})]})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx(np,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),m.jsx(Lt,{type:"text",placeholder:"Search or start new chat",value:_,onChange:E=>b(E.target.value),className:"pl-10 bg-[#2a3942] border-none text-white placeholder:text-gray-400 h-9"})]})]}),g.length>0&&m.jsxs("div",{className:"p-2 bg-[#202c33] border-t border-gray-800",children:[m.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-[#00a884] text-xs font-bold uppercase tracking-wider mb-2",children:[m.jsx(ep,{className:"w-3 h-3"}),m.jsx("span",{children:"Chat Requests"})]}),m.jsx("div",{className:"space-y-1",children:g.map(E=>{var R;return m.jsxs("div",{className:"bg-[#111b21] p-3 rounded-lg border border-gray-800",children:[m.jsxs("p",{className:"text-white text-sm mb-2 font-medium",children:[m.jsxs("span",{className:"text-[#00a884]",children:["@",(R=E.profiles)==null?void 0:R.username]})," want to chat"]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:()=>f(E.id,E.sender_id),className:"flex-1 bg-[#00a884] hover:bg-[#06cf9c] text-[#111b21] py-1.5 rounded-md text-xs font-bold transition-colors flex items-center justify-center gap-1",children:[m.jsx(hi,{className:"w-3 h-3"})," Accept"]}),m.jsxs("button",{onClick:()=>p(E.id),className:"flex-1 bg-transparent hover:bg-red-500/10 text-red-500 py-1.5 rounded-md text-xs font-bold transition-colors flex items-center justify-center gap-1 border border-red-500/50",children:[m.jsx(fi,{className:"w-3 h-3"})," Ignore"]})]})]},E.id)})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto chat-list-scrollbar",children:C.length===0?m.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 px-4 text-center",children:[m.jsx(Uo,{className:"w-12 h-12 mb-4 opacity-20"}),m.jsx("p",{className:"font-medium",children:"No messages yet"}),m.jsx("p",{className:"text-sm mt-1",children:"Chat with your friends to see them here."})]}):C.map(E=>m.jsxs("div",{onClick:()=>o(E.partnerId,E.partnerName),className:"group flex items-center gap-3 px-4 py-3 hover:bg-[#202c33] cursor-pointer border-b border-[#202c33]/50 transition-colors relative",children:[m.jsxs("div",{className:"relative flex-shrink-0",children:[m.jsxs(Do,{className:"w-12 h-12 border border-gray-800",children:[m.jsx(Ql,{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(E.partnerName)}&background=2a3942&color=00a884`}),m.jsx($o,{className:"bg-[#2a3942] text-[#00a884] font-bold",children:E.partnerName.charAt(0).toUpperCase()})]}),!E.isGroup&&s.has(E.partnerId)&&m.jsx("div",{className:"absolute bottom-0.5 right-0.5 w-3 h-3 bg-[#00a884] border-2 border-[#111b21] rounded-full"}),E.isGroup&&m.jsx("div",{className:"absolute -bottom-1 -right-1 bg-[#202c33] p-0.5 rounded-full",children:m.jsx(lc,{className:"w-3.5 h-3.5 text-[#00a884]"})})]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[m.jsx("h3",{className:"text-white font-medium truncate group-hover:text-[#00a884] transition-colors",children:E.partnerName}),m.jsx("span",{className:"text-[10px] text-gray-500 flex-shrink-0",children:N(E.lastMessageTime)})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("p",{className:`text-sm truncate pr-4 ${w[E.partnerId]?"text-[#00a884] font-bold":"text-gray-400"}`,children:w[E.partnerId]?m.jsxs("span",{className:"flex items-center gap-1",children:["typing",m.jsxs("span",{className:"flex gap-0.5 mt-1",children:[m.jsx("span",{className:"w-0.5 h-0.5 bg-[#00a884] rounded-full animate-bounce [animation-delay:-0.3s]"}),m.jsx("span",{className:"w-0.5 h-0.5 bg-[#00a884] rounded-full animate-bounce [animation-delay:-0.15s]"}),m.jsx("span",{className:"w-0.5 h-0.5 bg-[#00a884] rounded-full animate-bounce"})]})]}):E.lastMessage||"Start a conversation"}),E.unreadCount>0&&m.jsx("span",{className:"bg-[#00a884] text-[#111b21] text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 flex-shrink-0",children:E.unreadCount})]})]})]},E.id))})]})}function Ab({audioUrl:n,duration:t}){const[s,o]=A.useState(!1),[a,c]=A.useState(0),[d,f]=A.useState(t||0),[p,g]=A.useState(1),w=A.useRef(null);A.useEffect(()=>{const R=new Audio(n);return w.current=R,R.addEventListener("loadedmetadata",()=>{f(R.duration)}),R.addEventListener("timeupdate",()=>{c(R.currentTime)}),R.addEventListener("ended",()=>{o(!1),c(0)}),()=>{R.pause(),R.src=""}},[n]);const _=()=>{w.current&&(s?w.current.pause():w.current.play(),o(!s))},b=R=>{if(!w.current)return;const D=parseFloat(R.target.value);w.current.currentTime=D,c(D)},C=()=>{if(!w.current)return;const R=[1,1.5,2],D=R.indexOf(p),L=R[(D+1)%R.length];g(L),w.current.playbackRate=L},N=R=>{const D=Math.floor(R/60),L=Math.floor(R%60);return`${D}:${L.toString().padStart(2,"0")}`},E=d>0?a/d*100:0;return m.jsxs("div",{className:"flex items-center gap-3 bg-[#005c4b] px-3 py-2 rounded-lg max-w-xs",children:[m.jsx(Gr,{onClick:_,size:"icon",className:"w-8 h-8 bg-white/20 hover:bg-white/30 text-white flex-shrink-0",children:s?m.jsx(gv,{className:"w-4 h-4"}):m.jsx(vv,{className:"w-4 h-4 ml-0.5"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"relative h-1 bg-white/20 rounded-full overflow-hidden cursor-pointer group",children:[m.jsx("div",{className:"absolute h-full bg-white/60 rounded-full transition-all",style:{width:`${E}%`}}),m.jsx("input",{type:"range",min:"0",max:d,value:a,onChange:b,className:"absolute inset-0 w-full opacity-0 cursor-pointer"})]}),m.jsxs("div",{className:"flex justify-between items-center mt-1",children:[m.jsx("span",{className:"text-white/80 text-xs font-mono",children:N(a)}),m.jsxs("button",{onClick:C,className:"text-white/60 hover:text-white/90 text-xs font-bold transition-colors",children:[p,"x"]})]})]})]})}function Ob({repliedMessage:n,onCancel:t}){const s=()=>{var o,a,c;return(o=n.fileType)!=null&&o.startsWith("audio/")?" Voice Message":(a=n.fileType)!=null&&a.startsWith("image/")?" Photo":(c=n.fileType)!=null&&c.startsWith("video/")?" Video":n.fileType?" File":n.text};return m.jsx("div",{className:"bg-[#1a252d] border-l-4 border-[#00a884] px-3 py-2 mb-2 rounded-r",children:m.jsxs("div",{className:"flex items-start justify-between gap-2",children:[m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(rp,{className:"w-3 h-3 text-[#00a884]"}),m.jsx("span",{className:"text-[#00a884] text-xs font-medium",children:n.senderName})]}),m.jsx("p",{className:"text-gray-400 text-sm truncate",children:s()})]}),m.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white transition-colors flex-shrink-0",children:m.jsx(fi,{className:"w-4 h-4"})})]})})}function Pb({url:n,type:t,name:s,onClose:o}){const a=t.startsWith("image/"),c=t.startsWith("video/"),d=t.includes("pdf");return m.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/95 flex flex-col items-center justify-center animate-in fade-in duration-200",children:[m.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between bg-gradient-to-b from-black/50 to-transparent",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("p",{className:"text-white font-medium truncate max-w-[200px] sm:max-w-md",children:s}),m.jsx("p",{className:"text-gray-400 text-xs",children:t})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("a",{href:n,download:s,className:"p-2 text-gray-400 hover:text-white transition-colors",children:m.jsx(ev,{className:"w-6 h-6"})}),m.jsx("button",{onClick:o,className:"p-2 text-white hover:bg-white/10 rounded-full transition-colors",children:m.jsx(fi,{className:"w-7 h-7"})})]})]}),m.jsx("div",{className:"w-full h-full flex items-center justify-center p-4 sm:p-10",children:a?m.jsx("img",{src:n,alt:s,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl animate-in zoom-in-95 duration-300"}):c?m.jsx("video",{src:n,controls:!0,autoPlay:!0,className:"max-w-full max-h-full rounded-lg shadow-2xl"}):d?m.jsx("iframe",{src:n,className:"w-full h-full max-w-5xl bg-white rounded-lg shadow-2xl",title:s}):m.jsxs("div",{className:"bg-[#202c33] p-8 rounded-2xl flex flex-col items-center gap-6 max-w-sm text-center shadow-2xl border border-gray-800",children:[m.jsx("div",{className:"w-20 h-20 bg-[#00a884]/20 rounded-full flex items-center justify-center",children:m.jsx(nv,{className:"w-10 h-10 text-[#00a884]"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-white text-xl font-bold mb-2",children:"No Preview Available"}),m.jsxs("p",{className:"text-gray-400 text-sm",children:["This file type (",t,") cannot be previewed directly. You can download it to view."]})]}),m.jsx("a",{href:n,download:s,className:"w-full",children:m.jsx(Gr,{className:"w-full bg-[#00a884] hover:bg-[#00956f] text-white py-6 text-lg",children:"Download File"})})]})})]})}function Db({currentUserId:n,partnerId:t,partnerName:s,messages:o,isPartnerOnline:a,isPartnerTyping:c,onBack:d,onSendMessage:f,onSendVoiceMessage:p,onDeleteMessage:g,onTyping:w,onRefresh:_,onReact:b,isGroup:C}){const[N,E]=A.useState(""),[R,D]=A.useState(null),[L,$]=A.useState(!1),[q,de]=A.useState(!1),[Z,ge]=A.useState(null),[Q,Ne]=A.useState(null),[et,gt]=A.useState(!1),Pe=A.useRef(null),Ae=A.useRef(null),Qe=A.useRef(!1),Ve=A.useRef(null),Re=A.useRef(null),Ce=A.useRef(null),O=A.useRef(o.length);A.useEffect(()=>{N.length>0?(w(!0),Ce.current&&clearTimeout(Ce.current),Ce.current=setTimeout(()=>{w(!1)},2e3)):w(!1)},[N]);const oe=(z=!1)=>{var V;if(!Ae.current)return;const{scrollTop:G,scrollHeight:K,clientHeight:ue}=Ae.current,xe=K-G-ue<100;(z||xe)&&(Qe.current=!0,(V=Pe.current)==null||V.scrollIntoView({behavior:z?"smooth":"auto"}),setTimeout(()=>{Qe.current=!1},500))},J=()=>{if(!Ae.current)return;const{scrollTop:z,scrollHeight:G,clientHeight:K}=Ae.current,ue=G-z-K<200;gt(!ue)};A.useEffect(()=>{const z=setTimeout(()=>oe(!0),300);return()=>clearTimeout(z)},[t]),A.useEffect(()=>{if(o.length>O.current){const{scrollTop:z,scrollHeight:G,clientHeight:K}=Ae.current||{scrollTop:0,scrollHeight:0,clientHeight:0};G-z-K<300&&oe(!0)}O.current=o.length},[o]);const S=z=>{var K;const G=(K=z.target.files)==null?void 0:K[0];if(G){if(G.size>52428800){alert("File size must be less than 50MB");return}D(G)}},P=async z=>{if(z==null||z.preventDefault(),R){$(!0);try{const G=new FormData;G.append("file",R),G.append("userId",n);const ue=await(await fetch(`https://${Fc}.supabase.co/functions/v1/make-server-f2fe46ac/upload`,{method:"POST",headers:{Authorization:`Bearer ${Vc}`},body:G})).json();if(ue.error){console.error("Upload error:",ue.error),alert("Failed to upload file: "+ue.error),$(!1);return}f(N.trim(),ue.fileUrl,ue.fileType,ue.fileName,Z==null?void 0:Z.id),E(""),D(null),ge(null),setTimeout(()=>oe(!0),100),setTimeout(()=>{var xe;return(xe=Re.current)==null?void 0:xe.focus()},10)}catch(G){console.error("Upload error:",G),alert("Upload failed: "+G.message)}finally{$(!1)}}else if(N.trim())try{typeof f!="function"?(console.error("FATAL: onSendMessage is NOT a function!"),alert("Error: Send function missing")):f(N.trim(),void 0,void 0,void 0,Z==null?void 0:Z.id),E(""),ge(null),setTimeout(()=>oe(!0),100),setTimeout(()=>{var G;return(G=Re.current)==null?void 0:G.focus()},10)}catch(G){alert("Send error: "+G.message)}setTimeout(()=>{var G;return(G=Re.current)==null?void 0:G.focus()},10)},ae=z=>z.startsWith("image/")?m.jsx(av,{className:"w-5 h-5 text-blue-400"}):z.startsWith("video/")?m.jsx(Rv,{className:"w-5 h-5 text-purple-400"}):m.jsx(iv,{className:"w-5 h-5 text-gray-400"}),ee=(z,G)=>{var K;return!z.fileUrl||!z.fileType?null:z.fileType.startsWith("image/")?m.jsx("div",{className:"mb-2",children:m.jsx("img",{src:z.fileUrl,alt:z.fileName||"Image",className:"max-w-full max-h-64 rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>Ne({url:z.fileUrl,type:z.fileType,name:z.fileName||"Image"})})}):z.fileType==="audio/webm"||(K=z.fileType)!=null&&K.startsWith("audio/")?m.jsx("div",{className:"mb-2",children:m.jsx(Ab,{audioUrl:z.fileUrl})}):z.fileType.startsWith("video/")?m.jsx("div",{className:"mb-2",children:m.jsx("video",{src:z.fileUrl,controls:!0,className:"max-w-full max-h-64 rounded-lg"})}):m.jsxs("div",{className:`flex items-center gap-2 mb-2 p-2 rounded cursor-pointer hover:opacity-80 transition-opacity ${G?"bg-[#004a3c]":"bg-[#1a252d]"}`,onClick:()=>Ne({url:z.fileUrl,type:z.fileType,name:z.fileName||"File"}),children:[ae(z.fileType),m.jsx("div",{className:"flex-1 min-w-0",children:m.jsx("p",{className:"text-sm truncate",children:z.fileName})})]})};return m.jsxs("div",{className:"flex flex-col h-full bg-[#0b141a] overflow-hidden relative",children:[m.jsxs("div",{className:"bg-[#202c33] px-4 py-3 flex items-center gap-3 sticky top-0 z-50 shadow-md flex-shrink-0",children:[m.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white transition-colors",children:m.jsx(as,{className:"w-6 h-6"})}),m.jsx(Do,{className:"w-10 h-10 bg-[#6b7c85]",children:m.jsx($o,{className:"bg-[#6b7c85] text-white",children:s.charAt(0).toUpperCase()})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-white font-bold",children:s}),!C&&m.jsx("p",{className:"text-gray-400 text-xs flex items-center gap-1",children:c?m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("span",{className:"text-[#00a884] font-bold animate-pulse",children:"typing"}),m.jsxs("div",{className:"flex gap-0.5 mt-0.5",children:[m.jsx("span",{className:"w-1 h-1 bg-[#00a884] rounded-full animate-bounce [animation-delay:-0.3s]"}),m.jsx("span",{className:"w-1 h-1 bg-[#00a884] rounded-full animate-bounce [animation-delay:-0.15s]"}),m.jsx("span",{className:"w-1 h-1 bg-[#00a884] rounded-full animate-bounce"})]})]}):a?m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{children:"Online"}),m.jsx("span",{className:"w-2 h-2 bg-[#00a884] rounded-full inline-block"})]}):"Offline"}),C&&c&&m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("span",{className:"text-[#00a884] text-xs font-bold animate-pulse",children:"Someone is typing"}),m.jsxs("div",{className:"flex gap-0.5 mt-0.5",children:[m.jsx("span",{className:"w-1 h-1 bg-[#00a884] rounded-full animate-bounce [animation-delay:-0.3s]"}),m.jsx("span",{className:"w-1 h-1 bg-[#00a884] rounded-full animate-bounce [animation-delay:-0.15s]"}),m.jsx("span",{className:"w-1 h-1 bg-[#00a884] rounded-full animate-bounce"})]})]})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:_,className:"text-gray-400 hover:text-white transition-colors p-2",title:"Refresh messages",children:m.jsx(tp,{className:"w-5 h-5"})}),m.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",children:m.jsx(Qh,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{ref:Ae,onScroll:J,className:"flex-1 overflow-y-auto px-4 py-6 space-y-3 scroll-smooth",children:[o.length===0?m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsxs("p",{className:"text-gray-500 text-center",children:["No messages yet.",m.jsx("br",{}),"Send a message to start the conversation!"]})}):o.map(z=>{const G=z.senderId===n;return m.jsx("div",{className:`flex ${G?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[75%] rounded-lg px-3 py-2 ${G?"bg-[#005c4b] text-white":"bg-[#202c33] text-white"}`,children:[C&&!G&&m.jsx("p",{className:`text-xs font-bold mb-1 ${["text-orange-400","text-pink-400","text-purple-400","text-blue-400","text-green-400"][z.senderId.charCodeAt(0)%5]}`,children:"~User"}),z.replyToId&&m.jsx("div",{className:`mb-1 p-2 rounded text-xs border-l-4 ${G?"bg-black/20 border-[#00a884]":"bg-white/10 border-[#00a884]"} cursor-pointer opacity-80 hover:opacity-100 transition-opacity`,onClick:()=>{const K=document.getElementById(`msg-${z.replyToId}`);K==null||K.scrollIntoView({behavior:"smooth",block:"center"})},children:(()=>{const K=o.find(ue=>ue.id===z.replyToId);return m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"font-bold text-[#00a884]",children:(K==null?void 0:K.senderId)===n?"You":(K==null?void 0:K.senderId)===t?s:"User"}),m.jsx("p",{className:"truncate opacity-70",children:K?K.text||(K.fileType?"File":""):"Original message deleted"})]})})()}),ee(z,G),m.jsx("p",{className:"break-words",children:z.text}),z.reactions&&Object.entries(z.reactions).length>0&&m.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5 -mb-1",children:Object.entries(z.reactions).map(([K,ue])=>{if(!ue||ue.length===0)return null;const xe=ue.includes(n);return m.jsxs("button",{onClick:V=>{V.stopPropagation(),b(z.id,K)},className:`flex items-center gap-1.5 px-1.5 py-0.5 rounded-full text-[10px] transition-all
                              ${xe?"bg-[#00a884]/20 border border-[#00a884]/30":"bg-black/20 border border-transparent hover:bg-black/40"}`,children:[m.jsx("span",{children:K}),ue.length>1&&m.jsx("span",{className:"font-bold opacity-70",children:ue.length})]},K)})}),m.jsxs("div",{className:"flex items-center justify-between gap-2 mt-1",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:()=>ge({id:z.id,senderName:G?"You":s,text:z.text,fileType:z.fileType}),className:"text-gray-500 hover:text-[#00a884] transition-colors p-1",title:"Reply",children:m.jsx(rp,{className:"w-3 h-3"})}),G&&m.jsx("button",{onClick:()=>{confirm("Delete this message for everyone?")&&g(z.id)},className:"text-gray-500 hover:text-red-500 transition-colors p-1",title:"Delete",children:m.jsx(Ev,{className:"w-3.5 h-3.5"})}),m.jsxs("button",{className:"group/react relative text-gray-500 hover:text-yellow-500 transition-colors p-1",title:"React",children:[m.jsx(Qh,{className:"w-3.5 h-3.5"}),m.jsx("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover/react:flex items-center gap-1 bg-[#233138] p-1.5 rounded-full shadow-xl border border-gray-700 z-[100] animate-in fade-in zoom-in slide-in-from-bottom-2",children:["","","","","",""].map(K=>m.jsx("button",{onClick:ue=>{ue.stopPropagation(),b(z.id,K)},className:"hover:scale-125 transition-transform p-1 rounded-full hover:bg-white/10",children:K},K))})]})]}),m.jsxs("div",{className:"flex items-center justify-between gap-2 mt-1",children:[m.jsx("span",{className:"text-[10px] text-gray-300 min-w-[40px] text-right",children:new Date(z.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),G&&(z.isRead?m.jsx(Yh,{className:"w-3 h-3 text-blue-400"}):!C&&a?m.jsx(Yh,{className:"w-3 h-3 text-gray-400"}):m.jsx(hi,{className:"w-3 h-3 text-gray-400"}))]})]})]})},z.id)}),m.jsx("div",{ref:Pe})]}),Q&&m.jsx(Pb,{url:Q.url,type:Q.type,name:Q.name,onClose:()=>Ne(null)}),et&&m.jsx("button",{onClick:()=>oe(!0),className:"absolute bottom-20 right-4 bg-[#202c33] text-[#00a884] p-3 rounded-full shadow-2xl border border-gray-700 z-50 animate-in fade-in zoom-in duration-200 hover:bg-[#2a3942]",children:m.jsx(as,{className:"w-6 h-6 rotate-[-90deg]"})}),m.jsxs("div",{className:"bg-[#202c33] px-4 py-3",children:[Z&&m.jsx(Ob,{repliedMessage:Z,onCancel:()=>ge(null)}),R&&m.jsxs("div",{className:"mb-2 flex items-center gap-2 bg-[#2a3942] rounded-lg px-3 py-2",children:[ae(R.type),m.jsx("p",{className:"text-sm text-white flex-1 truncate",children:R.name}),m.jsx("button",{type:"button",onClick:()=>D(null),className:"text-gray-400 hover:text-white",children:m.jsx(fi,{className:"w-4 h-4"})})]}),L&&m.jsx("div",{className:"mb-2 text-center text-sm text-gray-400",children:"Uploading file..."}),m.jsxs("form",{onSubmit:P,className:"flex gap-2 items-center",children:[m.jsx("input",{type:"file",ref:Ve,onChange:S,className:"hidden",accept:"image/*,video/*,.pdf,.doc,.docx,.txt,.zip"}),m.jsx(Gr,{type:"button",onClick:()=>{var z;window.alert("Attach clicked"),(z=Ve.current)==null||z.click()},className:"bg-[#2a3942] hover:bg-[#1a252d] text-gray-400 hover:text-white flex-shrink-0 p-2",disabled:L,children:m.jsx(pv,{className:"w-5 h-5"})}),m.jsx(Lt,{ref:Re,type:"text",inputMode:"text",placeholder:"Type a message",value:N,onChange:z=>E(z.target.value),className:"flex-1 bg-[#2a3942] border-none text-white placeholder:text-gray-500 h-10",autoComplete:"off",autoCorrect:"off",autoCapitalize:"sentences"}),(N.trim()||R)&&m.jsx("button",{type:"submit",className:"bg-[#00a884] hover:bg-[#00956f] text-white flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center cursor-pointer active:scale-95 transition-transform",children:m.jsx(kv,{className:"w-5 h-5"})})]})]})]})}function $b({onBack:n,currentUserId:t}){const[s,o]=A.useState(""),[a,c]=A.useState("user"),[d,f]=A.useState(null),[p,g]=A.useState(!1),[w,_]=A.useState(!1),[b,C]=A.useState(!1),N=async()=>{if(!s.trim())return;const D=s.trim().toLowerCase().replace(a==="user"?"@":"#","");g(!0),_(!1),f(null);try{if(a==="user"){const{data:L}=await _e.from("profiles").select("id, display_name, username").eq("username",D).maybeSingle();if(L){if(L.id===t){_(!0);return}const{data:$}=await _e.from("conversation_participants").select("conversation_id").eq("user_id",L.id),q=($==null?void 0:$.map(ge=>ge.conversation_id))||[];let de=!1;if(q.length>0){const{data:ge}=await _e.from("conversation_participants").select("conversation_id").eq("user_id",t).in("conversation_id",q).maybeSingle();de=!!ge}const{data:Z}=await _e.from("chat_requests").select("status, sender_id").or(`and(sender_id.eq.${t},receiver_id.eq.${L.id}),and(sender_id.eq.${L.id},receiver_id.eq.${t})`).maybeSingle();f({id:L.id,identifier:L.username,name:L.display_name||L.username,hasChat:de,requestStatus:Z==null?void 0:Z.status,requestSenderId:Z==null?void 0:Z.sender_id})}else _(!0)}else{const{data:L}=await _e.from("groups").select("id, name, group_id, description").eq("group_id",D).maybeSingle();if(L){const{data:$}=await _e.from("group_members").select("id").eq("group_id",L.id).eq("user_id",t).maybeSingle();f({id:L.id,identifier:L.group_id,name:L.name,description:L.description,isMember:!!$})}else _(!0)}}catch(L){console.error("Search error:",L),_(!0)}finally{g(!1)}},E=async()=>{if(!(!d||b)){C(!0);try{const{error:D}=await _e.from("chat_requests").upsert({sender_id:t,receiver_id:d.id,status:"pending"},{onConflict:"sender_id,receiver_id"});if(D)throw D;Je.success("Request sent successfully!"),f(L=>L?{...L,requestStatus:"pending",requestSenderId:t}:null)}catch(D){Je.error(D.message||"Failed to send request")}finally{C(!1)}}},R=async()=>{if(!(!d||b)){C(!0);try{const{error:D}=await _e.from("group_members").insert({group_id:d.id,user_id:t,role:"member"});if(D)throw D;Je.success("Joined group successfully!"),f(L=>L?{...L,isMember:!0}:null)}catch(D){console.error("Join group error:",D),Je.error("Failed to join group")}finally{C(!1)}}};return m.jsxs("div",{className:"flex flex-col h-[100dvh] bg-[#111b21] overflow-hidden",children:[m.jsxs("div",{className:"bg-[#202c33] px-4 py-3 flex items-center gap-3",children:[m.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:m.jsx(as,{className:"w-6 h-6"})}),m.jsx("h2",{className:"text-white text-xl",children:"New Chat / Join Group"})]}),m.jsxs("div",{className:"flex border-b border-gray-800 relative z-10",children:[m.jsx("button",{type:"button",onClick:()=>{c("user"),f(null),_(!1),o("")},className:`flex-1 py-4 text-sm font-bold transition-colors ${a==="user"?"text-[#00a884] border-b-2 border-[#00a884]":"text-gray-400 hover:text-white"}`,children:"Find User"}),m.jsx("button",{type:"button",onClick:()=>{c("group"),f(null),_(!1),o("")},className:`flex-1 py-4 text-sm font-bold transition-colors ${a==="group"?"text-[#00a884] border-b-2 border-[#00a884]":"text-gray-400 hover:text-white"}`,children:"Find Group"})]}),m.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto",children:m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsx("p",{className:"text-gray-400 mb-4",children:a==="user"?"Search for users by their username (e.g. @elgin)":"Search for groups by their Group ID (e.g. #developers)"}),m.jsxs("form",{onSubmit:D=>{D.preventDefault(),N()},className:"flex gap-2 mb-6 relative z-50",children:[m.jsxs("div",{className:"relative flex-1 font-bold",children:[m.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#00a884] font-bold pointer-events-none",children:a==="user"?"@":"#"}),m.jsx(Lt,{type:"text",inputMode:"search",autoComplete:"off",autoCorrect:"off",spellCheck:"false",placeholder:a==="user"?"username":"group-id",value:s,onChange:D=>{o(D.target.value),_(!1),f(null)},className:"pl-8 bg-[#2a3942] border-none text-white placeholder:text-gray-500 h-12 text-base"})]}),m.jsx("button",{type:"submit",disabled:p||!s.trim(),className:"bg-[#00a884] hover:bg-[#00956f] active:bg-[#007a60] text-white h-12 px-6 rounded-md flex items-center justify-center transition-all",children:m.jsx(np,{className:"w-6 h-6 pointer-events-none"})})]}),p&&m.jsx("div",{className:"text-center text-gray-400 py-8",children:"Searching..."}),w&&m.jsxs("div",{className:"bg-[#202c33] rounded-lg p-4 text-center",children:[m.jsxs("p",{className:"text-gray-400",children:[a==="user"?"User":"Group"," not found"]}),m.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Make sure the ID is correct"})]}),d&&m.jsxs("div",{className:"bg-[#202c33] rounded-lg p-4 animate-in fade-in zoom-in duration-200",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-white text-lg font-bold",children:d.name}),m.jsxs("p",{className:"text-[#00a884] text-sm font-medium",children:[a==="user"?"@":"#",d.identifier]}),d.description&&m.jsx("p",{className:"text-gray-400 text-sm mt-1",children:d.description})]}),m.jsx("div",{className:"w-12 h-12 bg-[#00a884] rounded-full flex items-center justify-center text-white",children:a==="user"?m.jsx(sp,{className:"w-6 h-6"}):m.jsx(lc,{className:"w-6 h-6"})})]}),a==="user"?d.hasChat?m.jsx("p",{className:"text-[#00a884] text-center py-2 text-sm font-medium",children:"You already have a chat with this user"}):d.requestStatus==="pending"?m.jsx("div",{className:"text-center py-2",children:m.jsx("p",{className:"text-yellow-500 text-sm font-medium",children:d.requestSenderId===t?"Request already pending":"Sent you a request!"})}):m.jsx(Gr,{onClick:E,disabled:b,className:"w-full bg-[#00a884] hover:bg-[#00956f] text-white font-bold",children:b?"Sending...":"Send Chat Request"}):d.isMember?m.jsx("p",{className:"text-[#00a884] text-center py-2 text-sm font-medium",children:"You are already a member"}):m.jsx(Gr,{onClick:R,disabled:b,className:"w-full bg-[#00a884] hover:bg-[#00956f] text-white font-bold",children:b?"Joining...":"Join Group"})]})]})})]})}function Lb({onBack:n,currentUserId:t}){const[s,o]=A.useState(""),[a,c]=A.useState(""),[d,f]=A.useState(""),[p,g]=A.useState(!1),w=async()=>{if(!s.trim()||!a.trim()){Je.error("Please fill in required fields");return}g(!0);try{const{data:_,error:b}=await _e.from("groups").insert({name:s.trim(),group_id:a.trim().toLowerCase(),description:d.trim(),created_by:t}).select().single();if(b)throw b;const{error:C}=await _e.from("group_members").insert({group_id:_.id,user_id:t,role:"admin"});if(C)throw C;Je.success("Group created successfully!"),n()}catch(_){console.error("Error creating group:",_),_.code==="23505"?Je.error("Group ID already taken"):Je.error("Failed to create group")}finally{g(!1)}};return m.jsxs("div",{className:"flex flex-col h-screen bg-[#111b21]",children:[m.jsxs("div",{className:"bg-[#202c33] px-4 py-3 flex items-center gap-3",children:[m.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:m.jsx(as,{className:"w-6 h-6"})}),m.jsx("h2",{className:"text-white text-xl",children:"Create New Group"})]}),m.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto",children:m.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[m.jsx("div",{className:"flex justify-center",children:m.jsxs("div",{className:"w-24 h-24 bg-[#2a3942] rounded-full flex items-center justify-center cursor-pointer hover:bg-[#374248] transition-colors relative group",children:[m.jsx(Gy,{className:"w-8 h-8 text-gray-400"}),m.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx("span",{className:"text-white text-xs",children:"Change Icon"})})]})}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Group Name *"}),m.jsx(Lt,{type:"text",placeholder:"Enter group name",value:s,onChange:_=>o(_.target.value),className:"bg-[#2a3942] border-none text-white placeholder:text-gray-500 h-12"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Group ID (Unique) *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#00a884] font-bold",children:"#"}),m.jsx(Lt,{type:"text",placeholder:"unique-group-id",value:a,onChange:_=>c(_.target.value.toLowerCase().replace(/\s/g,"-")),className:"pl-8 bg-[#2a3942] border-none text-white placeholder:text-gray-500 h-12"})]}),m.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Users will use this ID to find and join the group"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Description"}),m.jsx(Lt,{type:"text",placeholder:"What is this group about?",value:d,onChange:_=>f(_.target.value),className:"bg-[#2a3942] border-none text-white placeholder:text-gray-500 h-12"})]})]}),m.jsx(Gr,{onClick:w,disabled:p||!s.trim()||!a.trim(),className:"w-full bg-[#00a884] hover:bg-[#00956f] text-white py-6 text-lg",children:p?"Creating...":"Create Group"})]})})]})}function Mb({requests:n,onAccept:t,onReject:s}){return n.length===0?m.jsx("div",{className:"p-6 text-center text-gray-400",children:m.jsx("p",{className:"text-sm",children:"No pending requests"})}):m.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar",children:n.map(o=>m.jsxs("div",{className:"flex items-center gap-3 px-3 py-3 border-b border-gray-800/50 hover:bg-[#2a3942]/50 transition-colors",children:[m.jsx(Do,{className:"w-9 h-9 bg-[#00a884]",children:m.jsx($o,{className:"bg-[#00a884] text-white text-xs",children:o.sender_name.charAt(0).toUpperCase()})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-white text-sm font-medium truncate",children:o.sender_name}),m.jsx("p",{className:"text-gray-500 text-[10px] truncate",children:"Sent a chat request"})]}),m.jsxs("div",{className:"flex gap-1.5",children:[m.jsx("button",{onClick:()=>t(o.id,o.sender_id),className:"w-7 h-7 flex items-center justify-center bg-[#00a884] hover:bg-[#00956f] rounded-full transition-colors",title:"Accept",children:m.jsx(hi,{className:"w-4 h-4 text-white"})}),m.jsx("button",{onClick:()=>s(o.id),className:"w-7 h-7 flex items-center justify-center bg-red-500/10 hover:bg-red-500/20 rounded-full transition-colors",title:"Reject",children:m.jsx(fi,{className:"w-4 h-4 text-red-500"})})]})]},o.id))})}function If({onFinish:n}){return A.useEffect(()=>{const t=setTimeout(()=>{n()},2500);return()=>clearTimeout(t)},[n]),m.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-[#00a884] via-[#008069] to-[#005c4b] animate-pulse",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-32 h-32 bg-white rounded-full flex items-center justify-center mb-6 shadow-2xl animate-bounce",children:m.jsx(Uo,{className:"w-20 h-20 text-[#00a884]",strokeWidth:2.5})}),m.jsx("div",{className:"absolute -bottom-4 -right-4 w-12 h-12 bg-[#25d366] rounded-full flex items-center justify-center shadow-xl",children:m.jsx("span",{className:"text-white text-3xl font-bold",children:""})})]}),m.jsx("h1",{className:"text-white text-5xl font-bold mb-2 tracking-tight",children:"Chat App"}),m.jsx("p",{className:"text-white/90 text-xl mb-8",children:"Connect instantly, chat freely"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),m.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),m.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),m.jsx("p",{className:"absolute bottom-8 text-white/60 text-sm",children:"v2.0 - Powered by Figma Make"})]})}const Ub="modulepreload",zb=function(n){return"/Chat-App/"+n},Af={},Bb=function(t,s,o){let a=Promise.resolve();if(s&&s.length>0){let d=function(g){return Promise.all(g.map(w=>Promise.resolve(w).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=d(s.map(g=>{if(g=zb(g),g in Af)return;Af[g]=!0;const w=g.endsWith(".css"),_=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const b=document.createElement("link");if(b.rel=w?"stylesheet":Ub,w||(b.as="script"),b.crossOrigin="",b.href=g,p&&b.setAttribute("nonce",p),document.head.appendChild(b),w)return new Promise((C,N)=>{b.addEventListener("load",C),b.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return a.then(d=>{for(const f of d||[])f.status==="rejected"&&c(f.reason);return t().catch(c)})},Fb=()=>{};var Of={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=function(n){const t=[];let s=0;for(let o=0;o<n.length;o++){let a=n.charCodeAt(o);a<128?t[s++]=a:a<2048?(t[s++]=a>>6|192,t[s++]=a&63|128):(a&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++o)&1023),t[s++]=a>>18|240,t[s++]=a>>12&63|128,t[s++]=a>>6&63|128,t[s++]=a&63|128):(t[s++]=a>>12|224,t[s++]=a>>6&63|128,t[s++]=a&63|128)}return t},Vb=function(n){const t=[];let s=0,o=0;for(;s<n.length;){const a=n[s++];if(a<128)t[o++]=String.fromCharCode(a);else if(a>191&&a<224){const c=n[s++];t[o++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=n[s++],d=n[s++],f=n[s++],p=((a&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;t[o++]=String.fromCharCode(55296+(p>>10)),t[o++]=String.fromCharCode(56320+(p&1023))}else{const c=n[s++],d=n[s++];t[o++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return t.join("")},Xp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<n.length;a+=3){const c=n[a],d=a+1<n.length,f=d?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,w=c>>2,_=(c&3)<<4|f>>4;let b=(f&15)<<2|g>>6,C=g&63;p||(C=64,d||(b=64)),o.push(s[w],s[_],s[b],s[C])}return o.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Qp(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Vb(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<n.length;){const c=s[n.charAt(a++)],f=a<n.length?s[n.charAt(a)]:0;++a;const g=a<n.length?s[n.charAt(a)]:64;++a;const _=a<n.length?s[n.charAt(a)]:64;if(++a,c==null||f==null||g==null||_==null)throw new Wb;const b=c<<2|f>>4;if(o.push(b),g!==64){const C=f<<4&240|g>>2;if(o.push(C),_!==64){const N=g<<6&192|_;o.push(N)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Wb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qb=function(n){const t=Qp(n);return Xp.encodeByteArray(t,!0)},Zp=function(n){return qb(n).replace(/\./g,"")},Hb=function(n){try{return Xp.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=()=>Kb().__FIREBASE_DEFAULTS__,Jb=()=>{if(typeof process>"u"||typeof Of>"u")return;const n=Of.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Yb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Hb(n[1]);return t&&JSON.parse(t)},Qb=()=>{try{return Fb()||Gb()||Jb()||Yb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},em=()=>{var n;return(n=Qb())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,o)=>{s?this.reject(s):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,o))}}}function tm(){try{return typeof indexedDB=="object"}catch{return!1}}function rm(){return new Promise((n,t)=>{try{let s=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),s||self.indexedDB.deleteDatabase(o),n(!0)},a.onupgradeneeded=()=>{s=!1},a.onerror=()=>{var c;t(((c=a.error)==null?void 0:c.message)||"")}}catch(s){t(s)}})}function Zb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="FirebaseError";class ds extends Error{constructor(t,s,o){super(s),this.code=t,this.customData=o,this.name=ex,Object.setPrototypeOf(this,ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fo.prototype.create)}}class Fo{constructor(t,s,o){this.service=t,this.serviceName=s,this.errors=o}create(t,...s){const o=s[0]||{},a=`${this.service}/${t}`,c=this.errors[t],d=c?tx(c,o):"Error",f=`${this.serviceName}: ${d} (${a}).`;return new ds(a,f,o)}}function tx(n,t){return n.replace(rx,(s,o)=>{const a=t[o];return a!=null?String(a):`<${o}?>`})}const rx=/\{\$([^}]+)}/g;function Ec(n,t){if(n===t)return!0;const s=Object.keys(n),o=Object.keys(t);for(const a of s){if(!o.includes(a))return!1;const c=n[a],d=t[a];if(Pf(c)&&Pf(d)){if(!Ec(c,d))return!1}else if(c!==d)return!1}for(const a of o)if(!s.includes(a))return!1;return!0}function Pf(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(n){return n&&n._delegate?n._delegate:n}class Jr{constructor(t,s,o){this.name=t,this.instanceFactory=s,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const o=new Xb;if(this.instancesDeferred.set(s,o),this.isInitialized(s)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:s});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(t==null?void 0:t.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ix(t))try{this.getOrInitializeService({instanceIdentifier:pn})}catch{}for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);try{const c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch{}}}}clearInstance(t=pn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=pn){return this.instances.has(t)}getOptions(t=pn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:s});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);o===f&&d.resolve(a)}return a}onInit(t,s){const o=this.normalizeInstanceIdentifier(s),a=this.onInitCallbacks.get(o)??new Set;a.add(t),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&t(c,o),()=>{a.delete(t)}}invokeOnInitCallbacks(t,s){const o=this.onInitCallbacks.get(s);if(o)for(const a of o)try{a(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:sx(t),options:s}),this.instances.set(t,o),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=pn){return this.component?this.component.multipleInstances?t:pn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sx(n){return n===pn?void 0:n}function ix(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new nx(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const ax={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},lx=ze.INFO,cx={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},ux=(n,t,...s)=>{if(t<n.logLevel)return;const o=new Date().toISOString(),a=cx[t];if(a)console[a](`[${o}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dx{constructor(t){this.name=t,this._logLevel=lx,this._logHandler=ux,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ze))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ax[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...t),this._logHandler(this,ze.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...t),this._logHandler(this,ze.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...t),this._logHandler(this,ze.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...t),this._logHandler(this,ze.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...t),this._logHandler(this,ze.ERROR,...t)}}const hx=(n,t)=>t.some(s=>n instanceof s);let Df,$f;function fx(){return Df||(Df=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function px(){return $f||($f=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sm=new WeakMap,Cc=new WeakMap,im=new WeakMap,Xl=new WeakMap,qc=new WeakMap;function mx(n){const t=new Promise((s,o)=>{const a=()=>{n.removeEventListener("success",c),n.removeEventListener("error",d)},c=()=>{s(_r(n.result)),a()},d=()=>{o(n.error),a()};n.addEventListener("success",c),n.addEventListener("error",d)});return t.then(s=>{s instanceof IDBCursor&&sm.set(s,n)}).catch(()=>{}),qc.set(t,n),t}function gx(n){if(Cc.has(n))return;const t=new Promise((s,o)=>{const a=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",d),n.removeEventListener("abort",d)},c=()=>{s(),a()},d=()=>{o(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",c),n.addEventListener("error",d),n.addEventListener("abort",d)});Cc.set(n,t)}let Tc={get(n,t,s){if(n instanceof IDBTransaction){if(t==="done")return Cc.get(n);if(t==="objectStoreNames")return n.objectStoreNames||im.get(n);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return _r(n[t])},set(n,t,s){return n[t]=s,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function yx(n){Tc=n(Tc)}function vx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const o=n.call(Zl(this),t,...s);return im.set(o,t.sort?t.sort():[t]),_r(o)}:px().includes(n)?function(...t){return n.apply(Zl(this),t),_r(sm.get(this))}:function(...t){return _r(n.apply(Zl(this),t))}}function wx(n){return typeof n=="function"?vx(n):(n instanceof IDBTransaction&&gx(n),hx(n,fx())?new Proxy(n,Tc):n)}function _r(n){if(n instanceof IDBRequest)return mx(n);if(Xl.has(n))return Xl.get(n);const t=wx(n);return t!==n&&(Xl.set(n,t),qc.set(t,n)),t}const Zl=n=>qc.get(n);function Vo(n,t,{blocked:s,upgrade:o,blocking:a,terminated:c}={}){const d=indexedDB.open(n,t),f=_r(d);return o&&d.addEventListener("upgradeneeded",p=>{o(_r(d.result),p.oldVersion,p.newVersion,_r(d.transaction),p)}),s&&d.addEventListener("blocked",p=>s(p.oldVersion,p.newVersion,p)),f.then(p=>{c&&p.addEventListener("close",()=>c()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}function ec(n,{blocked:t}={}){const s=indexedDB.deleteDatabase(n);return t&&s.addEventListener("blocked",o=>t(o.oldVersion,o)),_r(s).then(()=>{})}const _x=["get","getKey","getAll","getAllKeys","count"],bx=["put","add","delete","clear"],tc=new Map;function Lf(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(tc.get(t))return tc.get(t);const s=t.replace(/FromIndex$/,""),o=t!==s,a=bx.includes(s);if(!(s in(o?IDBIndex:IDBObjectStore).prototype)||!(a||_x.includes(s)))return;const c=async function(d,...f){const p=this.transaction(d,a?"readwrite":"readonly");let g=p.store;return o&&(g=g.index(f.shift())),(await Promise.all([g[s](...f),a&&p.done]))[0]};return tc.set(t,c),c}yx(n=>({...n,get:(t,s,o)=>Lf(t,s)||n.get(t,s,o),has:(t,s)=>!!Lf(t,s)||n.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(kx(s)){const o=s.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(s=>s).join(" ")}}function kx(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Nc="@firebase/app",Mf="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new dx("@firebase/app"),Sx="@firebase/app-compat",Ex="@firebase/analytics-compat",Cx="@firebase/analytics",Tx="@firebase/app-check-compat",Nx="@firebase/app-check",jx="@firebase/auth",Rx="@firebase/auth-compat",Ix="@firebase/database",Ax="@firebase/data-connect",Ox="@firebase/database-compat",Px="@firebase/functions",Dx="@firebase/functions-compat",$x="@firebase/installations",Lx="@firebase/installations-compat",Mx="@firebase/messaging",Ux="@firebase/messaging-compat",zx="@firebase/performance",Bx="@firebase/performance-compat",Fx="@firebase/remote-config",Vx="@firebase/remote-config-compat",Wx="@firebase/storage",qx="@firebase/storage-compat",Hx="@firebase/firestore",Kx="@firebase/ai",Gx="@firebase/firestore-compat",Jx="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="[DEFAULT]",Yx={[Nc]:"fire-core",[Sx]:"fire-core-compat",[Cx]:"fire-analytics",[Ex]:"fire-analytics-compat",[Nx]:"fire-app-check",[Tx]:"fire-app-check-compat",[jx]:"fire-auth",[Rx]:"fire-auth-compat",[Ix]:"fire-rtdb",[Ax]:"fire-data-connect",[Ox]:"fire-rtdb-compat",[Px]:"fire-fn",[Dx]:"fire-fn-compat",[$x]:"fire-iid",[Lx]:"fire-iid-compat",[Mx]:"fire-fcm",[Ux]:"fire-fcm-compat",[zx]:"fire-perf",[Bx]:"fire-perf-compat",[Fx]:"fire-rc",[Vx]:"fire-rc-compat",[Wx]:"fire-gcs",[qx]:"fire-gcs-compat",[Hx]:"fire-fst",[Gx]:"fire-fst-compat",[Kx]:"fire-vertex","fire-js":"fire-js",[Jx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new Map,Qx=new Map,Rc=new Map;function Uf(n,t){try{n.container.addComponent(t)}catch(s){br.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,s)}}function _n(n){const t=n.name;if(Rc.has(t))return br.debug(`There were multiple attempts to register component ${t}.`),!1;Rc.set(t,n);for(const s of Lo.values())Uf(s,n);for(const s of Qx.values())Uf(s,n);return!0}function Hc(n,t){const s=n.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),n.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hr=new Fo("app","Firebase",Xx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(t,s,o){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}function om(n,t={}){let s=n;typeof t!="object"&&(t={name:t});const o={name:jc,automaticDataCollectionEnabled:!0,...t},a=o.name;if(typeof a!="string"||!a)throw Hr.create("bad-app-name",{appName:String(a)});if(s||(s=em()),!s)throw Hr.create("no-options");const c=Lo.get(a);if(c){if(Ec(s,c.options)&&Ec(o,c.config))return c;throw Hr.create("duplicate-app",{appName:a})}const d=new ox(a);for(const p of Rc.values())d.addComponent(p);const f=new Zx(s,o,d);return Lo.set(a,f),f}function ek(n=jc){const t=Lo.get(n);if(!t&&n===jc&&em())return om();if(!t)throw Hr.create("no-app",{appName:n});return t}function Kr(n,t,s){let o=Yx[n]??n;s&&(o+=`-${s}`);const a=o.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const d=[`Unable to register library "${o}" with version "${t}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),br.warn(d.join(" "));return}_n(new Jr(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="firebase-heartbeat-database",rk=1,ci="firebase-heartbeat-store";let rc=null;function am(){return rc||(rc=Vo(tk,rk,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(ci)}catch(s){console.warn(s)}}}}).catch(n=>{throw Hr.create("idb-open",{originalErrorMessage:n.message})})),rc}async function nk(n){try{const s=(await am()).transaction(ci),o=await s.objectStore(ci).get(lm(n));return await s.done,o}catch(t){if(t instanceof ds)br.warn(t.message);else{const s=Hr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});br.warn(s.message)}}}async function zf(n,t){try{const o=(await am()).transaction(ci,"readwrite");await o.objectStore(ci).put(t,lm(n)),await o.done}catch(s){if(s instanceof ds)br.warn(s.message);else{const o=Hr.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});br.warn(o.message)}}}function lm(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=1024,ik=30;class ok{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new lk(s),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var t,s;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Bf();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>ik){const d=ck(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){br.warn(o)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=Bf(),{heartbeatsToSend:o,unsentEntries:a}=ak(this._heartbeatsCache.heartbeats),c=Zp(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=s,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(s){return br.warn(s),""}}}function Bf(){return new Date().toISOString().substring(0,10)}function ak(n,t=sk){const s=[];let o=n.slice();for(const a of n){const c=s.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),Ff(s)>t){c.dates.pop();break}}else if(s.push({agent:a.agent,dates:[a.date]}),Ff(s)>t){s.pop();break}o=o.slice(1)}return{heartbeatsToSend:s,unsentEntries:o}}class lk{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tm()?rm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await nk(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return zf(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return zf(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function Ff(n){return Zp(JSON.stringify({version:2,heartbeats:n})).length}function ck(n){if(n.length===0)return-1;let t=0,s=n[0].date;for(let o=1;o<n.length;o++)n[o].date<s&&(s=n[o].date,t=o);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(n){_n(new Jr("platform-logger",t=>new xx(t),"PRIVATE")),_n(new Jr("heartbeat",t=>new ok(t),"PRIVATE")),Kr(Nc,Mf,n),Kr(Nc,Mf,"esm2020"),Kr("fire-js","")}uk("");var dk="firebase",hk="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(dk,hk,"app");const cm="@firebase/installations",Kc="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um=1e4,dm=`w:${Kc}`,hm="FIS_v2",fk="https://firebaseinstallations.googleapis.com/v1",pk=3600*1e3,mk="installations",gk="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},bn=new Fo(mk,gk,yk);function fm(n){return n instanceof ds&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm({projectId:n}){return`${fk}/projects/${n}/installations`}function mm(n){return{token:n.token,requestStatus:2,expiresIn:wk(n.expiresIn),creationTime:Date.now()}}async function gm(n,t){const o=(await t.json()).error;return bn.create("request-failed",{requestName:n,serverCode:o.code,serverMessage:o.message,serverStatus:o.status})}function ym({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function vk(n,{refreshToken:t}){const s=ym(n);return s.append("Authorization",_k(t)),s}async function vm(n){const t=await n();return t.status>=500&&t.status<600?n():t}function wk(n){return Number(n.replace("s","000"))}function _k(n){return`${hm} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk({appConfig:n,heartbeatServiceProvider:t},{fid:s}){const o=pm(n),a=ym(n),c=t.getImmediate({optional:!0});if(c){const g=await c.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const d={fid:s,authVersion:hm,appId:n.appId,sdkVersion:dm},f={method:"POST",headers:a,body:JSON.stringify(d)},p=await vm(()=>fetch(o,f));if(p.ok){const g=await p.json();return{fid:g.fid||s,registrationStatus:2,refreshToken:g.refreshToken,authToken:mm(g.authToken)}}else throw await gm("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=/^[cdef][\w-]{21}$/,Ic="";function Sk(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const s=Ek(n);return kk.test(s)?s:Ic}catch{return Ic}}function Ek(n){return xk(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=new Map;function bm(n,t){const s=Wo(n);xm(s,t),Ck(s,t)}function xm(n,t){const s=_m.get(n);if(s)for(const o of s)o(t)}function Ck(n,t){const s=Tk();s&&s.postMessage({key:n,fid:t}),Nk()}let wn=null;function Tk(){return!wn&&"BroadcastChannel"in self&&(wn=new BroadcastChannel("[Firebase] FID Change"),wn.onmessage=n=>{xm(n.data.key,n.data.fid)}),wn}function Nk(){_m.size===0&&wn&&(wn.close(),wn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="firebase-installations-database",Rk=1,xn="firebase-installations-store";let nc=null;function Gc(){return nc||(nc=Vo(jk,Rk,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(xn)}}})),nc}async function Mo(n,t){const s=Wo(n),a=(await Gc()).transaction(xn,"readwrite"),c=a.objectStore(xn),d=await c.get(s);return await c.put(t,s),await a.done,(!d||d.fid!==t.fid)&&bm(n,t.fid),t}async function km(n){const t=Wo(n),o=(await Gc()).transaction(xn,"readwrite");await o.objectStore(xn).delete(t),await o.done}async function qo(n,t){const s=Wo(n),a=(await Gc()).transaction(xn,"readwrite"),c=a.objectStore(xn),d=await c.get(s),f=t(d);return f===void 0?await c.delete(s):await c.put(f,s),await a.done,f&&(!d||d.fid!==f.fid)&&bm(n,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(n){let t;const s=await qo(n.appConfig,o=>{const a=Ik(o),c=Ak(n,a);return t=c.registrationPromise,c.installationEntry});return s.fid===Ic?{installationEntry:await t}:{installationEntry:s,registrationPromise:t}}function Ik(n){const t=n||{fid:Sk(),registrationStatus:0};return Sm(t)}function Ak(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(bn.create("app-offline"));return{installationEntry:t,registrationPromise:a}}const s={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},o=Ok(n,s);return{installationEntry:s,registrationPromise:o}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Pk(n)}:{installationEntry:t}}async function Ok(n,t){try{const s=await bk(n,t);return Mo(n.appConfig,s)}catch(s){throw fm(s)&&s.customData.serverCode===409?await km(n.appConfig):await Mo(n.appConfig,{fid:t.fid,registrationStatus:0}),s}}async function Pk(n){let t=await Vf(n.appConfig);for(;t.registrationStatus===1;)await wm(100),t=await Vf(n.appConfig);if(t.registrationStatus===0){const{installationEntry:s,registrationPromise:o}=await Jc(n);return o||s}return t}function Vf(n){return qo(n,t=>{if(!t)throw bn.create("installation-not-found");return Sm(t)})}function Sm(n){return Dk(n)?{fid:n.fid,registrationStatus:0}:n}function Dk(n){return n.registrationStatus===1&&n.registrationTime+um<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $k({appConfig:n,heartbeatServiceProvider:t},s){const o=Lk(n,s),a=vk(n,s),c=t.getImmediate({optional:!0});if(c){const g=await c.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const d={installation:{sdkVersion:dm,appId:n.appId}},f={method:"POST",headers:a,body:JSON.stringify(d)},p=await vm(()=>fetch(o,f));if(p.ok){const g=await p.json();return mm(g)}else throw await gm("Generate Auth Token",p)}function Lk(n,{fid:t}){return`${pm(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(n,t=!1){let s;const o=await qo(n.appConfig,c=>{if(!Em(c))throw bn.create("not-registered");const d=c.authToken;if(!t&&zk(d))return c;if(d.requestStatus===1)return s=Mk(n,t),c;{if(!navigator.onLine)throw bn.create("app-offline");const f=Fk(c);return s=Uk(n,f),f}});return s?await s:o.authToken}async function Mk(n,t){let s=await Wf(n.appConfig);for(;s.authToken.requestStatus===1;)await wm(100),s=await Wf(n.appConfig);const o=s.authToken;return o.requestStatus===0?Yc(n,t):o}function Wf(n){return qo(n,t=>{if(!Em(t))throw bn.create("not-registered");const s=t.authToken;return Vk(s)?{...t,authToken:{requestStatus:0}}:t})}async function Uk(n,t){try{const s=await $k(n,t),o={...t,authToken:s};return await Mo(n.appConfig,o),s}catch(s){if(fm(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await km(n.appConfig);else{const o={...t,authToken:{requestStatus:0}};await Mo(n.appConfig,o)}throw s}}function Em(n){return n!==void 0&&n.registrationStatus===2}function zk(n){return n.requestStatus===2&&!Bk(n)}function Bk(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+pk}function Fk(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function Vk(n){return n.requestStatus===1&&n.requestTime+um<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(n){const t=n,{installationEntry:s,registrationPromise:o}=await Jc(t);return o?o.catch(console.error):Yc(t).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(n,t=!1){const s=n;return await Hk(s),(await Yc(s,t)).token}async function Hk(n){const{registrationPromise:t}=await Jc(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(n){if(!n||!n.options)throw sc("App Configuration");if(!n.name)throw sc("App Name");const t=["projectId","apiKey","appId"];for(const s of t)if(!n.options[s])throw sc(s);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function sc(n){return bn.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="installations",Gk="installations-internal",Jk=n=>{const t=n.getProvider("app").getImmediate(),s=Kk(t),o=Hc(t,"heartbeat");return{app:t,appConfig:s,heartbeatServiceProvider:o,_delete:()=>Promise.resolve()}},Yk=n=>{const t=n.getProvider("app").getImmediate(),s=Hc(t,Cm).getImmediate();return{getId:()=>Wk(s),getToken:a=>qk(s,a)}};function Qk(){_n(new Jr(Cm,Jk,"PUBLIC")),_n(new Jr(Gk,Yk,"PRIVATE"))}Qk();Kr(cm,Kc);Kr(cm,Kc,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="/firebase-messaging-sw.js",Zk="/firebase-cloud-messaging-push-scope",Tm="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",eS="https://fcmregistrations.googleapis.com/v1",Nm="google.c.a.c_id",tS="google.c.a.c_l",rS="google.c.a.ts",nS="google.c.a.e",qf=1e4;var Hf;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Hf||(Hf={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var ui;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(ui||(ui={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(n){const t=new Uint8Array(n);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function sS(n){const t="=".repeat((4-n.length%4)%4),s=(n+t).replace(/\-/g,"+").replace(/_/g,"/"),o=atob(s),a=new Uint8Array(o.length);for(let c=0;c<o.length;++c)a[c]=o.charCodeAt(c);return a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic="fcm_token_details_db",iS=5,Kf="fcm_token_object_Store";async function oS(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(c=>c.name).includes(ic))return null;let t=null;return(await Vo(ic,iS,{upgrade:async(o,a,c,d)=>{if(a<2||!o.objectStoreNames.contains(Kf))return;const f=d.objectStore(Kf),p=await f.index("fcmSenderId").get(n);if(await f.clear(),!!p){if(a===2){const g=p;if(!g.auth||!g.p256dh||!g.endpoint)return;t={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:wr(g.vapidKey)}}}else if(a===3){const g=p;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:wr(g.auth),p256dh:wr(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:wr(g.vapidKey)}}}else if(a===4){const g=p;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:wr(g.auth),p256dh:wr(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:wr(g.vapidKey)}}}}}})).close(),await ec(ic),await ec("fcm_vapid_details_db"),await ec("undefined"),aS(t)?t:null}function aS(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:t}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="firebase-messaging-database",cS=1,di="firebase-messaging-store";let oc=null;function jm(){return oc||(oc=Vo(lS,cS,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(di)}}})),oc}async function uS(n){const t=Rm(n),o=await(await jm()).transaction(di).objectStore(di).get(t);if(o)return o;{const a=await oS(n.appConfig.senderId);if(a)return await Qc(n,a),a}}async function Qc(n,t){const s=Rm(n),a=(await jm()).transaction(di,"readwrite");return await a.objectStore(di).put(t,s),await a.done,t}function Rm({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},kt=new Fo("messaging","Messaging",dS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(n,t){const s=await Zc(n),o=Im(t),a={method:"POST",headers:s,body:JSON.stringify(o)};let c;try{c=await(await fetch(Xc(n.appConfig),a)).json()}catch(d){throw kt.create("token-subscribe-failed",{errorInfo:d==null?void 0:d.toString()})}if(c.error){const d=c.error.message;throw kt.create("token-subscribe-failed",{errorInfo:d})}if(!c.token)throw kt.create("token-subscribe-no-token");return c.token}async function fS(n,t){const s=await Zc(n),o=Im(t.subscriptionOptions),a={method:"PATCH",headers:s,body:JSON.stringify(o)};let c;try{c=await(await fetch(`${Xc(n.appConfig)}/${t.token}`,a)).json()}catch(d){throw kt.create("token-update-failed",{errorInfo:d==null?void 0:d.toString()})}if(c.error){const d=c.error.message;throw kt.create("token-update-failed",{errorInfo:d})}if(!c.token)throw kt.create("token-update-no-token");return c.token}async function pS(n,t){const o={method:"DELETE",headers:await Zc(n)};try{const c=await(await fetch(`${Xc(n.appConfig)}/${t}`,o)).json();if(c.error){const d=c.error.message;throw kt.create("token-unsubscribe-failed",{errorInfo:d})}}catch(a){throw kt.create("token-unsubscribe-failed",{errorInfo:a==null?void 0:a.toString()})}}function Xc({projectId:n}){return`${eS}/projects/${n}/registrations`}async function Zc({appConfig:n,installations:t}){const s=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${s}`})}function Im({p256dh:n,auth:t,endpoint:s,vapidKey:o}){const a={web:{endpoint:s,auth:t,p256dh:n}};return o!==Tm&&(a.web.applicationPubKey=o),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=10080*60*1e3;async function gS(n){const t=await vS(n.swRegistration,n.vapidKey),s={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:t.endpoint,auth:wr(t.getKey("auth")),p256dh:wr(t.getKey("p256dh"))},o=await uS(n.firebaseDependencies);if(o){if(wS(o.subscriptionOptions,s))return Date.now()>=o.createTime+mS?yS(n,{token:o.token,createTime:Date.now(),subscriptionOptions:s}):o.token;try{await pS(n.firebaseDependencies,o.token)}catch(a){console.warn(a)}return Gf(n.firebaseDependencies,s)}else return Gf(n.firebaseDependencies,s)}async function yS(n,t){try{const s=await fS(n.firebaseDependencies,t),o={...t,token:s,createTime:Date.now()};return await Qc(n.firebaseDependencies,o),s}catch(s){throw s}}async function Gf(n,t){const o={token:await hS(n,t),createTime:Date.now(),subscriptionOptions:t};return await Qc(n,o),o.token}async function vS(n,t){const s=await n.pushManager.getSubscription();return s||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:sS(t)})}function wS(n,t){const s=t.vapidKey===n.vapidKey,o=t.endpoint===n.endpoint,a=t.auth===n.auth,c=t.p256dh===n.p256dh;return s&&o&&a&&c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(n){const t={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return _S(t,n),bS(t,n),xS(t,n),t}function _S(n,t){if(!t.notification)return;n.notification={};const s=t.notification.title;s&&(n.notification.title=s);const o=t.notification.body;o&&(n.notification.body=o);const a=t.notification.image;a&&(n.notification.image=a);const c=t.notification.icon;c&&(n.notification.icon=c)}function bS(n,t){t.data&&(n.data=t.data)}function xS(n,t){var a,c,d,f;if(!t.fcmOptions&&!((a=t.notification)!=null&&a.click_action))return;n.fcmOptions={};const s=((c=t.fcmOptions)==null?void 0:c.link)??((d=t.notification)==null?void 0:d.click_action);s&&(n.fcmOptions.link=s);const o=(f=t.fcmOptions)==null?void 0:f.analytics_label;o&&(n.fcmOptions.analyticsLabel=o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(n){return typeof n=="object"&&!!n&&Nm in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n){if(!n||!n.options)throw ac("App Configuration Object");if(!n.name)throw ac("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:s}=n;for(const o of t)if(!s[o])throw ac(o);return{appName:n.name,projectId:s.projectId,apiKey:s.apiKey,appId:s.appId,senderId:s.messagingSenderId}}function ac(n){return kt.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(t,s,o){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=SS(t);this.firebaseDependencies={app:t,appConfig:a,installations:s,analyticsProvider:o}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(n){try{n.swRegistration=await navigator.serviceWorker.register(Xk,{scope:Zk}),n.swRegistration.update().catch(()=>{}),await TS(n.swRegistration)}catch(t){throw kt.create("failed-service-worker-registration",{browserErrorMessage:t==null?void 0:t.message})}}async function TS(n){return new Promise((t,s)=>{const o=setTimeout(()=>s(new Error(`Service worker not registered after ${qf} ms`)),qf),a=n.installing||n.waiting;n.active?(clearTimeout(o),t()):a?a.onstatechange=c=>{var d;((d=c.target)==null?void 0:d.state)==="activated"&&(a.onstatechange=null,clearTimeout(o),t())}:(clearTimeout(o),s(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NS(n,t){if(!t&&!n.swRegistration&&await CS(n),!(!t&&n.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw kt.create("invalid-sw-registration");n.swRegistration=t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(n,t){t?n.vapidKey=t:n.vapidKey||(n.vapidKey=Tm)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Am(n,t){if(!navigator)throw kt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw kt.create("permission-blocked");return await jS(n,t==null?void 0:t.vapidKey),await NS(n,t==null?void 0:t.serviceWorkerRegistration),gS(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(n,t,s){const o=IS(t);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(o,{message_id:s[Nm],message_name:s[tS],message_time:s[rS],message_device_time:Math.floor(Date.now()/1e3)})}function IS(n){switch(n){case ui.NOTIFICATION_CLICKED:return"notification_open";case ui.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(n,t){const s=t.data;if(!s.isFirebaseMessaging)return;n.onMessageHandler&&s.messageType===ui.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(Jf(s)):n.onMessageHandler.next(Jf(s)));const o=s.data;kS(o)&&o[nS]==="1"&&await RS(n,s.messageType,o)}const Yf="@firebase/messaging",Qf="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=n=>{const t=new ES(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",s=>AS(t,s)),t},PS=n=>{const t=n.getProvider("messaging").getImmediate();return{getToken:o=>Am(t,o)}};function DS(){_n(new Jr("messaging",OS,"PUBLIC")),_n(new Jr("messaging-internal",PS,"PRIVATE")),Kr(Yf,Qf),Kr(Yf,Qf,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Om(){try{await rm()}catch{return!1}return typeof window<"u"&&tm()&&Zb()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(n=ek()){return Om().then(t=>{if(!t)throw kt.create("unsupported-browser")},t=>{throw kt.create("indexed-db-unsupported")}),Hc(nm(n),"messaging").getImmediate()}async function Dm(n,t){return n=nm(n),Am(n,t)}DS();const $S=Object.freeze(Object.defineProperty({__proto__:null,getMessaging:Pm,getToken:Dm,isSupported:Om},Symbol.toStringTag,{value:"Module"})),LS={apiKey:"AQ.Ab8RN6KyfxD057Lxh7vZnIkmdAWM2qurm3jL2AhRNnzEzyqbKg",authDomain:"whats-app-ba228.firebaseapp.com",projectId:"whats-app-ba228",storageBucket:"whats-app-ba228.firebasestorage.app",messagingSenderId:"262534457804",appId:"1:262534457804:web:649d3a91c3aae990d71569",measurementId:"G-C1Y86CZ6D1"},MS=om(LS),US=async()=>{try{const{isSupported:n}=await Bb(async()=>{const{isSupported:t}=await Promise.resolve().then(()=>$S);return{isSupported:t}},void 0);return await n()?Pm(MS):null}catch(n){return console.error("Firebase Messaging not supported",n),null}},zS=async()=>{try{const n=await US();if(!n)return null;const t=await Dm(n,{vapidKey:"BHOxCY8sGByUx_Ck0R2X7O_DkEChn_TmXM3S2CWWzT-0v-mWlaOScvQryAJk9aT3kJD6iYhvLPwWExg5U9FPZxI"});return t?(console.log("FCM Token:",t),t):(console.log("No registration token available. Request permission to generate one."),null)}catch(n){return console.log("An error occurred while retrieving token. ",n),null}};function BS(){const[n,t]=A.useState(!0),[s,o]=A.useState("login"),[a,c]=A.useState(null),[d,f]=A.useState([]),[p,g]=A.useState(null),[w,_]=A.useState([]),[b,C]=A.useState(!0),[N,E]=A.useState(new Set),[R,D]=A.useState({}),[L,$]=A.useState("login"),[q,de]=A.useState(null),[Z,ge]=A.useState([]),[Q,Ne]=A.useState(!1);A.useEffect(()=>{_e.auth.getSession().then(({data:{session:H}})=>{H?gt(H.user.id):C(!1)});const{data:{subscription:V}}=_e.auth.onAuthStateChange((H,M)=>{M?gt(M.user.id):(c(null),o("login"))});return()=>V.unsubscribe()},[]);const et=async V=>{const{data:H,error:M}=await _e.from("chat_requests").select(`
id,
  sender_id,
  profiles!sender_id(display_name)
      `).eq("receiver_id",V).eq("status","pending");if(M){console.error("Error fetching requests:",M);return}ge(H.map(Y=>{var fe;return{id:Y.id,sender_id:Y.sender_id,sender_name:((fe=Y.profiles)==null?void 0:fe.display_name)||"Unknown"}}))};A.useEffect(()=>{a&&(async()=>{const H=await zS();if(H)try{await fetch(`https://${Fc}.supabase.co/functions/v1/make-server-f2fe46ac/fcm-token`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Vc}`},body:JSON.stringify({user_id:a.id,fcm_token:H})})}catch(M){console.error("Failed to register FCM token:",M)}})()},[a]);const gt=async(V,H=!1)=>{var fe;const{data:M,error:Y}=await _e.from("profiles").select("*").eq("id",V).single();if(Y){Y.code==="PGRST116"||(fe=Y.message)!=null&&fe.includes("406")?(console.warn("Profile missing for user. Logging out to clear stale session."),await _e.auth.signOut(),c(null),o("login")):console.error("Error fetching profile:",Y),C(!1);return}if(c({id:M.id,username:M.username,name:M.display_name||M.username,avatar_url:M.avatar_url}),!M.display_name)$("signup"),ee("login");else{const he=localStorage.getItem("chat_app_view"),ke=localStorage.getItem("chat_app_selected_chat");if(he==="chatWindow"&&ke)try{const Te=JSON.parse(ke);g(Te),Ae(Te.id,Te.isGroup),o("chatWindow")}catch{ee("chatList")}else ee(he&&he!=="login"?he:"chatList");Promise.all([Pe(V),et(V)])}C(!1)},Pe=async V=>{const{data:H,error:M}=await _e.from("conversation_participants").select(`
        conversation_id,
        conversations (
            id,
            last_message_text,
            last_message_at
        )
      `).eq("user_id",V);if(M){console.error("Error loading user conversations:",M);return}const Y=H.map(nt=>nt.conversation_id);if(Y.length===0){f([]);return}const{data:fe,error:he}=await _e.from("conversation_participants").select(`
        conversation_id,
        user_id,
        profiles (id, display_name)
      `).in("conversation_id",Y).neq("user_id",V);if(he){console.error("Error loading partners:",he);return}const ke=H.map(nt=>{var Mt,Ut;const Be=fe.find(Sn=>Sn.conversation_id===nt.conversation_id),nr=Be!=null&&Be.profiles&&!Array.isArray(Be.profiles)?Be.profiles.display_name:"Unknown User";return{id:nt.conversation_id,partnerId:(Be==null?void 0:Be.user_id)||"unknown",partnerName:nr,lastMessage:((Mt=nt.conversations)==null?void 0:Mt.last_message_text)||"",lastMessageTime:((Ut=nt.conversations)==null?void 0:Ut.last_message_at)||"",unreadCount:0,isGroup:!1}}),{data:Te,error:Se}=await _e.from("group_members").select(`
        group_id,
        groups (
          id,
          name,
          updated_at
        )
      `).eq("user_id",V);let Ke=[];if(Te&&!Se){const nt=Te.map(nr=>nr.group_id),{data:Be}=await _e.from("group_messages").select("group_id, text, created_at").in("group_id",nt).order("created_at",{ascending:!1});Ke=Te.map(nr=>{const Mt=nr.groups,Ut=Be==null?void 0:Be.find(Sn=>Sn.group_id===Mt.id);return{id:Mt.id,partnerId:Mt.id,partnerName:Mt.name,lastMessage:(Ut==null?void 0:Ut.text)||"No messages yet",lastMessageTime:(Ut==null?void 0:Ut.created_at)||Mt.updated_at,unreadCount:0,isGroup:!0}})}const dt=[...ke,...Ke].sort((nt,Be)=>{const nr=new Date(nt.lastMessageTime).getTime();return new Date(Be.lastMessageTime).getTime()-nr});f(dt)},Ae=async(V,H=!1)=>{var ke,Te;if(V!==((ke=S.current)==null?void 0:ke.id))return;let M,Y;if(H){const Se=await _e.from("group_messages").select("*").eq("group_id",V).order("created_at",{ascending:!0});M=Se.data,Y=Se.error}else{const Se=await _e.from("messages").select("*").eq("conversation_id",V).order("created_at",{ascending:!0});M=Se.data,Y=Se.error}if(Y){console.error("Error loading messages:",Y);return}if(V!==((Te=S.current)==null?void 0:Te.id))return;const fe=(M||[]).map(Se=>({id:Se.id,senderId:Se.sender_id,text:Se.text,fileUrl:Se.file_url,fileType:Se.file_type,fileName:Se.file_name,timestamp:Se.created_at,isRead:Se.is_read||!1,replyToId:Se.reply_to_id,reactions:Se.reactions||{}}));_(Se=>{const Ke=Se.filter(Be=>Be.isOptimistic),dt=new Set(fe.map(Be=>Be.id)),nt=Ke.filter(Be=>!dt.has(Be.id));return[...fe,...nt]});const he=P.current;he&&!H&&Qe(V,he.id)},Qe=async(V,H)=>{await _e.from("messages").update({is_read:!0}).eq("conversation_id",V).neq("sender_id",H).eq("is_read",!1)},Ve=V=>{g(V),Ae(V.id,V.isGroup),ee("chatWindow"),localStorage.setItem("chat_app_selected_chat",JSON.stringify(V))},Re=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(V){const H=Math.random()*16|0;return(V==="x"?H:H&3|8).toString(16)}),Ce=A.useCallback(async(V,H,M,Y,fe)=>{if(!a||!p)return;const he=Re(),ke={id:he,senderId:a.id,text:V,fileUrl:H,fileType:M,fileName:Y,timestamp:new Date().toISOString(),isRead:!1,isOptimistic:!0,replyToId:fe};_(Te=>[...Te,ke]);try{let Te,Se;if(p.isGroup){const Ke=await _e.from("group_messages").insert({id:he,group_id:p.id,sender_id:a.id,text:V,file_url:H,file_type:M,file_name:Y,reply_to_id:fe}).select().single();Te=Ke.data,Se=Ke.error}else{const Ke=await _e.from("messages").insert({id:he,conversation_id:p.id,sender_id:a.id,text:V,file_url:H,file_type:M,file_name:Y,reply_to_id:fe}).select().single();Te=Ke.data,Se=Ke.error}if(Se)throw Se;Te&&_(Ke=>Ke.map(dt=>dt.id===he?{...dt,isOptimistic:!1}:dt))}catch(Te){console.error("Error sending message:",Te),_(Se=>Se.filter(Ke=>Ke.id!==he)),Je.error("Failed to send message: "+(Te.message||"Unknown error"))}},[a,p]),O=async V=>{if(!a||!p)return;const H=Re(),M=URL.createObjectURL(V),Y={id:H,senderId:a.id,text:" Voice Message",fileUrl:M,fileType:"audio/webm",timestamp:new Date().toISOString(),isRead:!1};_(fe=>[...fe,Y]);try{const fe=`voice_${Date.now()}_${a.id}.webm`,{data:he,error:ke}=await _e.storage.from("voice-messages").upload(fe,V,{contentType:"audio/webm;codecs=opus",cacheControl:"3600"});if(ke)throw ke;const{data:{publicUrl:Te}}=_e.storage.from("voice-messages").getPublicUrl(fe);let Se;if(p.isGroup?Se=(await _e.from("group_messages").insert({id:H,group_id:p.id,sender_id:a.id,text:" Voice Message",file_url:Te,file_type:"audio"})).error:Se=(await _e.from("messages").insert({id:H,conversation_id:p.id,sender_id:a.id,text:" Voice Message",file_url:Te,file_type:"audio"})).error,Se)throw Se;_(Ke=>Ke.map(dt=>dt.id===H?{...dt,fileUrl:Te}:dt)),URL.revokeObjectURL(M)}catch(fe){console.error("Error sending voice message:",fe),_(he=>he.filter(ke=>ke.id!==H)),Je.error("Failed to send voice message"),URL.revokeObjectURL(M)}},oe=async V=>{if(a)try{const{error:H}=await _e.from("messages").update({text:" This message was deleted",file_url:null,file_type:null,file_name:null}).eq("id",V).eq("sender_id",a.id);if(H)throw H;_(M=>M.map(Y=>Y.id===V?{...Y,text:" This message was deleted",fileUrl:null,fileType:null,fileName:null}:Y)),Je.success("Message deleted")}catch(H){console.error("Error deleting message:",H),Je.error("Failed to delete message")}},J=async(V,H)=>{if(!a)return;const M=w.find(he=>he.id===V);if(!M)return;const Y={...M.reactions||{}},fe=[...Y[H]||[]];fe.includes(a.id)?(Y[H]=fe.filter(he=>he!==a.id),Y[H].length===0&&delete Y[H]):Y[H]=[...fe,a.id],_(he=>he.map(ke=>ke.id===V?{...ke,reactions:Y}:ke));try{const he=p!=null&&p.isGroup?"group_messages":"messages",{error:ke}=await _e.from(he).update({reactions:Y}).eq("id",V);if(ke)throw ke}catch(he){console.error("Error reacting:",he),p&&Ae(p.id,p.isGroup)}},S=A.useRef(null),P=A.useRef(null);A.useEffect(()=>{S.current=p},[p]),A.useEffect(()=>{P.current=a},[a]),A.useEffect(()=>{if(!a)return;const V=_e.channel("chat-realtime");return V.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},H=>{const M=H.new,Y=S.current,fe=P.current;Y&&M.conversation_id===Y.id&&(_(he=>he.some(ke=>ke.id===M.id)?he:[...he,{id:M.id,senderId:M.sender_id,text:M.text,fileUrl:M.file_url,fileType:M.file_type,fileName:M.file_name,timestamp:M.created_at,isRead:M.is_read,replyToId:M.reply_to_id,reactions:M.reactions||{}}]),fe&&Qe(Y.id,fe.id)),fe&&Pe(fe.id)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},H=>{const M=H.new,Y=S.current;Y&&M.conversation_id===Y.id&&_(fe=>fe.map(he=>he.id===M.id?{...he,isRead:M.is_read,text:M.text,reactions:M.reactions||{}}:he))}).on("postgres_changes",{event:"*",schema:"public",table:"conversations"},()=>{P.current&&Pe(P.current.id)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"conversation_participants"},H=>{P.current&&H.new.user_id===P.current.id&&Pe(P.current.id)}).on("presence",{event:"sync"},()=>{const H=V.presenceState(),M=new Set;Object.values(H).forEach(Y=>{Y.forEach(fe=>M.add(fe.user_id))}),E(M)}).on("broadcast",{event:"typing"},({payload:H})=>{const{user_id:M,conversation_id:Y,is_typing:fe}=H,he=S.current,ke=P.current;he&&Y===he.id&&M!==(ke==null?void 0:ke.id)&&D(Te=>({...Te,[M]:fe}))}).on("postgres_changes",{event:"*",schema:"public",table:"chat_requests"},H=>{if(P.current&&(et(P.current.id),H.eventType==="UPDATE")){const M=H.new;M.sender_id===P.current.id&&(M.status==="rejected"?(Je.error("Your chat request was declined."),_e.from("chat_requests").delete().eq("id",M.id).then()):M.status==="accepted"&&Pe(P.current.id))}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"group_messages"},H=>{const M=H.new,Y=S.current,fe=P.current;if(Y&&Y.isGroup&&M.group_id===Y.id){const he={id:M.id,senderId:M.sender_id,text:M.text,fileUrl:M.file_url,fileType:M.file_type,fileName:M.file_name,timestamp:M.created_at,isRead:!1,replyToId:M.reply_to_id,reactions:M.reactions||{}};_(ke=>ke.some(Te=>Te.id===M.id)?ke:[...ke,he])}fe&&Pe(fe.id)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"group_messages"},H=>{const M=H.new,Y=S.current;Y&&Y.isGroup&&M.group_id===Y.id&&_(fe=>fe.map(he=>he.id===M.id?{...he,text:M.text,reactions:M.reactions||{}}:he))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"group_members"},H=>{const M=H.new,Y=P.current;Y&&M.user_id===Y.id&&(Pe(Y.id),Je.info("You were added to a group"))}).subscribe(async H=>{H==="SUBSCRIBED"&&P.current&&await V.track({user_id:P.current.id,online_at:new Date().toISOString()})}),()=>{_e.removeChannel(V)}},[a]),A.useEffect(()=>{if(!a)return;const V=setInterval(()=>{Pe(a.id);const H=S.current;H&&Ae(H.id,H.isGroup),et(a.id)},1e3);return()=>clearInterval(V)},[a]);const ae=V=>{!a||!p||_e.channel("chat-realtime").send({type:"broadcast",event:"typing",payload:{user_id:a.id,conversation_id:p.id,is_typing:V}})},ee=V=>{o(V),localStorage.setItem("chat_app_view",V),V!=="chatWindow"&&(localStorage.removeItem("chat_app_selected_chat"),g(null))},z=async()=>{localStorage.clear(),await _e.auth.signOut()},G=async(V,H,M)=>{try{const Y=`${V.trim().toLowerCase()}@app.local`,{error:fe}=await _e.auth.signUp({email:Y,password:M,options:{data:{username:V.trim().toLowerCase(),display_name:H.trim(),pin:M}}});if(fe){Je.error(fe.message);return}Je.success("Account created successfully!"),ee("login")}catch(Y){Je.error(Y.message||"Registration failed")}},K=async(V,H)=>{if(a)try{const{error:M}=await _e.from("chat_requests").update({status:"accepted"}).eq("id",V);if(M)throw console.error("Step 1 (Update Request) failed:",M),M;const{data:Y,error:fe}=await _e.from("conversations").insert({}).select().single();if(fe)throw console.error("Step 2 (Create Conversation) failed:",fe),fe;const{error:he}=await _e.from("conversation_participants").insert([{conversation_id:Y.id,user_id:a.id},{conversation_id:Y.id,user_id:H}]);if(he)throw console.error("Step 3 (Add Participants) failed:",he),he;Je.success("Request accepted!"),await Promise.all([Pe(a.id),et(a.id)]);const{data:ke,error:Te}=await _e.from("profiles").select("display_name").eq("id",H).single();Te&&console.warn("Could not fetch partner profile for auto-open:",Te);const Se=(ke==null?void 0:ke.display_name)||"New Chat";console.log("Successfully accepting. Opening chat with:",Se),Ve({id:Y.id,partnerId:H,partnerName:Se,lastMessage:"",lastMessageTime:new Date().toISOString(),unreadCount:0,isGroup:!1})}catch(M){console.error("Error accepting request:",M),Je.error("Failed to accept request")}},ue=async V=>{try{await _e.from("chat_requests").update({status:"rejected"}).eq("id",V),Je.success("Request dismissed"),a&&et(a.id)}catch(H){Je.error(H.message||"Failed to reject request")}};if(q)return m.jsxs("div",{className:"w-full h-[100dvh] bg-[#111b21] flex flex-col items-center justify-center text-red-500 p-6 text-center",children:[m.jsx("p",{className:"text-xl font-bold mb-4",children:q}),m.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center gap-2 text-[#00a884] hover:underline",children:[m.jsx(tp,{className:"w-5 h-5"})," Retry"]})]});const xe=A.useCallback(()=>{t(!1)},[]);return b?m.jsx("div",{className:"w-full h-[100dvh] bg-[#111b21] flex flex-col items-center justify-center",children:m.jsx(If,{onFinish:()=>{}})}):m.jsx("div",{className:"w-full h-[100dvh] bg-[#111b21] overflow-hidden",children:n?m.jsx(If,{onFinish:xe}):m.jsx("div",{className:"flex h-full w-full",children:a?m.jsxs("div",{className:"flex h-full w-full overflow-hidden",children:[m.jsx("div",{className:`${s==="chatWindow"?"hidden md:flex":"flex"} w-full md:w-[400px] flex-shrink-0 border-r border-gray-800`,children:m.jsx(Ib,{chats:d,currentUser:a,onlineUsers:N,pendingRequests:Z,onAcceptRequest:K,onRejectRequest:ue,onSelectChat:(V,H)=>{const M=d.find(Y=>Y.partnerId===V);M&&Ve(M)},onNewChat:()=>ee("newChat"),onCreateGroup:()=>ee("createGroup"),onLogout:z,typingUsers:R})}),m.jsx("div",{className:`flex-1 flex flex-col min-w-0 ${s==="chatWindow"?"flex":"hidden md:flex"}`,children:s==="chatWindow"&&p?m.jsx(Db,{currentUserId:a.id,partnerId:p.partnerId,partnerName:p.partnerName,messages:w,isPartnerOnline:N.has(p.partnerId),isPartnerTyping:R[p.partnerId]||!1,onBack:()=>ee("chatList"),onSendMessage:Ce,onSendVoiceMessage:O,onDeleteMessage:oe,onTyping:ae,onRefresh:()=>Ae(p.id,p.isGroup),onReact:J,isGroup:p.isGroup}):s==="requests"&&a?m.jsxs("div",{className:"flex-1 flex flex-col",children:[m.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>ee("chatList"),className:"text-gray-400 hover:text-white",children:m.jsx(as,{className:"w-5 h-5"})}),m.jsx("h2",{className:"text-white font-bold",children:"Chat Requests"})]}),m.jsx(Mb,{requests:Z,onAccept:K,onReject:ue})]}):s==="newChat"?m.jsx($b,{onBack:()=>ee("chatList"),currentUserId:a.id}):s==="createGroup"?m.jsx(Lb,{onBack:()=>ee("chatList"),currentUserId:a.id}):m.jsxs("div",{className:"flex-1 bg-[#222e35] flex flex-col items-center justify-center p-8 text-center border-l border-gray-800/50",children:[m.jsx("div",{className:"w-48 h-48 mb-8 opacity-10 bg-[#00a884] rounded-full flex items-center justify-center",children:m.jsx(ep,{className:"w-24 h-24 text-white"})}),m.jsx("h2",{className:"text-white text-3xl font-light mb-4",children:"WhatsApp Web Replica"}),m.jsx("p",{className:"text-gray-400 max-w-sm text-sm leading-relaxed opacity-60",children:"Send and receive messages without keeping your phone online."}),m.jsxs("div",{className:"mt-auto text-gray-600 text-[10px] flex items-center gap-1",children:[m.jsx(hi,{className:"w-3 h-3"})," End-to-end encrypted"]})]})})]}):m.jsxs("div",{className:"w-full h-full",children:[s==="login"&&m.jsx(gb,{initialStep:L,onLoginSuccess:()=>{_e.auth.getUser().then(({data:{user:V}})=>{V&&gt(V.id,!0)})},onNavigateToRegister:()=>ee("register")}),s==="register"&&m.jsx(yb,{onRegister:G,onBackToLogin:()=>ee("login")})]})})})}zy.createRoot(document.getElementById("root")).render(m.jsx(BS,{}));
