import{c as y,r,j as e,m as b,f as N,t as k}from"./index-D7he1i6_.js";import{c as P}from"./utils-Bz25wyST.js";import{F as S}from"./fingerprint-zBi4BOHK.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],_=y("delete",I);function A({children:a,language:i,onUnlock:x,isAuthenticated:n}){const[g,o]=r.useState(!0),[l,c]=r.useState(""),[f,d]=r.useState(!1),[C,E]=r.useState(!1),[m,j]=r.useState(null);r.useEffect(()=>{const t=localStorage.getItem("chat_app_pin"),s=localStorage.getItem("chat_app_biometric")==="true";j(t),!t&&!s?(o(!1),x()):(o(!0),s&&u())},[n]);const u=async()=>{try{if(!window.PublicKeyCredential)return;const t=new Uint8Array(32);window.crypto.getRandomValues(t),await navigator.credentials.get({publicKey:{challenge:t,rpId:window.location.hostname,userVerification:"required",timeout:6e4}})&&h()}catch(t){console.error("Biometric auth failed",t)}},h=()=>{o(!1),x()},p=t=>{if(l.length<6){const s=l+t;c(s),d(!1),s.length===6&&w(s)}},w=t=>{m&&(t===m?h():(d(!0),c(""),k.error(i==="ar"?"رمز خاطئ":"Incorrect PIN")))},v=()=>{c(t=>t.slice(0,-1)),d(!1)};return g?n?!m&&n?e.jsx(e.Fragment,{children:a}):e.jsx("div",{className:"fixed inset-0 z-[9999] bg-[#111b21] flex flex-col items-center justify-center text-white pb-10",children:e.jsxs(b.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-sm px-8 flex flex-col items-center",children:[e.jsxs("div",{className:"mb-8 flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-indigo-500/20 rounded-full flex items-center justify-center mb-4 ring-1 ring-indigo-500/50 shadow-[0_0_30px_rgba(99,102,241,0.3)]",children:e.jsx(N,{className:"w-10 h-10 text-indigo-400"})}),e.jsx("h1",{className:"text-2xl font-bold font-outfit",children:i==="ar"?"Chat App مقفل":"Chat App Locked"}),e.jsx("p",{className:"text-slate-400 text-sm",children:i==="ar"?"أدخل رمز المرور للمتابعة":"Enter your passcode to continue"})]}),e.jsx("div",{className:"flex gap-4 mb-12",children:[1,2,3,4,5,6].map(t=>e.jsx("div",{className:"relative",children:e.jsx(b.div,{className:P("w-4 h-4 rounded-full border-2 transition-colors duration-200",l.length>=t?"bg-indigo-500 border-indigo-500":f?"border-red-500 bg-red-500/20":"border-slate-600 bg-slate-800"),animate:f?{x:[-5,5,-5,5,0]}:{}})},t))}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 w-full max-w-[280px]",children:[[1,2,3,4,5,6,7,8,9].map(t=>e.jsx("button",{onClick:()=>p(t),className:"w-16 h-16 rounded-full bg-slate-800/50 hover:bg-slate-700/80 flex items-center justify-center text-2xl font-medium transition-all active:scale-95 border border-slate-700 backdrop-blur-sm",children:t},t)),e.jsx("button",{onClick:()=>u(),className:"w-16 h-16 flex items-center justify-center rounded-full text-indigo-400 hover:bg-indigo-500/10 transition-colors",children:e.jsx(S,{className:"w-8 h-8"})}),e.jsx("button",{onClick:()=>p(0),className:"w-16 h-16 rounded-full bg-slate-800/50 hover:bg-slate-700/80 flex items-center justify-center text-2xl font-medium transition-all active:scale-95 border border-slate-700 backdrop-blur-sm",children:"0"}),e.jsx("button",{onClick:v,className:"w-16 h-16 flex items-center justify-center rounded-full text-slate-400 hover:text-white hover:bg-white/5 transition-colors",children:e.jsx(_,{className:"w-8 h-8"})})]}),e.jsx("p",{className:"mt-8 text-xs text-slate-500 cursor-pointer hover:text-indigo-400 transition-colors",children:i==="ar"?"نسيت الرمز؟":"Forgot Passcode?"})]})}):e.jsx(e.Fragment,{children:a}):e.jsx(e.Fragment,{children:a})}export{A as AppLock};
