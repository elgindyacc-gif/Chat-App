import{r as u,j as d,P as p,i as A}from"./index-D7he1i6_.js";function M(e,t=[]){let o=[];function a(n,s){const r=u.createContext(s),i=o.length;o=[...o,s];const l=v=>{var _;const{scope:f,children:x,...m}=v,g=((_=f==null?void 0:f[e])==null?void 0:_[i])||r,P=u.useMemo(()=>m,Object.values(m));return d.jsx(g.Provider,{value:P,children:x})};l.displayName=n+"Provider";function C(v,f){var g;const x=((g=f==null?void 0:f[e])==null?void 0:g[i])||r,m=u.useContext(x);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${v}\` must be used within \`${n}\``)}return[l,C]}const c=()=>{const n=o.map(s=>u.createContext(s));return function(r){const i=(r==null?void 0:r[e])||n;return u.useMemo(()=>({[`__scope${e}`]:{...r,[e]:i}}),[r,i])}};return c.scopeName=e,[a,N(c,...t)]}function N(...e){const t=e[0];if(e.length===1)return t;const o=()=>{const a=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(n){const s=a.reduce((r,{useScope:i,scopeName:l})=>{const v=i(n)[`__scope${l}`];return{...r,...v}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return o.scopeName=t.scopeName,o}function R(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e}),u.useMemo(()=>(...o)=>{var a;return(a=t.current)==null?void 0:a.call(t,...o)},[])}var h=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},S="Avatar",[y]=M(S),[$,w]=y(S),L=u.forwardRef((e,t)=>{const{__scopeAvatar:o,...a}=e,[c,n]=u.useState("idle");return d.jsx($,{scope:o,imageLoadingStatus:c,onImageLoadingStatusChange:n,children:d.jsx(p.span,{...a,ref:t})})});L.displayName=S;var j="AvatarImage",b=u.forwardRef((e,t)=>{const{__scopeAvatar:o,src:a,onLoadingStatusChange:c=()=>{},...n}=e,s=w(j,o),r=k(a,n.referrerPolicy),i=R(l=>{c(l),s.onImageLoadingStatusChange(l)});return h(()=>{r!=="idle"&&i(r)},[r,i]),r==="loaded"?d.jsx(p.img,{...n,ref:t,src:a}):null});b.displayName=j;var E="AvatarFallback",I=u.forwardRef((e,t)=>{const{__scopeAvatar:o,delayMs:a,...c}=e,n=w(E,o),[s,r]=u.useState(a===void 0);return u.useEffect(()=>{if(a!==void 0){const i=window.setTimeout(()=>r(!0),a);return()=>window.clearTimeout(i)}},[a]),s&&n.imageLoadingStatus!=="loaded"?d.jsx(p.span,{...c,ref:t}):null});I.displayName=E;function k(e,t){const[o,a]=u.useState("idle");return h(()=>{if(!e){a("error");return}let c=!0;const n=new window.Image,s=r=>()=>{c&&a(r)};return a("loading"),n.onload=s("loaded"),n.onerror=s("error"),n.src=e,t&&(n.referrerPolicy=t),()=>{c=!1}},[e,t]),o}var F=L,T=b,z=I;function q({className:e,...t}){return d.jsx(F,{"data-slot":"avatar",className:A("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function G({className:e,...t}){return d.jsx(T,{"data-slot":"avatar-image",className:A("aspect-square size-full",e),...t})}function H({className:e,...t}){return d.jsx(z,{"data-slot":"avatar-fallback",className:A("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}export{q as A,H as a,G as b};
